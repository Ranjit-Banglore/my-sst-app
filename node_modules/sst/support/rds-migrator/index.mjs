var EP=Object.create;var Rs=Object.defineProperty;var wP=Object.getOwnPropertyDescriptor;var SP=Object.getOwnPropertyNames;var NP=Object.getPrototypeOf,xP=Object.prototype.hasOwnProperty;var j=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var C=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Dn=(t,e)=>{for(var r in e)Rs(t,r,{get:e[r],enumerable:!0})},Pm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of SP(e))!xP.call(t,i)&&i!==r&&Rs(t,i,{get:()=>e[i],enumerable:!(n=wP(e,i))||n.enumerable});return t};var se=(t,e,r)=>(r=t!=null?EP(NP(t)):{},Pm(e||!t||!t.__esModule?Rs(r,"default",{value:t,enumerable:!0}):r,t)),F=t=>Pm(Rs({},"__esModule",{value:!0}),t);var Mt=v((boe,Dh)=>{var Ea=Object.defineProperty,uI=Object.getOwnPropertyDescriptor,pI=Object.getOwnPropertyNames,fI=Object.prototype.hasOwnProperty,wa=(t,e)=>Ea(t,"name",{value:e,configurable:!0}),mI=(t,e)=>{for(var r in e)Ea(t,r,{get:e[r],enumerable:!0})},hI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pI(e))!fI.call(t,i)&&i!==r&&Ea(t,i,{get:()=>e[i],enumerable:!(n=uI(e,i))||n.enumerable});return t},gI=t=>hI(Ea({},"__esModule",{value:!0}),t),Ch={};mI(Ch,{AlgorithmId:()=>Ah,EndpointURLScheme:()=>Th,FieldPosition:()=>Ph,HttpApiKeyAuthLocation:()=>Rh,HttpAuthLocation:()=>Oh,IniSectionType:()=>Ih,RequestHandlerProtocol:()=>kh,SMITHY_CONTEXT_KEY:()=>wI,getDefaultClientConfiguration:()=>_I,resolveDefaultRuntimeConfig:()=>EI});Dh.exports=gI(Ch);var Oh=(t=>(t.HEADER="header",t.QUERY="query",t))(Oh||{}),Rh=(t=>(t.HEADER="header",t.QUERY="query",t))(Rh||{}),Th=(t=>(t.HTTP="http",t.HTTPS="https",t))(Th||{}),Ah=(t=>(t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256",t))(Ah||{}),yI=wa(t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>"sha256",checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>"md5",checksumConstructor:()=>t.md5}),{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),vI=wa(t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},"resolveChecksumRuntimeConfig"),_I=wa(t=>({...yI(t)}),"getDefaultClientConfiguration"),EI=wa(t=>({...vI(t)}),"resolveDefaultRuntimeConfig"),Ph=(t=>(t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER",t))(Ph||{}),wI="__smithy_context",Ih=(t=>(t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services",t))(Ih||{}),kh=(t=>(t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0",t))(kh||{})});var de=v((Toe,Vh)=>{var Sa=Object.defineProperty,SI=Object.getOwnPropertyDescriptor,NI=Object.getOwnPropertyNames,xI=Object.prototype.hasOwnProperty,Wr=(t,e)=>Sa(t,"name",{value:e,configurable:!0}),bI=(t,e)=>{for(var r in e)Sa(t,r,{get:e[r],enumerable:!0})},CI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of NI(e))!xI.call(t,i)&&i!==r&&Sa(t,i,{get:()=>e[i],enumerable:!(n=SI(e,i))||n.enumerable});return t},OI=t=>CI(Sa({},"__esModule",{value:!0}),t),qh={};bI(qh,{Field:()=>AI,Fields:()=>PI,HttpRequest:()=>II,HttpResponse:()=>kI,IHttpRequest:()=>Fh.HttpRequest,getHttpHandlerExtensionConfiguration:()=>RI,isValidHostname:()=>$h,resolveHttpHandlerRuntimeConfig:()=>TI});Vh.exports=OI(qh);var RI=Wr(t=>{let e=t.httpHandler;return{setHttpHandler(r){e=r},httpHandler(){return e},updateHttpClientConfig(r,n){e.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},"getHttpHandlerExtensionConfiguration"),TI=Wr(t=>({httpHandler:t.httpHandler()}),"resolveHttpHandlerRuntimeConfig"),Fh=Mt(),Mh=class{constructor({name:e,kind:r=Fh.FieldPosition.HEADER,values:n=[]}){this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}};Wr(Mh,"Field");var AI=Mh,Lh=class{constructor({fields:e=[],encoding:r="utf-8"}){this.entries={},e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}};Wr(Lh,"Fields");var PI=Lh,Wh=class Vl{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new Vl({...e,headers:{...e.headers}});return r.query&&(r.query=Uh(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return Vl.clone(this)}};Wr(Wh,"HttpRequest");var II=Wh;function Uh(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}Wr(Uh,"cloneQuery");var jh=class{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};Wr(jh,"HttpResponse");var kI=jh;function $h(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Wr($h,"isValidHostname")});var Lo=v((Aoe,Kh)=>{"use strict";var Na=Object.defineProperty,DI=Object.getOwnPropertyDescriptor,qI=Object.getOwnPropertyNames,FI=Object.prototype.hasOwnProperty,Bl=(t,e)=>Na(t,"name",{value:e,configurable:!0}),MI=(t,e)=>{for(var r in e)Na(t,r,{get:e[r],enumerable:!0})},LI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qI(e))!FI.call(t,i)&&i!==r&&Na(t,i,{get:()=>e[i],enumerable:!(n=DI(e,i))||n.enumerable});return t},WI=t=>LI(Na({},"__esModule",{value:!0}),t),Bh={};MI(Bh,{getHostHeaderPlugin:()=>jI,hostHeaderMiddleware:()=>zh,hostHeaderMiddlewareOptions:()=>Gh,resolveHostHeaderConfig:()=>Hh});Kh.exports=WI(Bh);var UI=de();function Hh(t){return t}Bl(Hh,"resolveHostHeaderConfig");var zh=Bl(t=>e=>async r=>{if(!UI.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:i=""}=t.requestHandler.metadata||{};if(i.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let o=n.hostname;n.port!=null&&(o+=`:${n.port}`),n.headers.host=o}return e(r)},"hostHeaderMiddleware"),Gh={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},jI=Bl(t=>({applyToStack:e=>{e.add(zh(t),Gh)}}),"getHostHeaderPlugin")});var Wo=v((Poe,Zh)=>{"use strict";var xa=Object.defineProperty,$I=Object.getOwnPropertyDescriptor,VI=Object.getOwnPropertyNames,BI=Object.prototype.hasOwnProperty,Qh=(t,e)=>xa(t,"name",{value:e,configurable:!0}),HI=(t,e)=>{for(var r in e)xa(t,r,{get:e[r],enumerable:!0})},zI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of VI(e))!BI.call(t,i)&&i!==r&&xa(t,i,{get:()=>e[i],enumerable:!(n=$I(e,i))||n.enumerable});return t},GI=t=>zI(xa({},"__esModule",{value:!0}),t),Jh={};HI(Jh,{getLoggerPlugin:()=>KI,loggerMiddleware:()=>Yh,loggerMiddlewareOptions:()=>Xh});Zh.exports=GI(Jh);var Yh=Qh(()=>(t,e)=>async r=>{var n,i;try{let o=await t(r),{clientName:s,commandName:a,logger:d,dynamoDbDocumentClientOptions:l={}}=e,{overrideInputFilterSensitiveLog:u,overrideOutputFilterSensitiveLog:p}=l,m=u??e.inputFilterSensitiveLog,f=p??e.outputFilterSensitiveLog,{$metadata:y,...S}=o.output;return(n=d?.info)==null||n.call(d,{clientName:s,commandName:a,input:m(r.input),output:f(S),metadata:y}),o}catch(o){let{clientName:s,commandName:a,logger:d,dynamoDbDocumentClientOptions:l={}}=e,{overrideInputFilterSensitiveLog:u}=l,p=u??e.inputFilterSensitiveLog;throw(i=d?.error)==null||i.call(d,{clientName:s,commandName:a,input:p(r.input),error:o,metadata:o.$metadata}),o}},"loggerMiddleware"),Xh={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},KI=Qh(t=>({applyToStack:e=>{e.add(Yh(),Xh)}}),"getLoggerPlugin")});var Uo=v((Ioe,ig)=>{"use strict";var ba=Object.defineProperty,QI=Object.getOwnPropertyDescriptor,JI=Object.getOwnPropertyNames,YI=Object.prototype.hasOwnProperty,Hl=(t,e)=>ba(t,"name",{value:e,configurable:!0}),XI=(t,e)=>{for(var r in e)ba(t,r,{get:e[r],enumerable:!0})},ZI=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of JI(e))!YI.call(t,i)&&i!==r&&ba(t,i,{get:()=>e[i],enumerable:!(n=QI(e,i))||n.enumerable});return t},ek=t=>ZI(ba({},"__esModule",{value:!0}),t),tg={};XI(tg,{addRecursionDetectionMiddlewareOptions:()=>ng,getRecursionDetectionPlugin:()=>ik,recursionDetectionMiddleware:()=>rg});ig.exports=ek(tg);var tk=de(),eg="X-Amzn-Trace-Id",rk="AWS_LAMBDA_FUNCTION_NAME",nk="_X_AMZN_TRACE_ID",rg=Hl(t=>e=>async r=>{let{request:n}=r;if(!tk.HttpRequest.isInstance(n)||t.runtime!=="node"||n.headers.hasOwnProperty(eg))return e(r);let i=process.env[rk],o=process.env[nk],s=Hl(a=>typeof a=="string"&&a.length>0,"nonEmptyString");return s(i)&&s(o)&&(n.headers[eg]=o),e({...r,request:n})},"recursionDetectionMiddleware"),ng={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ik=Hl(t=>({applyToStack:e=>{e.add(rg(t),ng)}}),"getRecursionDetectionPlugin")});var zl,ok,og=C(()=>{zl=se(Mt()),ok=t=>t[zl.SMITHY_CONTEXT_KEY]||(t[zl.SMITHY_CONTEXT_KEY]={})});var Nt=v((Doe,dg)=>{var Ca=Object.defineProperty,sk=Object.getOwnPropertyDescriptor,ak=Object.getOwnPropertyNames,ck=Object.prototype.hasOwnProperty,ag=(t,e)=>Ca(t,"name",{value:e,configurable:!0}),dk=(t,e)=>{for(var r in e)Ca(t,r,{get:e[r],enumerable:!0})},lk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ak(e))!ck.call(t,i)&&i!==r&&Ca(t,i,{get:()=>e[i],enumerable:!(n=sk(e,i))||n.enumerable});return t},uk=t=>lk(Ca({},"__esModule",{value:!0}),t),cg={};dk(cg,{getSmithyContext:()=>pk,normalizeProvider:()=>fk});dg.exports=uk(cg);var sg=Mt(),pk=ag(t=>t[sg.SMITHY_CONTEXT_KEY]||(t[sg.SMITHY_CONTEXT_KEY]={}),"getSmithyContext"),fk=ag(t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e},"normalizeProvider")});function mk(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var qoe,lg,jo,Oa=C(()=>{qoe=se(Mt()),lg=se(Nt());jo=(t,e)=>(r,n)=>async i=>{let o=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,i.input)),s=mk(t.httpAuthSchemes),a=(0,lg.getSmithyContext)(n),d=[];for(let l of o){let u=s.get(l.schemeId);if(!u){d.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}let p=u.identityProvider(await e.identityProviderConfigProvider(t));if(!p){d.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:m={},signingProperties:f={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},m),l.signingProperties=Object.assign(l.signingProperties||{},f),a.selectedHttpAuthScheme={httpAuthOption:l,identity:await p(l.identityProperties),signer:u.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(i)}});var ug,hk,pg=C(()=>{Oa();ug={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},hk=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(jo(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),ug)}})});var gn=v((Uoe,_g)=>{var Ra=Object.defineProperty,gk=Object.getOwnPropertyDescriptor,yk=Object.getOwnPropertyNames,vk=Object.prototype.hasOwnProperty,Gl=(t,e)=>Ra(t,"name",{value:e,configurable:!0}),_k=(t,e)=>{for(var r in e)Ra(t,r,{get:e[r],enumerable:!0})},Ek=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yk(e))!vk.call(t,i)&&i!==r&&Ra(t,i,{get:()=>e[i],enumerable:!(n=gk(e,i))||n.enumerable});return t},wk=t=>Ek(Ra({},"__esModule",{value:!0}),t),fg={};_k(fg,{deserializerMiddleware:()=>mg,deserializerMiddlewareOption:()=>gg,getSerdePlugin:()=>vg,serializerMiddleware:()=>hg,serializerMiddlewareOption:()=>yg});_g.exports=wk(fg);var mg=Gl((t,e)=>r=>async n=>{let{response:i}=await r(n);try{let o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let s="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+s,typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},"deserializerMiddleware"),hg=Gl((t,e)=>(r,n)=>async i=>{var o;let s=(o=n.endpointV2)!=null&&o.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let a=await e(i.input,{...t,endpoint:s});return r({...i,request:a})},"serializerMiddleware"),gg={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},yg={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function vg(t,e,r){return{applyToStack:n=>{n.add(mg(t,r),gg),n.add(hg(t,e),yg)}}}Gl(vg,"getSerdePlugin")});var Eg,wg,Sk,Sg=C(()=>{Eg=se(gn());Oa();wg={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Eg.serializerMiddlewareOption.name},Sk=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(jo(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),wg)}})});var Ng=C(()=>{Oa();pg();Sg()});var xg,Goe,bg,Nk,xk,Kl,Ql=C(()=>{xg=se(de()),Goe=se(Mt()),bg=se(Nt()),Nk=t=>e=>{throw e},xk=(t,e)=>{},Kl=t=>(e,r)=>async n=>{if(!xg.HttpRequest.isInstance(n.request))return e(n);let o=(0,bg.getSmithyContext)(r).selectedHttpAuthScheme;if(!o)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:s={}},identity:a,signer:d}=o,l=await e({...n,request:await d.sign(n.request,a,s)}).catch((d.errorHandler||Nk)(s));return(d.successHandler||xk)(l.response,s),l}});var Cg,bk,Og=C(()=>{Ql();Cg={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},bk=t=>({applyToStack:e=>{e.addRelativeTo(Kl(t),Cg)}})});var Rg=C(()=>{Ql();Og()});var Ur,Tg=C(()=>{Ur=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function Ag(t,e,r,n,i){return async function*(s,a,...d){let l=s.startingToken||void 0,u=!0,p;for(;u;){if(a[r]=l,i&&(a[i]=a[i]??s.pageSize),s.client instanceof t)p=await Ck(e,s.client,a,...d);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield p;let m=l;l=Ok(p,n),u=!!(l&&(!s.stopOnSameToken||l!==m))}return void 0}}var Ck,Ok,Pg=C(()=>{Ck=async(t,e,r,...n)=>await e.send(new t(r),...n);Ok=(t,e)=>{let r=t,n=e.split(".");for(let i of n){if(!r||typeof r!="object")return;r=r[i]}return r}});var Jl=v((nse,kg)=>{var Ta=Object.defineProperty,Rk=Object.getOwnPropertyDescriptor,Tk=Object.getOwnPropertyNames,Ak=Object.prototype.hasOwnProperty,Pk=(t,e)=>Ta(t,"name",{value:e,configurable:!0}),Ik=(t,e)=>{for(var r in e)Ta(t,r,{get:e[r],enumerable:!0})},kk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Tk(e))!Ak.call(t,i)&&i!==r&&Ta(t,i,{get:()=>e[i],enumerable:!(n=Rk(e,i))||n.enumerable});return t},Dk=t=>kk(Ta({},"__esModule",{value:!0}),t),Ig={};Ik(Ig,{isArrayBuffer:()=>qk});kg.exports=Dk(Ig);var qk=Pk(t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]","isArrayBuffer")});var ii=v((ise,Fg)=>{var Aa=Object.defineProperty,Fk=Object.getOwnPropertyDescriptor,Mk=Object.getOwnPropertyNames,Lk=Object.prototype.hasOwnProperty,Dg=(t,e)=>Aa(t,"name",{value:e,configurable:!0}),Wk=(t,e)=>{for(var r in e)Aa(t,r,{get:e[r],enumerable:!0})},Uk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Mk(e))!Lk.call(t,i)&&i!==r&&Aa(t,i,{get:()=>e[i],enumerable:!(n=Fk(e,i))||n.enumerable});return t},jk=t=>Uk(Aa({},"__esModule",{value:!0}),t),qg={};Wk(qg,{fromArrayBuffer:()=>Vk,fromString:()=>Bk});Fg.exports=jk(qg);var $k=Jl(),Yl=j("buffer"),Vk=Dg((t,e=0,r=t.byteLength-e)=>{if(!(0,$k.isArrayBuffer)(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Yl.Buffer.from(t,e,r)},"fromArrayBuffer"),Bk=Dg((t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Yl.Buffer.from(t,e):Yl.Buffer.from(t)},"fromString")});var Mg=v(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.fromBase64=void 0;var Hk=ii(),zk=/^[A-Za-z0-9+/]*={0,2}$/,Gk=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!zk.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,Hk.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};Pa.fromBase64=Gk});var tt=v((sse,jg)=>{var Ia=Object.defineProperty,Kk=Object.getOwnPropertyDescriptor,Qk=Object.getOwnPropertyNames,Jk=Object.prototype.hasOwnProperty,Xl=(t,e)=>Ia(t,"name",{value:e,configurable:!0}),Yk=(t,e)=>{for(var r in e)Ia(t,r,{get:e[r],enumerable:!0})},Xk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Qk(e))!Jk.call(t,i)&&i!==r&&Ia(t,i,{get:()=>e[i],enumerable:!(n=Kk(e,i))||n.enumerable});return t},Zk=t=>Xk(Ia({},"__esModule",{value:!0}),t),Lg={};Yk(Lg,{fromUtf8:()=>Ug,toUint8Array:()=>eD,toUtf8:()=>tD});jg.exports=Zk(Lg);var Wg=ii(),Ug=Xl(t=>{let e=(0,Wg.fromString)(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),eD=Xl(t=>typeof t=="string"?Ug(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),"toUint8Array"),tD=Xl(t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,Wg.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("utf8")},"toUtf8")});var $g=v(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.toBase64=void 0;var rD=ii(),nD=tt(),iD=t=>{let e;if(typeof t=="string"?e=(0,nD.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,rD.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};ka.toBase64=iD});var Lt=v((cse,Da)=>{var Vg=Object.defineProperty,oD=Object.getOwnPropertyDescriptor,sD=Object.getOwnPropertyNames,aD=Object.prototype.hasOwnProperty,Zl=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sD(e))!aD.call(t,i)&&i!==r&&Vg(t,i,{get:()=>e[i],enumerable:!(n=oD(e,i))||n.enumerable});return t},Bg=(t,e,r)=>(Zl(t,e,"default"),r&&Zl(r,e,"default")),cD=t=>Zl(Vg({},"__esModule",{value:!0}),t),eu={};Da.exports=cD(eu);Bg(eu,Mg(),Da.exports);Bg(eu,$g(),Da.exports)});var Hg=v(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.getAwsChunkedEncodingStream=void 0;var dD=j("stream"),lD=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:i,checksumLocationName:o,streamHasher:s}=e,a=r!==void 0&&i!==void 0&&o!==void 0&&s!==void 0,d=a?s(i,t):void 0,l=new dD.Readable({read:()=>{}});return t.on("data",u=>{let p=n(u)||0;l.push(`${p.toString(16)}\r
`),l.push(u),l.push(`\r
`)}),t.on("end",async()=>{if(l.push(`0\r
`),a){let u=r(await d);l.push(`${o}:${u}\r
`),l.push(`\r
`)}l.push(null)}),l};qa.getAwsChunkedEncodingStream=lD});var ru=v((lse,Kg)=>{var Fa=Object.defineProperty,uD=Object.getOwnPropertyDescriptor,pD=Object.getOwnPropertyNames,fD=Object.prototype.hasOwnProperty,tu=(t,e)=>Fa(t,"name",{value:e,configurable:!0}),mD=(t,e)=>{for(var r in e)Fa(t,r,{get:e[r],enumerable:!0})},hD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pD(e))!fD.call(t,i)&&i!==r&&Fa(t,i,{get:()=>e[i],enumerable:!(n=uD(e,i))||n.enumerable});return t},gD=t=>hD(Fa({},"__esModule",{value:!0}),t),zg={};mD(zg,{escapeUri:()=>Gg,escapeUriPath:()=>vD});Kg.exports=gD(zg);var Gg=tu(t=>encodeURIComponent(t).replace(/[!'()*]/g,yD),"escapeUri"),yD=tu(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),vD=tu(t=>t.split("/").map(Gg).join("/"),"escapeUriPath")});var iu=v((use,Yg)=>{var Ma=Object.defineProperty,_D=Object.getOwnPropertyDescriptor,ED=Object.getOwnPropertyNames,wD=Object.prototype.hasOwnProperty,SD=(t,e)=>Ma(t,"name",{value:e,configurable:!0}),ND=(t,e)=>{for(var r in e)Ma(t,r,{get:e[r],enumerable:!0})},xD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ED(e))!wD.call(t,i)&&i!==r&&Ma(t,i,{get:()=>e[i],enumerable:!(n=_D(e,i))||n.enumerable});return t},bD=t=>xD(Ma({},"__esModule",{value:!0}),t),Qg={};ND(Qg,{buildQueryString:()=>Jg});Yg.exports=bD(Qg);var nu=ru();function Jg(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=(0,nu.escapeUri)(r),Array.isArray(n))for(let i=0,o=n.length;i<o;i++)e.push(`${r}=${(0,nu.escapeUri)(n[i])}`);else{let i=r;(n||typeof n=="string")&&(i+=`=${(0,nu.escapeUri)(n)}`),e.push(i)}}return e.join("&")}SD(Jg,"buildQueryString")});var yn=v((hse,gy)=>{var CD=Object.create,$o=Object.defineProperty,OD=Object.getOwnPropertyDescriptor,RD=Object.getOwnPropertyNames,TD=Object.getPrototypeOf,AD=Object.prototype.hasOwnProperty,z=(t,e)=>$o(t,"name",{value:e,configurable:!0}),PD=(t,e)=>{for(var r in e)$o(t,r,{get:e[r],enumerable:!0})},ry=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RD(e))!AD.call(t,i)&&i!==r&&$o(t,i,{get:()=>e[i],enumerable:!(n=OD(e,i))||n.enumerable});return t},ID=(t,e,r)=>(r=t!=null?CD(TD(t)):{},ry(e||!t||!t.__esModule?$o(r,"default",{value:t,enumerable:!0}):r,t)),kD=t=>ry($o({},"__esModule",{value:!0}),t),ny={};PD(ny,{DEFAULT_REQUEST_TIMEOUT:()=>WD,NodeHttp2Handler:()=>BD,NodeHttpHandler:()=>UD,streamCollector:()=>zD});gy.exports=kD(ny);var iy=de(),oy=iu(),ou=j("http"),su=j("https"),DD=["ECONNRESET","EPIPE","ETIMEDOUT"],sy=z(t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},"getTransformedHeaders"),Qe={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},Xg=1e3,qD=z((t,e,r=0)=>{if(!r)return-1;let n=z(i=>{let o=Qe.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-i),s=z(a=>{a?.connecting?a.on("connect",()=>{Qe.clearTimeout(o)}):Qe.clearTimeout(o)},"doWithSocket");t.socket?s(t.socket):t.on("socket",s)},"registerTimeout");return r<2e3?(n(0),0):Qe.setTimeout(n.bind(null,Xg),Xg)},"setConnectionTimeout"),FD=3e3,MD=z((t,{keepAlive:e,keepAliveMsecs:r},n=FD)=>{if(e!==!0)return-1;let i=z(()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",o=>{o.setKeepAlive(e,r||0)})},"registerListener");return n===0?(i(),0):Qe.setTimeout(i,n)},"setSocketKeepAlive"),Zg=3e3,LD=z((t,e,r=0)=>{let n=z(i=>{let o=r-i,s=z(()=>{t.destroy(),e(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))},"onTimeout");t.socket?t.socket.setTimeout(o,s):t.setTimeout(o,s)},"registerTimeout");return 0<r&&r<6e3?(n(0),0):Qe.setTimeout(n.bind(null,r===0?0:Zg),Zg)},"setSocketTimeout"),ay=j("stream"),ey=1e3;async function cu(t,e,r=ey){let n=e.headers??{},i=n.Expect||n.expect,o=-1,s=!0;i==="100-continue"&&(s=await Promise.race([new Promise(a=>{o=Number(Qe.setTimeout(a,Math.max(ey,r)))}),new Promise(a=>{t.on("continue",()=>{Qe.clearTimeout(o),a(!0)}),t.on("response",()=>{Qe.clearTimeout(o),a(!1)}),t.on("error",()=>{Qe.clearTimeout(o),a(!1)})})])),s&&cy(t,e.body)}z(cu,"writeRequestBody");function cy(t,e){if(e instanceof ay.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}z(cy,"writeBody");var WD=0,dy=class au{constructor(e){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(i=>{r(this.resolveDefaultConfig(i))}).catch(n):r(this.resolveDefaultConfig(e))})}static create(e){return typeof e?.handle=="function"?e:new au(e)}static checkSocketUsage(e,r,n=console){var i,o,s;let{sockets:a,requests:d,maxSockets:l}=e;if(typeof l!="number"||l===1/0)return r;let u=15e3;if(Date.now()-u<r)return r;if(a&&d)for(let p in a){let m=((i=a[p])==null?void 0:i.length)??0,f=((o=d[p])==null?void 0:o.length)??0;if(m>=l&&f>=2*l)return(s=n?.warn)==null||s.call(n,`@smithy/node-http-handler:WARN - socket usage at capacity=${m} and ${f} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:i,httpAgent:o,httpsAgent:s}=e||{},a=!0,d=50;return{connectionTimeout:n,requestTimeout:r??i,httpAgent:(()=>o instanceof ou.Agent||typeof o?.destroy=="function"?o:new ou.Agent({keepAlive:a,maxSockets:d,...o}))(),httpsAgent:(()=>s instanceof su.Agent||typeof s?.destroy=="function"?s:new su.Agent({keepAlive:a,maxSockets:d,...s}))(),logger:console}}destroy(){var e,r,n,i;(r=(e=this.config)==null?void 0:e.httpAgent)==null||r.destroy(),(i=(n=this.config)==null?void 0:n.httpsAgent)==null||i.destroy()}async handle(e,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,i)=>{let o,s=[],a=z(async k=>{await o,s.forEach(Qe.clearTimeout),n(k)},"resolve"),d=z(async k=>{await o,s.forEach(Qe.clearTimeout),i(k)},"reject");if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let k=new Error("Request aborted");k.name="AbortError",d(k);return}let l=e.protocol==="https:",u=l?this.config.httpsAgent:this.config.httpAgent;s.push(Qe.setTimeout(()=>{this.socketWarningTimestamp=au.checkSocketUsage(u,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let p=(0,oy.buildQueryString)(e.query||{}),m;if(e.username!=null||e.password!=null){let k=e.username??"",D=e.password??"";m=`${k}:${D}`}let f=e.path;p&&(f+=`?${p}`),e.fragment&&(f+=`#${e.fragment}`);let y=e.hostname??"";y[0]==="["&&y.endsWith("]")?y=e.hostname.slice(1,-1):y=e.hostname;let S={headers:e.headers,host:y,method:e.method,path:f,port:e.port,agent:u,auth:m},x=(l?su.request:ou.request)(S,k=>{let D=new iy.HttpResponse({statusCode:k.statusCode||-1,reason:k.statusMessage,headers:sy(k.headers),body:k});a({response:D})});if(x.on("error",k=>{DD.includes(k.code)?d(Object.assign(k,{name:"TimeoutError"})):d(k)}),r){let k=z(()=>{x.destroy();let D=new Error("Request aborted");D.name="AbortError",d(D)},"onAbort");if(typeof r.addEventListener=="function"){let D=r;D.addEventListener("abort",k,{once:!0}),x.once("close",()=>D.removeEventListener("abort",k))}else r.onabort=k}s.push(qD(x,d,this.config.connectionTimeout)),s.push(LD(x,d,this.config.requestTimeout));let P=S.agent;typeof P=="object"&&"keepAlive"in P&&s.push(MD(x,{keepAlive:P.keepAlive,keepAliveMsecs:P.keepAliveMsecs})),o=cu(x,e,this.config.requestTimeout).catch(k=>(s.forEach(Qe.clearTimeout),i(k)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}};z(dy,"NodeHttpHandler");var UD=dy,ty=j("http2"),jD=ID(j("http2")),ly=class{constructor(e){this.sessions=[],this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}};z(ly,"NodeHttp2ConnectionPool");var $D=ly,uy=class{constructor(e){if(this.sessionCache=new Map,this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(e,r){let n=this.getUrlString(e),i=this.sessionCache.get(n);if(i){let d=i.poll();if(d&&!this.config.disableConcurrency)return d}let o=jD.default.connect(n);this.config.maxConcurrency&&o.settings({maxConcurrentStreams:this.config.maxConcurrency},d=>{if(d)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),o.unref();let s=z(()=>{o.destroy(),this.deleteSession(n,o)},"destroySessionCb");o.on("goaway",s),o.on("error",s),o.on("frameError",s),o.on("close",()=>this.deleteSession(n,o)),r.requestTimeout&&o.setTimeout(r.requestTimeout,s);let a=this.sessionCache.get(n)||new $D;return a.offerLast(o),this.sessionCache.set(n,a),o}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){var n;let i=this.getUrlString(e);(n=this.sessionCache.get(i))==null||n.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}};z(uy,"NodeHttp2ConnectionManager");var VD=uy,py=class fy{constructor(e){this.metadata={handlerProtocol:"h2"},this.connectionManager=new VD({}),this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(i=>{r(i||{})}).catch(n):r(e||{})})}static create(e){return typeof e?.handle=="function"?e:new fy(e)}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:n,disableConcurrentStreams:i}=this.config;return new Promise((o,s)=>{var a;let d=!1,l,u=z(async oe=>{await l,o(oe)},"resolve"),p=z(async oe=>{await l,s(oe)},"reject");if(r?.aborted){d=!0;let oe=new Error("Request aborted");oe.name="AbortError",p(oe);return}let{hostname:m,method:f,port:y,protocol:S,query:E}=e,x="";if(e.username!=null||e.password!=null){let oe=e.username??"",Et=e.password??"";x=`${oe}:${Et}@`}let P=`${S}//${x}${m}${y?`:${y}`:""}`,k={destination:new URL(P)},D=this.connectionManager.lease(k,{requestTimeout:(a=this.config)==null?void 0:a.sessionTimeout,disableConcurrentStreams:i||!1}),ie=z(oe=>{i&&this.destroySession(D),d=!0,p(oe)},"rejectWithDestroy"),De=(0,oy.buildQueryString)(E||{}),_t=e.path;De&&(_t+=`?${De}`),e.fragment&&(_t+=`#${e.fragment}`);let fe=D.request({...e.headers,[ty.constants.HTTP2_HEADER_PATH]:_t,[ty.constants.HTTP2_HEADER_METHOD]:f});if(D.ref(),fe.on("response",oe=>{let Et=new iy.HttpResponse({statusCode:oe[":status"]||-1,headers:sy(oe),body:fe});d=!0,u({response:Et}),i&&(D.close(),this.connectionManager.deleteSession(P,D))}),n&&fe.setTimeout(n,()=>{fe.close();let oe=new Error(`Stream timed out because of no activity for ${n} ms`);oe.name="TimeoutError",ie(oe)}),r){let oe=z(()=>{fe.close();let Et=new Error("Request aborted");Et.name="AbortError",ie(Et)},"onAbort");if(typeof r.addEventListener=="function"){let Et=r;Et.addEventListener("abort",oe,{once:!0}),fe.once("close",()=>Et.removeEventListener("abort",oe))}else r.onabort=oe}fe.on("frameError",(oe,Et,_P)=>{ie(new Error(`Frame type id ${oe} in stream id ${_P} has failed with code ${Et}.`))}),fe.on("error",ie),fe.on("aborted",()=>{ie(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${fe.rstCode}.`))}),fe.on("close",()=>{D.unref(),i&&D.destroy(),d||ie(new Error("Unexpected error: http2 request did not get a response"))}),l=cu(fe,e,n)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}};z(py,"NodeHttp2Handler");var BD=py,my=class extends ay.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(e,r,n){this.bufferedBytes.push(e),n()}};z(my,"Collector");var HD=my,zD=z(t=>GD(t)?hy(t):new Promise((e,r)=>{let n=new HD;t.pipe(n),t.on("error",i=>{n.end(),r(i)}),n.on("error",r),n.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.bufferedBytes));e(i)})}),"streamCollector"),GD=z(t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,"isReadableStreamInstance");async function hy(t){let e=[],r=t.getReader(),n=!1,i=0;for(;!n;){let{done:a,value:d}=await r.read();d&&(e.push(d),i+=d.length),n=a}let o=new Uint8Array(i),s=0;for(let a of e)o.set(a,s),s+=a.length;return o}z(hy,"collectReadableStream")});var Cy=v((gse,by)=>{var Wa=Object.defineProperty,KD=Object.getOwnPropertyDescriptor,QD=Object.getOwnPropertyNames,JD=Object.prototype.hasOwnProperty,Wt=(t,e)=>Wa(t,"name",{value:e,configurable:!0}),YD=(t,e)=>{for(var r in e)Wa(t,r,{get:e[r],enumerable:!0})},XD=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of QD(e))!JD.call(t,i)&&i!==r&&Wa(t,i,{get:()=>e[i],enumerable:!(n=KD(e,i))||n.enumerable});return t},ZD=t=>XD(Wa({},"__esModule",{value:!0}),t),vy={};YD(vy,{FetchHttpHandler:()=>tq,keepAliveSupport:()=>La,streamCollector:()=>nq});by.exports=ZD(vy);var yy=de(),eq=iu();function du(t,e){return new Request(t,e)}Wt(du,"createRequest");function _y(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}Wt(_y,"requestTimeout");var La={supported:void 0},Ey=class wy{static create(e){return typeof e?.handle=="function"?e:new wy(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),La.supported===void 0&&(La.supported=typeof Request<"u"&&"keepalive"in du("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r}={}){var n;this.config||(this.config=await this.configProvider);let i=this.config.requestTimeout,o=this.config.keepAlive===!0,s=this.config.credentials;if(r?.aborted){let P=new Error("Request aborted");return P.name="AbortError",Promise.reject(P)}let a=e.path,d=(0,eq.buildQueryString)(e.query||{});d&&(a+=`?${d}`),e.fragment&&(a+=`#${e.fragment}`);let l="";if(e.username!=null||e.password!=null){let P=e.username??"",k=e.password??"";l=`${P}:${k}@`}let{port:u,method:p}=e,m=`${e.protocol}//${l}${e.hostname}${u?`:${u}`:""}${a}`,f=p==="GET"||p==="HEAD"?void 0:e.body,y={body:f,headers:new Headers(e.headers),method:p,credentials:s};(n=this.config)!=null&&n.cache&&(y.cache=this.config.cache),f&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=r),La.supported&&(y.keepalive=o),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(e));let S=Wt(()=>{},"removeSignalEventListener"),E=du(m,y),x=[fetch(E).then(P=>{let k=P.headers,D={};for(let De of k.entries())D[De[0]]=De[1];return P.body!=null?{response:new yy.HttpResponse({headers:D,reason:P.statusText,statusCode:P.status,body:P.body})}:P.blob().then(De=>({response:new yy.HttpResponse({headers:D,reason:P.statusText,statusCode:P.status,body:De})}))}),_y(i)];return r&&x.push(new Promise((P,k)=>{let D=Wt(()=>{let ie=new Error("Request aborted");ie.name="AbortError",k(ie)},"onAbort");if(typeof r.addEventListener=="function"){let ie=r;ie.addEventListener("abort",D,{once:!0}),S=Wt(()=>ie.removeEventListener("abort",D),"removeSignalEventListener")}else r.onabort=D})),Promise.race(x).finally(S)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}};Wt(Ey,"FetchHttpHandler");var tq=Ey,rq=Lt(),nq=Wt(async t=>{var e;return typeof Blob=="function"&&t instanceof Blob||((e=t.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):Sy(t):Ny(t)},"streamCollector");async function Sy(t){let e=await xy(t),r=(0,rq.fromBase64)(e);return new Uint8Array(r)}Wt(Sy,"collectBlob");async function Ny(t){let e=[],r=t.getReader(),n=!1,i=0;for(;!n;){let{done:a,value:d}=await r.read();d&&(e.push(d),i+=d.length),n=a}let o=new Uint8Array(i),s=0;for(let a of e)o.set(a,s),s+=a.length;return o}Wt(Ny,"collectStream");function xy(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let i=n.result??"",o=i.indexOf(","),s=o>-1?o+1:i.length;e(i.substring(s))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}Wt(xy,"readToBase64")});var uu=v((yse,Iy)=>{var Ua=Object.defineProperty,iq=Object.getOwnPropertyDescriptor,oq=Object.getOwnPropertyNames,sq=Object.prototype.hasOwnProperty,Oy=(t,e)=>Ua(t,"name",{value:e,configurable:!0}),aq=(t,e)=>{for(var r in e)Ua(t,r,{get:e[r],enumerable:!0})},cq=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of oq(e))!sq.call(t,i)&&i!==r&&Ua(t,i,{get:()=>e[i],enumerable:!(n=iq(e,i))||n.enumerable});return t},dq=t=>cq(Ua({},"__esModule",{value:!0}),t),Ry={};aq(Ry,{fromHex:()=>Ay,toHex:()=>Py});Iy.exports=dq(Ry);var Ty={},lu={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),Ty[t]=e,lu[e]=t}function Ay(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in lu)e[r/2]=lu[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}Oy(Ay,"fromHex");function Py(t){let e="";for(let r=0;r<t.byteLength;r++)e+=Ty[t[r]];return e}Oy(Py,"toHex")});var vn=v(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.isBlob=oi.isReadableStream=void 0;var lq=t=>{var e;return typeof ReadableStream=="function"&&(((e=t?.constructor)===null||e===void 0?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)};oi.isReadableStream=lq;var uq=t=>{var e;return typeof Blob=="function"&&(((e=t?.constructor)===null||e===void 0?void 0:e.name)===Blob.name||t instanceof Blob)};oi.isBlob=uq});var Fy=v(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.sdkStreamMixin=void 0;var pq=Cy(),fq=Lt(),mq=uu(),hq=tt(),ky=vn(),Dy="The stream has already been transformed.",gq=t=>{var e,r;if(!qy(t)&&!(0,ky.isReadableStream)(t)){let s=((r=(e=t?.__proto__)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let n=!1,i=async()=>{if(n)throw new Error(Dy);return n=!0,await(0,pq.streamCollector)(t)},o=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:i,transformToString:async s=>{let a=await i();if(s==="base64")return(0,fq.toBase64)(a);if(s==="hex")return(0,mq.toHex)(a);if(s===void 0||s==="utf8"||s==="utf-8")return(0,hq.toUtf8)(a);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(n)throw new Error(Dy);if(n=!0,qy(t))return o(t);if((0,ky.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};ja.sdkStreamMixin=gq;var qy=t=>typeof Blob=="function"&&t instanceof Blob});var Ly=v($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.sdkStreamMixin=void 0;var yq=yn(),vq=ii(),pu=j("stream"),_q=Fy(),My="The stream has already been transformed.",Eq=t=>{var e,r;if(!(t instanceof pu.Readable))try{return(0,_q.sdkStreamMixin)(t)}catch{let s=((r=(e=t?.__proto__)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.name)||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let n=!1,i=async()=>{if(n)throw new Error(My);return n=!0,await(0,yq.streamCollector)(t)};return Object.assign(t,{transformToByteArray:i,transformToString:async o=>{let s=await i();return o===void 0||Buffer.isEncoding(o)?(0,vq.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(o):new TextDecoder(o).decode(s)},transformToWebStream:()=>{if(n)throw new Error(My);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof pu.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return n=!0,pu.Readable.toWeb(t)}})};$a.sdkStreamMixin=Eq});var Wy=v(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.splitStream=void 0;async function wq(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}Va.splitStream=wq});var $y=v(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.splitStream=void 0;var Uy=j("stream"),Sq=Wy(),jy=vn();async function Nq(t){if((0,jy.isReadableStream)(t)||(0,jy.isBlob)(t))return(0,Sq.splitStream)(t);let e=new Uy.PassThrough,r=new Uy.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}Ba.splitStream=Nq});var Vy=v(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.headStream=void 0;async function xq(t,e){var r;let n=0,i=[],o=t.getReader(),s=!1;for(;!s;){let{done:l,value:u}=await o.read();if(u&&(i.push(u),n+=(r=u?.byteLength)!==null&&r!==void 0?r:0),n>=e)break;s=l}o.releaseLock();let a=new Uint8Array(Math.min(e,n)),d=0;for(let l of i){if(l.byteLength>a.byteLength-d){a.set(l.subarray(0,a.byteLength-d),d);break}else a.set(l,d);d+=l.length}return a}Ha.headStream=xq});var By=v(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.headStream=void 0;var bq=j("stream"),Cq=Vy(),Oq=vn(),Rq=(t,e)=>(0,Oq.isReadableStream)(t)?(0,Cq.headStream)(t,e):new Promise((r,n)=>{let i=new fu;i.limit=e,t.pipe(i),t.on("error",o=>{i.end(),n(o)}),i.on("error",n),i.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.buffers));r(o)})});za.headStream=Rq;var fu=class extends bq.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(e,r,n){var i;if(this.buffers.push(e),this.bytesBuffered+=(i=e.byteLength)!==null&&i!==void 0?i:0,this.bytesBuffered>=this.limit){let o=this.bytesBuffered-this.limit,s=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=s.subarray(0,s.byteLength-o),this.emit("finish")}n()}}});var hu=v(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ChecksumStream=void 0;var Tq=Lt(),Aq=j("stream"),mu=class extends Aq.Duplex{constructor({expectedChecksum:e,checksum:r,source:n,checksumSourceLocation:i,base64Encoder:o}){var s,a;if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${(a=(s=n?.constructor)===null||s===void 0?void 0:s.name)!==null&&a!==void 0?a:n} in ChecksumStream.`);this.base64Encoder=o??Tq.toBase64,this.expectedChecksum=e,this.checksum=r,this.checksumSourceLocation=i,this.source.pipe(this)}_read(e){}_write(e,r,n){try{this.checksum.update(e),this.push(e)}catch(i){return n(i)}return n()}async _final(e){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return e(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return e(r)}return this.push(null),e()}};Ga.ChecksumStream=mu});var Hy=v(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.ChecksumStream=void 0;var Pq=typeof ReadableStream=="function"?ReadableStream:function(){},gu=class extends Pq{};Ka.ChecksumStream=gu});var zy=v(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.createChecksumStream=void 0;var Iq=Lt(),kq=vn(),Dq=Hy(),qq=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:i})=>{var o,s;if(!(0,kq.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${(s=(o=r?.constructor)===null||o===void 0?void 0:o.name)!==null&&s!==void 0?s:r} in ChecksumStream.`);let a=i??Iq.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let d=new TransformStream({start(){},async transform(u,p){e.update(u),p.enqueue(u)},async flush(u){let p=await e.digest(),m=a(p);if(t!==m){let f=new Error(`Checksum mismatch: expected "${t}" but received "${m}" in response header "${n}".`);u.error(f)}else u.terminate()}});r.pipeThrough(d);let l=d.readable;return Object.setPrototypeOf(l,Dq.ChecksumStream.prototype),l};Qa.createChecksumStream=qq});var Gy=v(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.createChecksumStream=void 0;var Fq=vn(),Mq=hu(),Lq=zy();function Wq(t){return typeof ReadableStream=="function"&&(0,Fq.isReadableStream)(t.source)?(0,Lq.createChecksumStream)(t):new Mq.ChecksumStream(t)}Ja.createChecksumStream=Wq});var Eu=v((Tse,cr)=>{var Ya=Object.defineProperty,Uq=Object.getOwnPropertyDescriptor,jq=Object.getOwnPropertyNames,$q=Object.prototype.hasOwnProperty,_u=(t,e)=>Ya(t,"name",{value:e,configurable:!0}),Vq=(t,e)=>{for(var r in e)Ya(t,r,{get:e[r],enumerable:!0})},yu=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jq(e))!$q.call(t,i)&&i!==r&&Ya(t,i,{get:()=>e[i],enumerable:!(n=Uq(e,i))||n.enumerable});return t},_n=(t,e,r)=>(yu(t,e,"default"),r&&yu(r,e,"default")),Bq=t=>yu(Ya({},"__esModule",{value:!0}),t),ar={};Vq(ar,{Uint8ArrayBlobAdapter:()=>vu});cr.exports=Bq(ar);var Ky=Lt(),Qy=tt();function Jy(t,e="utf-8"){return e==="base64"?(0,Ky.toBase64)(t):(0,Qy.toUtf8)(t)}_u(Jy,"transformToString");function Yy(t,e){return e==="base64"?vu.mutate((0,Ky.fromBase64)(t)):vu.mutate((0,Qy.fromUtf8)(t))}_u(Yy,"transformFromString");var Xy=class Zy extends Uint8Array{static fromString(e,r="utf-8"){switch(typeof e){case"string":return Yy(e,r);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,Zy.prototype),e}transformToString(e="utf-8"){return Jy(this,e)}};_u(Xy,"Uint8ArrayBlobAdapter");var vu=Xy;_n(ar,Hg(),cr.exports);_n(ar,Ly(),cr.exports);_n(ar,$y(),cr.exports);_n(ar,By(),cr.exports);_n(ar,vn(),cr.exports);_n(ar,Gy(),cr.exports);_n(ar,hu(),cr.exports)});var Xa,Hq,ev=C(()=>{Xa=se(Eu()),Hq=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Xa.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Xa.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Xa.Uint8ArrayBlobAdapter.mutate(await r)}});function Za(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var wu=C(()=>{});var Su,Nu=C(()=>{wu();Su=(t,e,r,n,i,o)=>{if(e!=null&&e[r]!==void 0){let s=n();if(s.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(i,o?s.split("/").map(a=>Za(a)).join("/"):Za(s))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function xu(t,e){return new ec(t,e)}var tv,ec,rv=C(()=>{tv=se(de());Nu();ec=class{constructor(e,r){this.input=e,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:e,protocol:r="https",port:n,path:i}=await this.context.endpoint();this.path=i;for(let o of this.resolvePathStack)o(this.path);return new tv.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,i){return this.resolvePathStack.push(o=>{this.path=Su(o,this.input,e,r,n,i)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});var nv={};Dn(nv,{RequestBuilder:()=>ec,collectBody:()=>Hq,extendedEncodeURIComponent:()=>Za,requestBuilder:()=>xu,resolvedPath:()=>Su});var bu=C(()=>{ev();wu();rv();Nu()});var iv=C(()=>{bu()});function zq(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var ov=C(()=>{});var Cu,sv=C(()=>{Cu=class{constructor(e){this.authSchemes=new Map;for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var av,Ou,Ru,cv=C(()=>{av=se(de()),Ou=se(Mt()),Ru=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let i=av.HttpRequest.clone(e);if(n.in===Ou.HttpApiKeyAuthLocation.QUERY)i.query[n.name]=r.apiKey;else if(n.in===Ou.HttpApiKeyAuthLocation.HEADER)i.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return i}}});var dv,Tu,lv=C(()=>{dv=se(de()),Tu=class{async sign(e,r,n){let i=dv.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return i.headers.Authorization=`Bearer ${r.token}`,i}}});var Au,uv=C(()=>{Au=class{async sign(e,r,n){return e}}});var pv=C(()=>{cv();lv();uv()});var fv,Gq,Pu,tc,Iu,mv=C(()=>{fv=t=>e=>tc(e)&&e.expiration.getTime()-Date.now()<t,Gq=3e5,Pu=fv(3e5),tc=t=>t.expiration!==void 0,Iu=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,i,o,s,a=!1,d=async l=>{o||(o=n(l));try{i=await o,s=!0,a=!1}finally{o=void 0}return i};return e===void 0?async l=>((!s||l?.forceRefresh)&&(i=await d(l)),i):async l=>((!s||l?.forceRefresh)&&(i=await d(l)),a?i:r(i)?(e(i)&&await d(l),i):(a=!0,i))}});var hv=C(()=>{sv();pv();mv()});var xt={};Dn(xt,{DefaultIdentityProviderConfig:()=>Cu,EXPIRATION_MS:()=>Gq,HttpApiKeyAuthSigner:()=>Ru,HttpBearerAuthSigner:()=>Tu,NoAuthSigner:()=>Au,createIsIdentityExpiredFunction:()=>fv,createPaginator:()=>Ag,doesIdentityRequireRefresh:()=>tc,getHttpAuthSchemeEndpointRuleSetPlugin:()=>hk,getHttpAuthSchemePlugin:()=>Sk,getHttpSigningPlugin:()=>bk,getSmithyContext:()=>ok,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>ug,httpAuthSchemeMiddleware:()=>jo,httpAuthSchemeMiddlewareOptions:()=>wg,httpSigningMiddleware:()=>Kl,httpSigningMiddlewareOptions:()=>Cg,isIdentityExpired:()=>Pu,memoizeIdentityProvider:()=>Iu,normalizeProvider:()=>Ur,requestBuilder:()=>xu,setFeature:()=>zq});var rt=C(()=>{og();Ng();Rg();Tg();Pg();iv();ov();hv()});var si=v((pae,Cv)=>{var rc=Object.defineProperty,Kq=Object.getOwnPropertyDescriptor,Qq=Object.getOwnPropertyNames,Jq=Object.prototype.hasOwnProperty,B=(t,e)=>rc(t,"name",{value:e,configurable:!0}),Yq=(t,e)=>{for(var r in e)rc(t,r,{get:e[r],enumerable:!0})},Xq=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Qq(e))!Jq.call(t,i)&&i!==r&&rc(t,i,{get:()=>e[i],enumerable:!(n=Kq(e,i))||n.enumerable});return t},Zq=t=>Xq(rc({},"__esModule",{value:!0}),t),gv={};Yq(gv,{EndpointCache:()=>eF,EndpointError:()=>Je,customEndpointFunctions:()=>Du,isIpAddress:()=>vv,isValidHostLabel:()=>Fu,resolveEndpoint:()=>_F});Cv.exports=Zq(gv);var yv=class{constructor({size:e,params:r}){this.data=new Map,this.parameters=[],this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let i=this.data.keys(),o=0;for(;;){let{value:s,done:a}=i.next();if(this.data.delete(s),a||++o>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let i of n){let o=String(e[i]??"");if(o.includes("|;"))return!1;r+=o+"|;"}return r}};B(yv,"EndpointCache");var eF=yv,tF=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),vv=B(t=>tF.test(t)||t.startsWith("[")&&t.endsWith("]"),"isIpAddress"),rF=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Fu=B((t,e=!1)=>{if(!e)return rF.test(t);let r=t.split(".");for(let n of r)if(!Fu(n))return!1;return!0},"isValidHostLabel"),Du={},Vo="endpoints";function dr(t){return typeof t!="object"||t==null?t:"ref"in t?`$${dr(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(dr).join(", ")})`:JSON.stringify(t,null,2)}B(dr,"toDebugString");var _v=class extends Error{constructor(e){super(e),this.name="EndpointError"}};B(_v,"EndpointError");var Je=_v,nF=B((t,e)=>t===e,"booleanEquals"),iF=B(t=>{let e=t.split("."),r=[];for(let n of e){let i=n.indexOf("[");if(i!==-1){if(n.indexOf("]")!==n.length-1)throw new Je(`Path: '${t}' does not end with ']'`);let o=n.slice(i+1,-1);if(Number.isNaN(parseInt(o)))throw new Je(`Invalid array index: '${o}' in path: '${t}'`);i!==0&&r.push(n.slice(0,i)),r.push(o)}else r.push(n)}return r},"getAttrPathList"),Ev=B((t,e)=>iF(e).reduce((r,n)=>{if(typeof r!="object")throw new Je(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),"getAttr"),oF=B(t=>t!=null,"isSet"),sF=B(t=>!t,"not"),qu=Mt(),ku={[qu.EndpointURLScheme.HTTP]:80,[qu.EndpointURLScheme.HTTPS]:443},aF=B(t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:f,protocol:y="",path:S="",query:E={}}=t,x=new URL(`${y}//${m}${f?`:${f}`:""}${S}`);return x.search=Object.entries(E).map(([P,k])=>`${P}=${k}`).join("&"),x}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:i,pathname:o,protocol:s,search:a}=e;if(a)return null;let d=s.slice(0,-1);if(!Object.values(qu.EndpointURLScheme).includes(d))return null;let l=vv(i),u=r.includes(`${n}:${ku[d]}`)||typeof t=="string"&&t.includes(`${n}:${ku[d]}`),p=`${n}${u?`:${ku[d]}`:""}`;return{scheme:d,authority:p,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:l}},"parseURL"),cF=B((t,e)=>t===e,"stringEquals"),dF=B((t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),"substring"),lF=B(t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),uF={booleanEquals:nF,getAttr:Ev,isSet:oF,isValidHostLabel:Fu,not:sF,parseURL:aF,stringEquals:cF,substring:dF,uriEncode:lF},wv=B((t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},i=0;for(;i<t.length;){let o=t.indexOf("{",i);if(o===-1){r.push(t.slice(i));break}r.push(t.slice(i,o));let s=t.indexOf("}",o);if(s===-1){r.push(t.slice(o));break}t[o+1]==="{"&&t[s+1]==="}"&&(r.push(t.slice(o+1,s)),i=s+2);let a=t.substring(o+1,s);if(a.includes("#")){let[d,l]=a.split("#");r.push(Ev(n[d],l))}else r.push(n[a]);i=s+1}return r.join("")},"evaluateTemplate"),pF=B(({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],"getReferenceValue"),nc=B((t,e,r)=>{if(typeof t=="string")return wv(t,r);if(t.fn)return Sv(t,r);if(t.ref)return pF(t,r);throw new Je(`'${e}': ${String(t)} is not a string, function or reference.`)},"evaluateExpression"),Sv=B(({fn:t,argv:e},r)=>{let n=e.map(o=>["boolean","number"].includes(typeof o)?o:nc(o,"arg",r)),i=t.split(".");return i[0]in Du&&i[1]!=null?Du[i[0]][i[1]](...n):uF[t](...n)},"callFunction"),fF=B(({assign:t,...e},r)=>{var n,i;if(t&&t in r.referenceRecord)throw new Je(`'${t}' is already defined in Reference Record.`);let o=Sv(e,r);return(i=(n=r.logger)==null?void 0:n.debug)==null||i.call(n,`${Vo} evaluateCondition: ${dr(e)} = ${dr(o)}`),{result:o===""?!0:!!o,...t!=null&&{toAssign:{name:t,value:o}}}},"evaluateCondition"),Mu=B((t=[],e)=>{var r,n;let i={};for(let o of t){let{result:s,toAssign:a}=fF(o,{...e,referenceRecord:{...e.referenceRecord,...i}});if(!s)return{result:s};a&&(i[a.name]=a.value,(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${Vo} assign: ${a.name} := ${dr(a.value)}`))}return{result:!0,referenceRecord:i}},"evaluateConditions"),mF=B((t,e)=>Object.entries(t).reduce((r,[n,i])=>({...r,[n]:i.map(o=>{let s=nc(o,"Header value entry",e);if(typeof s!="string")throw new Je(`Header '${n}' value '${s}' is not a string`);return s})}),{}),"getEndpointHeaders"),Nv=B((t,e)=>{if(Array.isArray(t))return t.map(r=>Nv(r,e));switch(typeof t){case"string":return wv(t,e);case"object":if(t===null)throw new Je(`Unexpected endpoint property: ${t}`);return xv(t,e);case"boolean":return t;default:throw new Je(`Unexpected endpoint property type: ${typeof t}`)}},"getEndpointProperty"),xv=B((t,e)=>Object.entries(t).reduce((r,[n,i])=>({...r,[n]:Nv(i,e)}),{}),"getEndpointProperties"),hF=B((t,e)=>{let r=nc(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Je(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl"),gF=B((t,e)=>{var r,n;let{conditions:i,endpoint:o}=t,{result:s,referenceRecord:a}=Mu(i,e);if(!s)return;let d={...e,referenceRecord:{...e.referenceRecord,...a}},{url:l,properties:u,headers:p}=o;return(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${Vo} Resolving endpoint from template: ${dr(o)}`),{...p!=null&&{headers:mF(p,d)},...u!=null&&{properties:xv(u,d)},url:hF(l,d)}},"evaluateEndpointRule"),yF=B((t,e)=>{let{conditions:r,error:n}=t,{result:i,referenceRecord:o}=Mu(r,e);if(i)throw new Je(nc(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...o}}))},"evaluateErrorRule"),vF=B((t,e)=>{let{conditions:r,rules:n}=t,{result:i,referenceRecord:o}=Mu(r,e);if(i)return bv(n,{...e,referenceRecord:{...e.referenceRecord,...o}})},"evaluateTreeRule"),bv=B((t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=gF(r,e);if(n)return n}else if(r.type==="error")yF(r,e);else if(r.type==="tree"){let n=vF(r,e);if(n)return n}else throw new Je(`Unknown endpoint rule: ${r}`);throw new Je("Rules evaluation failed")},"evaluateRules"),_F=B((t,e)=>{var r,n,i,o;let{endpointParams:s,logger:a}=e,{parameters:d,rules:l}=t;(n=(r=e.logger)==null?void 0:r.debug)==null||n.call(r,`${Vo} Initial EndpointParams: ${dr(s)}`);let u=Object.entries(d).filter(([,f])=>f.default!=null).map(([f,y])=>[f,y.default]);if(u.length>0)for(let[f,y]of u)s[f]=s[f]??y;let p=Object.entries(d).filter(([,f])=>f.required).map(([f])=>f);for(let f of p)if(s[f]==null)throw new Je(`Missing required parameter: '${f}'`);let m=bv(l,{endpointParams:s,logger:a,referenceRecord:{}});return(o=(i=e.logger)==null?void 0:i.debug)==null||o.call(i,`${Vo} Resolved endpoint: ${dr(m)}`),m},"resolveEndpoint")});var ci=v((fae,Fv)=>{"use strict";var ic=Object.defineProperty,EF=Object.getOwnPropertyDescriptor,wF=Object.getOwnPropertyNames,SF=Object.prototype.hasOwnProperty,ai=(t,e)=>ic(t,"name",{value:e,configurable:!0}),NF=(t,e)=>{for(var r in e)ic(t,r,{get:e[r],enumerable:!0})},xF=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of wF(e))!SF.call(t,i)&&i!==r&&ic(t,i,{get:()=>e[i],enumerable:!(n=EF(e,i))||n.enumerable});return t},bF=t=>xF(ic({},"__esModule",{value:!0}),t),Rv={};NF(Rv,{ConditionObject:()=>G.ConditionObject,DeprecatedObject:()=>G.DeprecatedObject,EndpointError:()=>G.EndpointError,EndpointObject:()=>G.EndpointObject,EndpointObjectHeaders:()=>G.EndpointObjectHeaders,EndpointObjectProperties:()=>G.EndpointObjectProperties,EndpointParams:()=>G.EndpointParams,EndpointResolverOptions:()=>G.EndpointResolverOptions,EndpointRuleObject:()=>G.EndpointRuleObject,ErrorRuleObject:()=>G.ErrorRuleObject,EvaluateOptions:()=>G.EvaluateOptions,Expression:()=>G.Expression,FunctionArgv:()=>G.FunctionArgv,FunctionObject:()=>G.FunctionObject,FunctionReturn:()=>G.FunctionReturn,ParameterObject:()=>G.ParameterObject,ReferenceObject:()=>G.ReferenceObject,ReferenceRecord:()=>G.ReferenceRecord,RuleSetObject:()=>G.RuleSetObject,RuleSetRules:()=>G.RuleSetRules,TreeRuleObject:()=>G.TreeRuleObject,awsEndpointFunctions:()=>qv,getUserAgentPrefix:()=>TF,isIpAddress:()=>G.isIpAddress,partition:()=>kv,resolveEndpoint:()=>G.resolveEndpoint,setPartitionInfo:()=>Dv,useDefaultPartitionInfo:()=>RF});Fv.exports=bF(Rv);var G=si(),Tv=ai((t,e=!1)=>{if(e){for(let r of t.split("."))if(!Tv(r))return!1;return!0}return!(!(0,G.isValidHostLabel)(t)||t.length<3||t.length>63||t!==t.toLowerCase()||(0,G.isIpAddress)(t))},"isVirtualHostableS3Bucket"),Ov=":",CF="/",OF=ai(t=>{let e=t.split(Ov);if(e.length<6)return null;let[r,n,i,o,s,...a]=e;if(r!=="arn"||n===""||i===""||a.join(Ov)==="")return null;let d=a.map(l=>l.split(CF)).flat();return{partition:n,service:i,region:o,accountId:s,resourceId:d}},"parseArn"),Av={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"},Pv=Av,Iv="",kv=ai(t=>{let{partitions:e}=Pv;for(let n of e){let{regions:i,outputs:o}=n;for(let[s,a]of Object.entries(i))if(s===t)return{...o,...a}}for(let n of e){let{regionRegex:i,outputs:o}=n;if(new RegExp(i).test(t))return{...o}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),Dv=ai((t,e="")=>{Pv=t,Iv=e},"setPartitionInfo"),RF=ai(()=>{Dv(Av,"")},"useDefaultPartitionInfo"),TF=ai(()=>Iv,"getUserAgentPrefix"),qv={isVirtualHostableS3Bucket:Tv,parseArn:OF,partition:kv};G.customEndpointFunctions.aws=qv});var oc,Mv,Lv=C(()=>{oc={warningEmitted:!1},Mv=t=>{t&&!oc.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<18&&(oc.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function sc(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Wv=C(()=>{});function Uv(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var jv=C(()=>{});var jr={};Dn(jr,{emitWarningIfUnsupportedVersion:()=>Mv,setCredentialFeature:()=>sc,setFeature:()=>Uv,state:()=>oc});var Ut=C(()=>{Lv();Wv();jv()});var $v,Lu,Vv=C(()=>{$v=se(de()),Lu=t=>$v.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var di,Wu=C(()=>{di=t=>new Date(Date.now()+t)});var Bv,Hv=C(()=>{Wu();Bv=(t,e)=>Math.abs(di(e).getTime()-t)>=3e5});var Uu,zv=C(()=>{Hv();Uu=(t,e)=>{let r=Date.parse(t);return Bv(r,e)?r-Date.now():e}});var ju=C(()=>{Vv();Wu();zv()});var Gv,Bo,Ho,En,Kv,$u=C(()=>{Gv=se(de());ju();Bo=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Ho=async t=>{let e=Bo("context",t.context),r=Bo("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],o=await Bo("signer",r.signer)(n),s=t?.signingRegion,a=t?.signingRegionSet,d=t?.signingName;return{config:r,signer:o,signingRegion:s,signingRegionSet:a,signingName:d}},En=class{async sign(e,r,n){if(!Gv.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let i=await Ho(n),{config:o,signer:s}=i,{signingRegion:a,signingName:d}=i,l=n.context;if(l?.authSchemes?.length??0>1){let[p,m]=l.authSchemes;p?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,d=m?.signingName??d)}return await s.sign(e,{signingDate:di(o.systemClockOffset),signingRegion:a,signingService:d})}errorHandler(e){return r=>{let n=r.ServerTime??Lu(r.$response);if(n){let i=Bo("config",e.config),o=i.systemClockOffset;i.systemClockOffset=Uu(n,i.systemClockOffset),i.systemClockOffset!==o&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=Lu(e);if(n){let i=Bo("config",r.config);i.systemClockOffset=Uu(n,i.systemClockOffset)}}},Kv=En});var Qv,ac,Jv=C(()=>{Qv=se(de());ju();$u();ac=class extends En{async sign(e,r,n){if(!Qv.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:i,signer:o,signingRegion:s,signingRegionSet:a,signingName:d}=await Ho(n),u=(await i.sigv4aSigningRegionSet?.()??a??[s]).join(",");return await o.sign(e,{signingDate:di(i.systemClockOffset),signingRegion:u,signingService:d})}}});var $e=v((qae,i_)=>{var cc=Object.defineProperty,AF=Object.getOwnPropertyDescriptor,PF=Object.getOwnPropertyNames,IF=Object.prototype.hasOwnProperty,wn=(t,e)=>cc(t,"name",{value:e,configurable:!0}),kF=(t,e)=>{for(var r in e)cc(t,r,{get:e[r],enumerable:!0})},DF=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PF(e))!IF.call(t,i)&&i!==r&&cc(t,i,{get:()=>e[i],enumerable:!(n=AF(e,i))||n.enumerable});return t},qF=t=>DF(cc({},"__esModule",{value:!0}),t),Yv={};kF(Yv,{CredentialsProviderError:()=>FF,ProviderError:()=>dc,TokenProviderError:()=>MF,chain:()=>LF,fromStatic:()=>WF,memoize:()=>UF});i_.exports=qF(Yv);var Xv=class Zv extends Error{constructor(e,r=!0){var n;let i,o=!0;typeof r=="boolean"?(i=void 0,o=r):r!=null&&typeof r=="object"&&(i=r.logger,o=r.tryNextLink??!0),super(e),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,Zv.prototype),(n=i?.debug)==null||n.call(i,`@smithy/property-provider ${o?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}};wn(Xv,"ProviderError");var dc=Xv,e_=class t_ extends dc{constructor(e,r=!0){super(e,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,t_.prototype)}};wn(e_,"CredentialsProviderError");var FF=e_,r_=class n_ extends dc{constructor(e,r=!0){super(e,r),this.name="TokenProviderError",Object.setPrototypeOf(this,n_.prototype)}};wn(r_,"TokenProviderError");var MF=r_,LF=wn((...t)=>async()=>{if(t.length===0)throw new dc("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},"chain"),WF=wn(t=>()=>Promise.resolve(t),"fromStatic"),UF=wn((t,e,r)=>{let n,i,o,s=!1,a=wn(async()=>{i||(i=t());try{n=await i,o=!0,s=!1}finally{i=void 0}return n},"coalesceProvider");return e===void 0?async d=>((!o||d?.forceRefresh)&&(n=await a()),n):async d=>((!o||d?.forceRefresh)&&(n=await a()),s?n:r&&!r(n)?(s=!0,n):(e(n)&&await a(),n))},"memoize")});var Vu,jF,$F,o_=C(()=>{rt();Vu=se($e()),jF=t=>(t.sigv4aSigningRegionSet=Ur(t.sigv4aSigningRegionSet),t),$F={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new Vu.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new Vu.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var C_=v((Uae,b_)=>{var hc=Object.defineProperty,VF=Object.getOwnPropertyDescriptor,BF=Object.getOwnPropertyNames,HF=Object.prototype.hasOwnProperty,we=(t,e)=>hc(t,"name",{value:e,configurable:!0}),zF=(t,e)=>{for(var r in e)hc(t,r,{get:e[r],enumerable:!0})},GF=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of BF(e))!HF.call(t,i)&&i!==r&&hc(t,i,{get:()=>e[i],enumerable:!(n=VF(e,i))||n.enumerable});return t},KF=t=>GF(hc({},"__esModule",{value:!0}),t),l_={};zF(l_,{SignatureV4:()=>EM,clearCredentialCache:()=>uM,createScope:()=>pc,getCanonicalHeaders:()=>Gu,getCanonicalQuery:()=>v_,getPayloadHash:()=>mc,getSigningKey:()=>y_,moveHeadersToQuery:()=>N_,prepareRequest:()=>Qu});b_.exports=KF(l_);var s_=Nt(),Bu=tt(),QF="X-Amz-Algorithm",JF="X-Amz-Credential",u_="X-Amz-Date",YF="X-Amz-SignedHeaders",XF="X-Amz-Expires",p_="X-Amz-Signature",f_="X-Amz-Security-Token",m_="authorization",h_=u_.toLowerCase(),ZF="date",eM=[m_,h_,ZF],tM=p_.toLowerCase(),zu="x-amz-content-sha256",rM=f_.toLowerCase(),nM={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},iM=/^proxy-/,oM=/^sec-/,Hu="AWS4-HMAC-SHA256",sM="AWS4-HMAC-SHA256-PAYLOAD",aM="UNSIGNED-PAYLOAD",cM=50,g_="aws4_request",dM=60*60*24*7,$r=uu(),lM=tt(),li={},uc=[],pc=we((t,e,r)=>`${t}/${e}/${r}/${g_}`,"createScope"),y_=we(async(t,e,r,n,i)=>{let o=await a_(t,e.secretAccessKey,e.accessKeyId),s=`${r}:${n}:${i}:${(0,$r.toHex)(o)}:${e.sessionToken}`;if(s in li)return li[s];for(uc.push(s);uc.length>cM;)delete li[uc.shift()];let a=`AWS4${e.secretAccessKey}`;for(let d of[r,n,i,g_])a=await a_(t,a,d);return li[s]=a},"getSigningKey"),uM=we(()=>{uc.length=0,Object.keys(li).forEach(t=>{delete li[t]})},"clearCredentialCache"),a_=we((t,e,r)=>{let n=new t(e);return n.update((0,lM.toUint8Array)(r)),n.digest()},"hmac"),Gu=we(({headers:t},e,r)=>{let n={};for(let i of Object.keys(t).sort()){if(t[i]==null)continue;let o=i.toLowerCase();(o in nM||e?.has(o)||iM.test(o)||oM.test(o))&&(!r||r&&!r.has(o))||(n[o]=t[i].trim().replace(/\s+/g," "))}return n},"getCanonicalHeaders"),fc=ru(),v_=we(({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===tM)continue;let i=(0,fc.escapeUri)(n);e.push(i);let o=t[n];typeof o=="string"?r[i]=`${i}=${(0,fc.escapeUri)(o)}`:Array.isArray(o)&&(r[i]=o.slice(0).reduce((s,a)=>s.concat([`${i}=${(0,fc.escapeUri)(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},"getCanonicalQuery"),pM=Jl(),fM=tt(),mc=we(async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===zu)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||(0,pM.isArrayBuffer)(e)){let n=new r;return n.update((0,fM.toUint8Array)(e)),(0,$r.toHex)(await n.digest())}return aM},"getPayloadHash"),c_=tt(),__=class{format(e){let r=[];for(let o of Object.keys(e)){let s=(0,c_.fromUtf8)(o);r.push(Uint8Array.from([s.byteLength]),s,this.formatHeaderValue(e[o]))}let n=new Uint8Array(r.reduce((o,s)=>o+s.byteLength,0)),i=0;for(let o of r)n.set(o,i),i+=o.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let i=new Uint8Array(9);return i[0]=5,i.set(e.value.bytes,1),i;case"binary":let o=new DataView(new ArrayBuffer(3+e.value.byteLength));o.setUint8(0,6),o.setUint16(1,e.value.byteLength,!1);let s=new Uint8Array(o.buffer);return s.set(e.value,3),s;case"string":let a=(0,c_.fromUtf8)(e.value),d=new DataView(new ArrayBuffer(3+a.byteLength));d.setUint8(0,7),d.setUint16(1,a.byteLength,!1);let l=new Uint8Array(d.buffer);return l.set(a,3),l;case"timestamp":let u=new Uint8Array(9);return u[0]=8,u.set(gM.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!hM.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let p=new Uint8Array(17);return p[0]=9,p.set((0,$r.fromHex)(e.value.replace(/\-/g,"")),1),p}}};we(__,"HeaderFormatter");var mM=__,hM=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,E_=class w_{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,i=Math.abs(Math.round(e));n>-1&&i>0;n--,i/=256)r[n]=i;return e<0&&Ku(r),new w_(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&Ku(e),parseInt((0,$r.toHex)(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};we(E_,"Int64");var gM=E_;function Ku(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}we(Ku,"negate");var yM=we((t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},"hasHeader"),S_=de(),N_=we((t,e={})=>{var r,n;let{headers:i,query:o={}}=S_.HttpRequest.clone(t);for(let s of Object.keys(i)){let a=s.toLowerCase();(a.slice(0,6)==="x-amz-"&&!((r=e.unhoistableHeaders)!=null&&r.has(a))||(n=e.hoistableHeaders)!=null&&n.has(a))&&(o[s]=i[s],delete i[s])}return{...t,headers:i,query:o}},"moveHeadersToQuery"),Qu=we(t=>{t=S_.HttpRequest.clone(t);for(let e of Object.keys(t.headers))eM.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},"prepareRequest"),vM=we(t=>_M(t).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),_M=we(t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,"toDate"),x_=class{constructor({applyChecksum:e,credentials:r,region:n,service:i,sha256:o,uriEscapePath:s=!0}){this.headerFormatter=new mM,this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=(0,s_.normalizeProvider)(n),this.credentialProvider=(0,s_.normalizeProvider)(r)}async presign(e,r={}){let{signingDate:n=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:s,signableHeaders:a,hoistableHeaders:d,signingRegion:l,signingService:u}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);let m=l??await this.regionProvider(),{longDate:f,shortDate:y}=lc(n);if(i>dM)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let S=pc(y,m,u??this.service),E=N_(Qu(e),{unhoistableHeaders:s,hoistableHeaders:d});p.sessionToken&&(E.query[f_]=p.sessionToken),E.query[QF]=Hu,E.query[JF]=`${p.accessKeyId}/${S}`,E.query[u_]=f,E.query[XF]=i.toString(10);let x=Gu(E,o,a);return E.query[YF]=d_(x),E.query[p_]=await this.getSignature(f,S,this.getSigningKey(p,m,y,u),this.createCanonicalRequest(E,x,await mc(e,this.sha256))),E}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:i,signingRegion:o,signingService:s}){let a=o??await this.regionProvider(),{shortDate:d,longDate:l}=lc(n),u=pc(d,a,s??this.service),p=await mc({headers:{},body:r},this.sha256),m=new this.sha256;m.update(e);let f=(0,$r.toHex)(await m.digest()),y=[sM,l,u,i,f,p].join(`
`);return this.signString(y,{signingDate:n,signingRegion:a,signingService:s})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:i,priorSignature:e.priorSignature}).then(s=>({message:e.message,signature:s}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let s=n??await this.regionProvider(),{shortDate:a}=lc(r),d=new this.sha256(await this.getSigningKey(o,s,a,i));return d.update((0,Bu.toUint8Array)(e)),(0,$r.toHex)(await d.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:i,signingRegion:o,signingService:s}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let d=o??await this.regionProvider(),l=Qu(e),{longDate:u,shortDate:p}=lc(r),m=pc(p,d,s??this.service);l.headers[h_]=u,a.sessionToken&&(l.headers[rM]=a.sessionToken);let f=await mc(l,this.sha256);!yM(zu,l.headers)&&this.applyChecksum&&(l.headers[zu]=f);let y=Gu(l,i,n),S=await this.getSignature(u,m,this.getSigningKey(a,d,p,s),this.createCanonicalRequest(l,y,f));return l.headers[m_]=`${Hu} Credential=${a.accessKeyId}/${m}, SignedHeaders=${d_(y)}, Signature=${S}`,l}createCanonicalRequest(e,r,n){let i=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${v_(e)}
${i.map(o=>`${o}:${r[o]}`).join(`
`)}

${i.join(";")}
${n}`}async createStringToSign(e,r,n){let i=new this.sha256;i.update((0,Bu.toUint8Array)(n));let o=await i.digest();return`${Hu}
${e}
${r}
${(0,$r.toHex)(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let o of e.split("/"))o?.length!==0&&o!=="."&&(o===".."?r.pop():r.push(o));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return(0,fc.escapeUri)(n).replace(/%2F/g,"/")}return e}async getSignature(e,r,n,i){let o=await this.createStringToSign(e,r,i),s=new this.sha256(await n);return s.update((0,Bu.toUint8Array)(o)),(0,$r.toHex)(await s.digest())}getSigningKey(e,r,n,i){return y_(this.sha256,e,n,r,i||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};we(x_,"SignatureV4");var EM=x_,lc=we(t=>{let e=vM(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},"formatDate"),d_=we(t=>Object.keys(t).sort().join(";"),"getCanonicalHeaderList")});var Ju,O_,wM,R_=C(()=>{Ut();rt();Ju=se(C_()),O_=t=>{let e=!1,r;t.credentials&&(e=!0,r=Iu(t.credentials,Pu,tc)),r||(t.credentialDefaultProvider?r=Ur(t.credentialDefaultProvider(Object.assign({},t,{parentClientConfig:t}))):r=async()=>{throw new Error("`credentials` is missing")});let{signingEscapePath:n=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t,s;return t.signer?s=Ur(t.signer):t.regionInfoProvider?s=()=>Ur(t.region)().then(async a=>[await t.regionInfoProvider(a,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},a]).then(([a,d])=>{let{signingRegion:l,signingService:u}=a;t.signingRegion=t.signingRegion||l||d,t.signingName=t.signingName||u||t.serviceId;let p={...t,credentials:r,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},m=t.signerConstructor||Ju.SignatureV4;return new m(p)}):s=async a=>{a=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Ur(t.region)(),properties:{}},a);let d=a.signingRegion,l=a.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||l||t.serviceId;let u={...t,credentials:r,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:n},p=t.signerConstructor||Ju.SignatureV4;return new p(u)},{...t,systemClockOffset:i,signingEscapePath:n,credentials:e?async()=>r().then(a=>sc(a,"CREDENTIALS_CODE","e")):r,signer:s}},wM=O_});var T_=C(()=>{$u();Jv();o_();R_()});var A_=C(()=>{T_()});var SM,NM,xM,P_=C(()=>{SM=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},NM=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},xM=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var F_=v((Xae,q_)=>{var gc=Object.defineProperty,bM=Object.getOwnPropertyDescriptor,CM=Object.getOwnPropertyNames,OM=Object.prototype.hasOwnProperty,at=(t,e)=>gc(t,"name",{value:e,configurable:!0}),RM=(t,e)=>{for(var r in e)gc(t,r,{get:e[r],enumerable:!0})},TM=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of CM(e))!OM.call(t,i)&&i!==r&&gc(t,i,{get:()=>e[i],enumerable:!(n=bM(e,i))||n.enumerable});return t},AM=t=>TM(gc({},"__esModule",{value:!0}),t),D_={};RM(D_,{constructStack:()=>Yu});q_.exports=AM(D_);var Sn=at((t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},"getAllAliases"),Vr=at((t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,"getMiddlewareNameWithAliases"),Yu=at(()=>{let t=[],e=[],r=!1,n=new Set,i=at(p=>p.sort((m,f)=>I_[f.step]-I_[m.step]||k_[f.priority||"normal"]-k_[m.priority||"normal"]),"sort"),o=at(p=>{let m=!1,f=at(y=>{let S=Sn(y.name,y.aliases);if(S.includes(p)){m=!0;for(let E of S)n.delete(E);return!1}return!0},"filterCb");return t=t.filter(f),e=e.filter(f),m},"removeByName"),s=at(p=>{let m=!1,f=at(y=>{if(y.middleware===p){m=!0;for(let S of Sn(y.name,y.aliases))n.delete(S);return!1}return!0},"filterCb");return t=t.filter(f),e=e.filter(f),m},"removeByReference"),a=at(p=>{var m;return t.forEach(f=>{p.add(f.middleware,{...f})}),e.forEach(f=>{p.addRelativeTo(f.middleware,{...f})}),(m=p.identifyOnResolve)==null||m.call(p,u.identifyOnResolve()),p},"cloneTo"),d=at(p=>{let m=[];return p.before.forEach(f=>{f.before.length===0&&f.after.length===0?m.push(f):m.push(...d(f))}),m.push(p),p.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?m.push(f):m.push(...d(f))}),m},"expandRelativeMiddlewareList"),l=at((p=!1)=>{let m=[],f=[],y={};return t.forEach(E=>{let x={...E,before:[],after:[]};for(let P of Sn(x.name,x.aliases))y[P]=x;m.push(x)}),e.forEach(E=>{let x={...E,before:[],after:[]};for(let P of Sn(x.name,x.aliases))y[P]=x;f.push(x)}),f.forEach(E=>{if(E.toMiddleware){let x=y[E.toMiddleware];if(x===void 0){if(p)return;throw new Error(`${E.toMiddleware} is not found when adding ${Vr(E.name,E.aliases)} middleware ${E.relation} ${E.toMiddleware}`)}E.relation==="after"&&x.after.push(E),E.relation==="before"&&x.before.push(E)}}),i(m).map(d).reduce((E,x)=>(E.push(...x),E),[])},"getMiddlewareList"),u={add:(p,m={})=>{let{name:f,override:y,aliases:S}=m,E={step:"initialize",priority:"normal",middleware:p,...m},x=Sn(f,S);if(x.length>0){if(x.some(P=>n.has(P))){if(!y)throw new Error(`Duplicate middleware name '${Vr(f,S)}'`);for(let P of x){let k=t.findIndex(ie=>{var De;return ie.name===P||((De=ie.aliases)==null?void 0:De.some(_t=>_t===P))});if(k===-1)continue;let D=t[k];if(D.step!==E.step||E.priority!==D.priority)throw new Error(`"${Vr(D.name,D.aliases)}" middleware with ${D.priority} priority in ${D.step} step cannot be overridden by "${Vr(f,S)}" middleware with ${E.priority} priority in ${E.step} step.`);t.splice(k,1)}}for(let P of x)n.add(P)}t.push(E)},addRelativeTo:(p,m)=>{let{name:f,override:y,aliases:S}=m,E={middleware:p,...m},x=Sn(f,S);if(x.length>0){if(x.some(P=>n.has(P))){if(!y)throw new Error(`Duplicate middleware name '${Vr(f,S)}'`);for(let P of x){let k=e.findIndex(ie=>{var De;return ie.name===P||((De=ie.aliases)==null?void 0:De.some(_t=>_t===P))});if(k===-1)continue;let D=e[k];if(D.toMiddleware!==E.toMiddleware||D.relation!==E.relation)throw new Error(`"${Vr(D.name,D.aliases)}" middleware ${D.relation} "${D.toMiddleware}" middleware cannot be overridden by "${Vr(f,S)}" middleware ${E.relation} "${E.toMiddleware}" middleware.`);e.splice(k,1)}}for(let P of x)n.add(P)}e.push(E)},clone:()=>a(Yu()),use:p=>{p.applyToStack(u)},remove:p=>typeof p=="string"?o(p):s(p),removeByTag:p=>{let m=!1,f=at(y=>{let{tags:S,name:E,aliases:x}=y;if(S&&S.includes(p)){let P=Sn(E,x);for(let k of P)n.delete(k);return m=!0,!1}return!0},"filterCb");return t=t.filter(f),e=e.filter(f),m},concat:p=>{var m;let f=a(Yu());return f.use(p),f.identifyOnResolve(r||f.identifyOnResolve()||(((m=p.identifyOnResolve)==null?void 0:m.call(p))??!1)),f},applyToStack:a,identify:()=>l(!0).map(p=>{let m=p.step??p.relation+" "+p.toMiddleware;return Vr(p.name,p.aliases)+" - "+m}),identifyOnResolve(p){return typeof p=="boolean"&&(r=p),r},resolve:(p,m)=>{for(let f of l().map(y=>y.middleware).reverse())p=f(p,m);return r&&console.log(u.identify()),p}};return u},"constructStack"),I_={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},k_={high:3,normal:2,low:1}});var Y=v((nce,sE)=>{var _c=Object.defineProperty,PM=Object.getOwnPropertyDescriptor,IM=Object.getOwnPropertyNames,kM=Object.prototype.hasOwnProperty,N=(t,e)=>_c(t,"name",{value:e,configurable:!0}),DM=(t,e)=>{for(var r in e)_c(t,r,{get:e[r],enumerable:!0})},qM=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of IM(e))!kM.call(t,i)&&i!==r&&_c(t,i,{get:()=>e[i],enumerable:!(n=PM(e,i))||n.enumerable});return t},FM=t=>qM(_c({},"__esModule",{value:!0}),t),L_={};DM(L_,{Client:()=>MM,Command:()=>$_,LazyJsonString:()=>Nn,NoOpLogger:()=>kL,SENSITIVE_STRING:()=>WM,ServiceException:()=>EL,_json:()=>ip,collectBody:()=>Xu.collectBody,convertMap:()=>DL,createAggregatedClient:()=>UM,dateToUtcString:()=>Q_,decorateServiceException:()=>X_,emitWarningIfUnsupportedVersion:()=>xL,expectBoolean:()=>$M,expectByte:()=>np,expectFloat32:()=>yc,expectInt:()=>BM,expectInt32:()=>tp,expectLong:()=>Ko,expectNonNull:()=>zM,expectNumber:()=>Go,expectObject:()=>B_,expectShort:()=>rp,expectString:()=>GM,expectUnion:()=>KM,extendedEncodeURIComponent:()=>Xu.extendedEncodeURIComponent,getArrayIfSingleItem:()=>PL,getDefaultClientConfiguration:()=>TL,getDefaultExtensionConfiguration:()=>eE,getValueFromTextNode:()=>tE,handleFloat:()=>YM,isSerializableHeaderValue:()=>IL,limitedParseDouble:()=>ap,limitedParseFloat:()=>XM,limitedParseFloat32:()=>ZM,loadConfigsForDefaultMode:()=>NL,logger:()=>Qo,map:()=>dp,parseBoolean:()=>jM,parseEpochTimestamp:()=>uL,parseRfc3339DateTime:()=>iL,parseRfc3339DateTimeWithOffset:()=>sL,parseRfc7231DateTime:()=>lL,quoteHeader:()=>iE,resolveDefaultRuntimeConfig:()=>AL,resolvedPath:()=>Xu.resolvedPath,serializeDateTime:()=>UL,serializeFloat:()=>WL,splitEvery:()=>oE,splitHeader:()=>jL,strictParseByte:()=>K_,strictParseDouble:()=>sp,strictParseFloat:()=>QM,strictParseFloat32:()=>H_,strictParseInt:()=>eL,strictParseInt32:()=>tL,strictParseLong:()=>G_,strictParseShort:()=>ui,take:()=>qL,throwDefaultError:()=>Z_,withBaseException:()=>wL});sE.exports=FM(L_);var W_=F_(),U_=class{constructor(e){this.config=e,this.middlewareStack=(0,W_.constructStack)()}send(e,r,n){let i=typeof r!="function"?r:void 0,o=typeof r=="function"?r:n,s=i===void 0&&this.config.cacheMiddleware===!0,a;if(s){this.handlers||(this.handlers=new WeakMap);let d=this.handlers;d.has(e.constructor)?a=d.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,i),d.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,i);if(o)a(e).then(d=>o(null,d.output),d=>o(d)).catch(()=>{});else return a(e).then(d=>d.output)}destroy(){var e,r,n;(n=(r=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:r.destroy)==null||n.call(r),delete this.handlers}};N(U_,"Client");var MM=U_,Xu=(bu(),F(nv)),ep=Mt(),j_=class{constructor(){this.middlewareStack=(0,W_.constructStack)()}static classBuilder(){return new LM}resolveMiddlewareWithContext(e,r,n,{middlewareFn:i,clientName:o,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,smithyContext:l,additionalContext:u,CommandCtor:p}){for(let E of i.bind(this)(p,e,r,n))this.middlewareStack.use(E);let m=e.concat(this.middlewareStack),{logger:f}=r,y={logger:f,clientName:o,commandName:s,inputFilterSensitiveLog:a,outputFilterSensitiveLog:d,[ep.SMITHY_CONTEXT_KEY]:{commandInstance:this,...l},...u},{requestHandler:S}=r;return m.resolve(E=>S.handle(E.request,n||{}),y)}};N(j_,"Command");var $_=j_,V_=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){var e;let r=this,n;return n=(e=class extends $_{constructor(...[i]){super(),this.serialize=r._serializer,this.deserialize=r._deserializer,this.input=i??{},r._init(this)}static getEndpointParameterInstructions(){return r._ep}resolveMiddleware(i,o,s){return this.resolveMiddlewareWithContext(i,o,s,{CommandCtor:n,middlewareFn:r._middlewareFn,clientName:r._clientName,commandName:r._commandName,inputFilterSensitiveLog:r._inputFilterSensitiveLog,outputFilterSensitiveLog:r._outputFilterSensitiveLog,smithyContext:r._smithyContext,additionalContext:r._additionalContext})}},N(e,"CommandRef"),e)}};N(V_,"ClassBuilder");var LM=V_,WM="***SensitiveInformation***",UM=N((t,e)=>{for(let r of Object.keys(t)){let n=t[r],i=N(async function(s,a,d){let l=new n(s);if(typeof a=="function")this.send(l,a);else if(typeof d=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(l,a||{},d)}else return this.send(l,a)},"methodImpl"),o=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[o]=i}},"createAggregatedClient"),jM=N(t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},"parseBoolean"),$M=N(t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&Qo.warn(vc(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&Qo.warn(vc(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},"expectBoolean"),Go=N(t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Qo.warn(vc(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},"expectNumber"),VM=Math.ceil(2**127*(2-2**-23)),yc=N(t=>{let e=Go(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>VM)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},"expectFloat32"),Ko=N(t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},"expectLong"),BM=Ko,tp=N(t=>op(t,32),"expectInt32"),rp=N(t=>op(t,16),"expectShort"),np=N(t=>op(t,8),"expectByte"),op=N((t,e)=>{let r=Ko(t);if(r!==void 0&&HM(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},"expectSizedInt"),HM=N((t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},"castInt"),zM=N((t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},"expectNonNull"),B_=N(t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},"expectObject"),GM=N(t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return Qo.warn(vc(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},"expectString"),KM=N(t=>{if(t==null)return;let e=B_(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},"expectUnion"),sp=N(t=>Go(typeof t=="string"?fi(t):t),"strictParseDouble"),QM=sp,H_=N(t=>yc(typeof t=="string"?fi(t):t),"strictParseFloat32"),JM=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,fi=N(t=>{let e=t.match(JM);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},"parseNumber"),ap=N(t=>typeof t=="string"?z_(t):Go(t),"limitedParseDouble"),YM=ap,XM=ap,ZM=N(t=>typeof t=="string"?z_(t):yc(t),"limitedParseFloat32"),z_=N(t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},"parseFloatString"),G_=N(t=>Ko(typeof t=="string"?fi(t):t),"strictParseLong"),eL=G_,tL=N(t=>tp(typeof t=="string"?fi(t):t),"strictParseInt32"),ui=N(t=>rp(typeof t=="string"?fi(t):t),"strictParseShort"),K_=N(t=>np(typeof t=="string"?fi(t):t),"strictParseByte"),vc=N(t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),Qo={warn:console.warn},rL=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Q_(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),i=t.getUTCDate(),o=t.getUTCHours(),s=t.getUTCMinutes(),a=t.getUTCSeconds(),d=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,u=s<10?`0${s}`:`${s}`,p=a<10?`0${a}`:`${a}`;return`${rL[n]}, ${d} ${cp[r]} ${e} ${l}:${u}:${p} GMT`}N(Q_,"dateToUtcString");var nL=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),iL=N(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=nL.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,s,a,d,l]=e,u=ui(pi(n)),p=jt(i,"month",1,12),m=jt(o,"day",1,31);return zo(u,p,m,{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l})},"parseRfc3339DateTime"),oL=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),sL=N(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=oL.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,i,o,s,a,d,l,u]=e,p=ui(pi(n)),m=jt(i,"month",1,12),f=jt(o,"day",1,31),y=zo(p,m,f,{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l});return u.toUpperCase()!="Z"&&y.setTime(y.getTime()-_L(u)),y},"parseRfc3339DateTimeWithOffset"),aL=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),cL=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),dL=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),lL=N(t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=aL.exec(t);if(e){let[r,n,i,o,s,a,d,l]=e;return zo(ui(pi(o)),Zu(i),jt(n,"day",1,31),{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l})}if(e=cL.exec(t),e){let[r,n,i,o,s,a,d,l]=e;return mL(zo(pL(o),Zu(i),jt(n,"day",1,31),{hours:s,minutes:a,seconds:d,fractionalMilliseconds:l}))}if(e=dL.exec(t),e){let[r,n,i,o,s,a,d,l]=e;return zo(ui(pi(l)),Zu(n),jt(i.trimLeft(),"day",1,31),{hours:o,minutes:s,seconds:a,fractionalMilliseconds:d})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),uL=N(t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=sp(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},"parseEpochTimestamp"),zo=N((t,e,r,n)=>{let i=e-1;return gL(t,i,r),new Date(Date.UTC(t,i,r,jt(n.hours,"hour",0,23),jt(n.minutes,"minute",0,59),jt(n.seconds,"seconds",0,60),vL(n.fractionalMilliseconds)))},"buildDate"),pL=N(t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+ui(pi(t));return r<e?r+100:r},"parseTwoDigitYear"),fL=50*365*24*60*60*1e3,mL=N(t=>t.getTime()-new Date().getTime()>fL?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,"adjustRfc850Year"),Zu=N(t=>{let e=cp.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},"parseMonthByShortName"),hL=[31,28,31,30,31,30,31,31,30,31,30,31],gL=N((t,e,r)=>{let n=hL[e];if(e===1&&yL(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${cp[e]} in ${t}: ${r}`)},"validateDayOfMonth"),yL=N(t=>t%4===0&&(t%100!==0||t%400===0),"isLeapYear"),jt=N((t,e,r,n)=>{let i=K_(pi(t));if(i<r||i>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return i},"parseDateValue"),vL=N(t=>t==null?0:H_("0."+t)*1e3,"parseMilliseconds"),_L=N(t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),i=Number(t.substring(4,6));return r*(n*60+i)*60*1e3},"parseOffsetToMilliseconds"),pi=N(t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},"stripLeadingZeroes"),J_=class Y_ extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Y_.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;let r=e;return!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}};N(J_,"ServiceException");var EL=J_,X_=N((t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,i])=>{(t[n]==null||t[n]==="")&&(t[n]=i)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},"decorateServiceException"),Z_=N(({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let i=SL(t),o=i.httpStatusCode?i.httpStatusCode+"":void 0,s=new r({name:e?.code||e?.Code||n||o||"UnknownError",$fault:"client",$metadata:i});throw X_(s,e)},"throwDefaultError"),wL=N(t=>({output:e,parsedBody:r,errorCode:n})=>{Z_({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},"withBaseException"),SL=N(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),NL=N(t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),M_=!1,xL=N(t=>{t&&!M_&&parseInt(t.substring(1,t.indexOf(".")))<16&&(M_=!0)},"emitWarningIfUnsupportedVersion"),bL=N(t=>{let e=[];for(let r in ep.AlgorithmId){let n=ep.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},"getChecksumConfiguration"),CL=N(t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},"resolveChecksumRuntimeConfig"),OL=N(t=>{let e=t.retryStrategy;return{setRetryStrategy(r){e=r},retryStrategy(){return e}}},"getRetryConfiguration"),RL=N(t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},"resolveRetryRuntimeConfig"),eE=N(t=>({...bL(t),...OL(t)}),"getDefaultExtensionConfiguration"),TL=eE,AL=N(t=>({...CL(t),...RL(t)}),"resolveDefaultRuntimeConfig"),PL=N(t=>Array.isArray(t)?t:[t],"getArrayIfSingleItem"),tE=N(t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=tE(t[r]));return t},"getValueFromTextNode"),IL=N(t=>t!=null,"isSerializableHeaderValue"),Nn=N(function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})},"LazyJsonString");Nn.from=t=>t&&typeof t=="object"&&(t instanceof Nn||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Nn(String(t)):Nn(JSON.stringify(t));Nn.fromObject=Nn.from;var rE=class{trace(){}debug(){}info(){}warn(){}error(){}};N(rE,"NoOpLogger");var kL=rE;function dp(t,e,r){let n,i,o;if(typeof e>"u"&&typeof r>"u")n={},o=t;else{if(n=t,typeof e=="function")return i=e,o=r,FL(n,i,o);o=e}for(let s of Object.keys(o)){if(!Array.isArray(o[s])){n[s]=o[s];continue}nE(n,null,o,s)}return n}N(dp,"map");var DL=N(t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},"convertMap"),qL=N((t,e)=>{let r={};for(let n in e)nE(r,t,e,n);return r},"take"),FL=N((t,e,r)=>dp(t,Object.entries(r).reduce((n,[i,o])=>(Array.isArray(o)?n[i]=o:typeof o=="function"?n[i]=[e,o()]:n[i]=[e,o],n),{})),"mapWithFilter"),nE=N((t,e,r,n)=>{if(e!==null){let s=r[n];typeof s=="function"&&(s=[,s]);let[a=ML,d=LL,l=n]=s;(typeof a=="function"&&a(e[l])||typeof a!="function"&&a)&&(t[n]=d(e[l]));return}let[i,o]=r[n];if(typeof o=="function"){let s,a=i===void 0&&(s=o())!=null,d=typeof i=="function"&&!!i(void 0)||typeof i!="function"&&!!i;a?t[n]=s:d&&(t[n]=o())}else{let s=i===void 0&&o!=null,a=typeof i=="function"&&!!i(o)||typeof i!="function"&&!!i;(s||a)&&(t[n]=o)}},"applyInstruction"),ML=N(t=>t!=null,"nonNullish"),LL=N(t=>t,"pass");function iE(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}N(iE,"quoteHeader");var WL=N(t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},"serializeFloat"),UL=N(t=>t.toISOString().replace(".000Z","Z"),"serializeDateTime"),ip=N(t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(ip);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=ip(t[r]));return e}return t},"_json");function oE(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let i=[],o="";for(let s=0;s<n.length;s++)o===""?o=n[s]:o+=e+n[s],(s+1)%r===0&&(i.push(o),o="");return o!==""&&i.push(o),i}N(oE,"splitEvery");var jL=N(t=>{let e=t.length,r=[],n=!1,i,o=0;for(let s=0;s<e;++s){let a=t[s];switch(a){case'"':i!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(o,s)),o=s+1);break;default:}i=a}return r.push(t.slice(o)),r.map(s=>{s=s.trim();let a=s.length;return a<2?s:(s[0]==='"'&&s[a-1]==='"'&&(s=s.slice(1,a-1)),s.replace(/\\"/g,'"'))})},"splitHeader")});var aE,$L,cE=C(()=>{aE=se(Y()),$L=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,aE.expectUnion)(t)}});var dE,Ec,lp=C(()=>{dE=se(Y()),Ec=(t,e)=>(0,dE.collectBody)(t,e).then(r=>e.utf8Encoder(r))});var lE,VL,BL,uE=C(()=>{lp();lE=(t,e)=>Ec(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),VL=async(t,e)=>{let r=await lE(t,e);return r.message=r.message??r.Message,r},BL=(t,e)=>{let r=(o,s)=>Object.keys(o).find(a=>a.toLowerCase()===s.toLowerCase()),n=o=>{let s=o;return typeof s=="number"&&(s=s.toString()),s.indexOf(",")>=0&&(s=s.split(",")[0]),s.indexOf(":")>=0&&(s=s.split(":")[0]),s.indexOf("#")>=0&&(s=s.split("#")[1]),s},i=r(t.headers,"x-amzn-errortype");if(i!==void 0)return n(t.headers[i]);if(e.code!==void 0)return n(e.code);if(e.__type!==void 0)return n(e.__type)}});var wc=v(lr=>{"use strict";var pE=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",HL=pE+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",fE="["+pE+"]["+HL+"]*",zL=new RegExp("^"+fE+"$"),GL=function(t,e){let r=[],n=e.exec(t);for(;n;){let i=[];i.startIndex=e.lastIndex-n[0].length;let o=n.length;for(let s=0;s<o;s++)i.push(n[s]);r.push(i),n=e.exec(t)}return r},KL=function(t){let e=zL.exec(t);return!(e===null||typeof e>"u")};lr.isExist=function(t){return typeof t<"u"};lr.isEmptyObject=function(t){return Object.keys(t).length===0};lr.merge=function(t,e,r){if(e){let n=Object.keys(e),i=n.length;for(let o=0;o<i;o++)r==="strict"?t[n[o]]=[e[n[o]]]:t[n[o]]=e[n[o]]}};lr.getValue=function(t){return lr.isExist(t)?t:""};lr.isName=KL;lr.getAllMatches=GL;lr.nameRegexp=fE});var pp=v(vE=>{"use strict";var up=wc(),QL={allowBooleanAttributes:!1,unpairedTags:[]};vE.validate=function(t,e){e=Object.assign({},QL,e);let r=[],n=!1,i=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let o=0;o<t.length;o++)if(t[o]==="<"&&t[o+1]==="?"){if(o+=2,o=hE(t,o),o.err)return o}else if(t[o]==="<"){let s=o;if(o++,t[o]==="!"){o=gE(t,o);continue}else{let a=!1;t[o]==="/"&&(a=!0,o++);let d="";for(;o<t.length&&t[o]!==">"&&t[o]!==" "&&t[o]!=="	"&&t[o]!==`
`&&t[o]!=="\r";o++)d+=t[o];if(d=d.trim(),d[d.length-1]==="/"&&(d=d.substring(0,d.length-1),o--),!n1(d)){let p;return d.trim().length===0?p="Invalid space after '<'.":p="Tag '"+d+"' is an invalid name.",pe("InvalidTag",p,Ve(t,o))}let l=XL(t,o);if(l===!1)return pe("InvalidAttr","Attributes for '"+d+"' have open quote.",Ve(t,o));let u=l.value;if(o=l.index,u[u.length-1]==="/"){let p=o-u.length;u=u.substring(0,u.length-1);let m=yE(u,e);if(m===!0)n=!0;else return pe(m.err.code,m.err.msg,Ve(t,p+m.err.line))}else if(a)if(l.tagClosed){if(u.trim().length>0)return pe("InvalidTag","Closing tag '"+d+"' can't have attributes or invalid starting.",Ve(t,s));if(r.length===0)return pe("InvalidTag","Closing tag '"+d+"' has not been opened.",Ve(t,s));{let p=r.pop();if(d!==p.tagName){let m=Ve(t,p.tagStartPos);return pe("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+m.line+", col "+m.col+") instead of closing tag '"+d+"'.",Ve(t,s))}r.length==0&&(i=!0)}}else return pe("InvalidTag","Closing tag '"+d+"' doesn't have proper closing.",Ve(t,o));else{let p=yE(u,e);if(p!==!0)return pe(p.err.code,p.err.msg,Ve(t,o-u.length+p.err.line));if(i===!0)return pe("InvalidXml","Multiple possible root nodes found.",Ve(t,o));e.unpairedTags.indexOf(d)!==-1||r.push({tagName:d,tagStartPos:s}),n=!0}for(o++;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="!"){o++,o=gE(t,o);continue}else if(t[o+1]==="?"){if(o=hE(t,++o),o.err)return o}else break;else if(t[o]==="&"){let p=t1(t,o);if(p==-1)return pe("InvalidChar","char '&' is not expected.",Ve(t,o));o=p}else if(i===!0&&!mE(t[o]))return pe("InvalidXml","Extra text at the end",Ve(t,o));t[o]==="<"&&o--}}else{if(mE(t[o]))continue;return pe("InvalidChar","char '"+t[o]+"' is not expected.",Ve(t,o))}if(n){if(r.length==1)return pe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Ve(t,r[0].tagStartPos));if(r.length>0)return pe("InvalidXml","Invalid '"+JSON.stringify(r.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return pe("InvalidXml","Start tag expected.",1);return!0};function mE(t){return t===" "||t==="	"||t===`
`||t==="\r"}function hE(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let n=t.substr(r,e-r);if(e>5&&n==="xml")return pe("InvalidXml","XML declaration allowed only at the start of the document.",Ve(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function gE(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var JL='"',YL="'";function XL(t,e){let r="",n="",i=!1;for(;e<t.length;e++){if(t[e]===JL||t[e]===YL)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){i=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:i}}var ZL=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function yE(t,e){let r=up.getAllMatches(t,ZL),n={};for(let i=0;i<r.length;i++){if(r[i][1].length===0)return pe("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",Jo(r[i]));if(r[i][3]!==void 0&&r[i][4]===void 0)return pe("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",Jo(r[i]));if(r[i][3]===void 0&&!e.allowBooleanAttributes)return pe("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",Jo(r[i]));let o=r[i][2];if(!r1(o))return pe("InvalidAttr","Attribute '"+o+"' is an invalid name.",Jo(r[i]));if(!n.hasOwnProperty(o))n[o]=1;else return pe("InvalidAttr","Attribute '"+o+"' is repeated.",Jo(r[i]))}return!0}function e1(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function t1(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,e1(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function pe(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function r1(t){return up.isName(t)}function n1(t){return up.isName(t)}function Ve(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Jo(t){return t.startIndex+t[1].length}});var EE=v(fp=>{var _E={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},i1=function(t){return Object.assign({},_E,t)};fp.buildOptions=i1;fp.defaultOptions=_E});var SE=v((pce,wE)=>{"use strict";var mp=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};wE.exports=mp});var xE=v((fce,NE)=>{var o1=wc();function s1(t,e){let r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,i=!1,o=!1,s="";for(;e<t.length;e++)if(t[e]==="<"&&!o){if(i&&d1(t,e))e+=7,[entityName,val,e]=a1(t,e+1),val.indexOf("&")===-1&&(r[f1(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(i&&l1(t,e))e+=8;else if(i&&u1(t,e))e+=8;else if(i&&p1(t,e))e+=9;else if(c1)o=!0;else throw new Error("Invalid DOCTYPE");n++,s=""}else if(t[e]===">"){if(o?t[e-1]==="-"&&t[e-2]==="-"&&(o=!1,n--):n--,n===0)break}else t[e]==="["?i=!0:s+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function a1(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=t[e++],i="";for(;e<t.length&&t[e]!==n;e++)i+=t[e];return[r,i,e]}function c1(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function d1(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function l1(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function u1(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function p1(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function f1(t){if(o1.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}NE.exports=s1});var CE=v((mce,bE)=>{var m1=/^[-+]?0x[a-fA-F0-9]+$/,h1=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,g1={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function y1(t,e={}){if(e=Object.assign({},g1,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(t==="0")return 0;if(e.hex&&m1.test(r))return _1(r,16);if(r.search(/[eE]/)!==-1){let n=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(e.leadingZeros)r=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return t;return e.eNotation?Number(r):t}else return t}else{let n=h1.exec(r);if(n){let i=n[1],o=n[2],s=v1(n[3]);if(!e.leadingZeros&&o.length>0&&i&&r[2]!==".")return t;if(!e.leadingZeros&&o.length>0&&!i&&r[1]!==".")return t;if(e.leadingZeros&&o===t)return 0;{let a=Number(r),d=""+a;return d.search(/[eE]/)!==-1?e.eNotation?a:t:r.indexOf(".")!==-1?d==="0"&&s===""||d===s||i&&d==="-"+s?a:t:o?s===d||i+s===d?a:t:r===d||r===i+d?a:t}}else return t}}function v1(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}function _1(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}bE.exports=y1});var TE=v((hce,RE)=>{"use strict";var OE=wc(),Yo=SE(),E1=xE(),w1=CE(),hp=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=S1,this.parseXml=O1,this.parseTextData=N1,this.resolveNameSpace=x1,this.buildAttributesMap=C1,this.isItStopNode=P1,this.replaceEntitiesValue=T1,this.readStopNodeData=k1,this.saveTextToParentTag=A1,this.addChild=R1}};function S1(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function N1(t,e,r,n,i,o,s){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));let a=this.options.tagValueProcessor(e,t,r,i,o);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?yp(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?yp(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function x1(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var b1=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function C1(t,e,r){if(!this.options.ignoreAttributes&&typeof t=="string"){let n=OE.getAllMatches(t,b1),i=n.length,o={};for(let s=0;s<i;s++){let a=this.resolveNameSpace(n[s][1]),d=n[s][4],l=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),d!==void 0){this.options.trimValues&&(d=d.trim()),d=this.replaceEntitiesValue(d);let u=this.options.attributeValueProcessor(a,d,e);u==null?o[l]=d:typeof u!=typeof d||u!==d?o[l]=u:o[l]=yp(d,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[l]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=o,s}return o}}var O1=function(t){t=t.replace(/\r\n?/g,`
`);let e=new Yo("!xml"),r=e,n="",i="";for(let o=0;o<t.length;o++)if(t[o]==="<")if(t[o+1]==="/"){let a=xn(t,">",o,"Closing Tag is not closed."),d=t.substring(o+2,a).trim();if(this.options.removeNSPrefix){let p=d.indexOf(":");p!==-1&&(d=d.substr(p+1))}this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&(n=this.saveTextToParentTag(n,r,i));let l=i.substring(i.lastIndexOf(".")+1);if(d&&this.options.unpairedTags.indexOf(d)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${d}>`);let u=0;l&&this.options.unpairedTags.indexOf(l)!==-1?(u=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=i.lastIndexOf("."),i=i.substring(0,u),r=this.tagsNodeStack.pop(),n="",o=a}else if(t[o+1]==="?"){let a=gp(t,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,i),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let d=new Yo(a.tagName);d.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(d[":@"]=this.buildAttributesMap(a.tagExp,i,a.tagName)),this.addChild(r,d,i)}o=a.closeIndex+1}else if(t.substr(o+1,3)==="!--"){let a=xn(t,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){let d=t.substring(o+4,a-2);n=this.saveTextToParentTag(n,r,i),r.add(this.options.commentPropName,[{[this.options.textNodeName]:d}])}o=a}else if(t.substr(o+1,2)==="!D"){let a=E1(t,o);this.docTypeEntities=a.entities,o=a.i}else if(t.substr(o+1,2)==="!["){let a=xn(t,"]]>",o,"CDATA is not closed.")-2,d=t.substring(o+9,a);n=this.saveTextToParentTag(n,r,i);let l=this.parseTextData(d,r.tagname,i,!0,!1,!0,!0);l==null&&(l=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:d}]):r.add(this.options.textNodeName,l),o=a+2}else{let a=gp(t,o,this.options.removeNSPrefix),d=a.tagName,l=a.rawTagName,u=a.tagExp,p=a.attrExpPresent,m=a.closeIndex;this.options.transformTagName&&(d=this.options.transformTagName(d)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,i,!1));let f=r;if(f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),d!==e.tagname&&(i+=i?"."+d:d),this.isItStopNode(this.options.stopNodes,i,d)){let y="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)d[d.length-1]==="/"?(d=d.substr(0,d.length-1),i=i.substr(0,i.length-1),u=d):u=u.substr(0,u.length-1),o=a.closeIndex;else if(this.options.unpairedTags.indexOf(d)!==-1)o=a.closeIndex;else{let E=this.readStopNodeData(t,l,m+1);if(!E)throw new Error(`Unexpected end of ${l}`);o=E.i,y=E.tagContent}let S=new Yo(d);d!==u&&p&&(S[":@"]=this.buildAttributesMap(u,i,d)),y&&(y=this.parseTextData(y,d,i,!0,p,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),S.add(this.options.textNodeName,y),this.addChild(r,S,i)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),i=i.substr(0,i.length-1),u=d):u=u.substr(0,u.length-1),this.options.transformTagName&&(d=this.options.transformTagName(d));let y=new Yo(d);d!==u&&p&&(y[":@"]=this.buildAttributesMap(u,i,d)),this.addChild(r,y,i),i=i.substr(0,i.lastIndexOf("."))}else{let y=new Yo(d);this.tagsNodeStack.push(r),d!==u&&p&&(y[":@"]=this.buildAttributesMap(u,i,d)),this.addChild(r,y,i),r=y}n="",o=m}}else n+=t[o];return e.child};function R1(t,e,r){let n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e))}var T1=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){let r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){let r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){let r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function A1(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function P1(t,e,r){let n="*."+r;for(let i in t){let o=t[i];if(n===o||e===o)return!0}return!1}function I1(t,e,r=">"){let n,i="";for(let o=e;o<t.length;o++){let s=t[o];if(n)s===n&&(n="");else if(s==='"'||s==="'")n=s;else if(s===r[0])if(r[1]){if(t[o+1]===r[1])return{data:i,index:o}}else return{data:i,index:o};else s==="	"&&(s=" ");i+=s}}function xn(t,e,r,n){let i=t.indexOf(e,r);if(i===-1)throw new Error(n);return i+e.length-1}function gp(t,e,r,n=">"){let i=I1(t,e+1,n);if(!i)return;let o=i.data,s=i.index,a=o.search(/\s/),d=o,l=!0;a!==-1&&(d=o.substring(0,a),o=o.substring(a+1).trimStart());let u=d;if(r){let p=d.indexOf(":");p!==-1&&(d=d.substr(p+1),l=d!==i.data.substr(p+1))}return{tagName:d,tagExp:o,closeIndex:s,attrExpPresent:l,rawTagName:u}}function k1(t,e,r){let n=r,i=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let o=xn(t,">",r,`${e} is not closed`);if(t.substring(r+2,o).trim()===e&&(i--,i===0))return{tagContent:t.substring(n,r),i:o};r=o}else if(t[r+1]==="?")r=xn(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=xn(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=xn(t,"]]>",r,"StopNode is not closed.")-2;else{let o=gp(t,r,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&i++,r=o.closeIndex)}}function yp(t,e,r){if(e&&typeof t=="string"){let n=t.trim();return n==="true"?!0:n==="false"?!1:w1(t,r)}else return OE.isExist(t)?t:""}RE.exports=hp});var IE=v(PE=>{"use strict";function D1(t,e){return AE(t,e)}function AE(t,e,r){let n,i={};for(let o=0;o<t.length;o++){let s=t[o],a=q1(s),d="";if(r===void 0?d=a:d=r+"."+a,a===e.textNodeName)n===void 0?n=s[a]:n+=""+s[a];else{if(a===void 0)continue;if(s[a]){let l=AE(s[a],e,d),u=M1(l,e);s[":@"]?F1(l,s[":@"],d,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),i[a]!==void 0&&i.hasOwnProperty(a)?(Array.isArray(i[a])||(i[a]=[i[a]]),i[a].push(l)):e.isArray(a,d,u)?i[a]=[l]:i[a]=l}}}return typeof n=="string"?n.length>0&&(i[e.textNodeName]=n):n!==void 0&&(i[e.textNodeName]=n),i}function q1(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(n!==":@")return n}}function F1(t,e,r,n){if(e){let i=Object.keys(e),o=i.length;for(let s=0;s<o;s++){let a=i[s];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function M1(t,e){let{textNodeName:r}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}PE.prettify=D1});var DE=v((yce,kE)=>{var{buildOptions:L1}=EE(),W1=TE(),{prettify:U1}=IE(),j1=pp(),vp=class{constructor(e){this.externalEntities={},this.options=L1(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let o=j1.validate(e,r);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}let n=new W1(this.options);n.addExternalEntities(this.externalEntities);let i=n.parseXml(e);return this.options.preserveOrder||i===void 0?i:U1(i,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};kE.exports=vp});var WE=v((vce,LE)=>{var $1=`
`;function V1(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=$1),FE(t,e,"",r)}function FE(t,e,r,n){let i="",o=!1;for(let s=0;s<t.length;s++){let a=t[s],d=B1(a);if(d===void 0)continue;let l="";if(r.length===0?l=d:l=`${r}.${d}`,d===e.textNodeName){let y=a[d];H1(l,e)||(y=e.tagValueProcessor(d,y),y=ME(y,e)),o&&(i+=n),i+=y,o=!1;continue}else if(d===e.cdataPropName){o&&(i+=n),i+=`<![CDATA[${a[d][0][e.textNodeName]}]]>`,o=!1;continue}else if(d===e.commentPropName){i+=n+`<!--${a[d][0][e.textNodeName]}-->`,o=!0;continue}else if(d[0]==="?"){let y=qE(a[":@"],e),S=d==="?xml"?"":n,E=a[d][0][e.textNodeName];E=E.length!==0?" "+E:"",i+=S+`<${d}${E}${y}?>`,o=!0;continue}let u=n;u!==""&&(u+=e.indentBy);let p=qE(a[":@"],e),m=n+`<${d}${p}`,f=FE(a[d],e,l,u);e.unpairedTags.indexOf(d)!==-1?e.suppressUnpairedNode?i+=m+">":i+=m+"/>":(!f||f.length===0)&&e.suppressEmptyNode?i+=m+"/>":f&&f.endsWith(">")?i+=m+`>${f}${n}</${d}>`:(i+=m+">",f&&n!==""&&(f.includes("/>")||f.includes("</"))?i+=n+e.indentBy+f+n:i+=f,i+=`</${d}>`),o=!0}return i}function B1(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function qE(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let i=e.attributeValueProcessor(n,t[n]);i=ME(i,e),i===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${i}"`}return r}function H1(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function ME(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let n=e.entities[r];t=t.replace(n.regex,n.val)}return t}LE.exports=V1});var jE=v((_ce,UE)=>{"use strict";var z1=WE(),G1={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Br(t){this.options=Object.assign({},G1,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=J1),this.processTextOrObjNode=K1,this.options.format?(this.indentate=Q1,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Br.prototype.build=function(t){return this.options.preserveOrder?z1(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Br.prototype.j2x=function(t,e){let r="",n="";for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i))if(typeof t[i]>"u")this.isAttribute(i)&&(n+="");else if(t[i]===null)this.isAttribute(i)?n+="":i[0]==="?"?n+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)n+=this.buildTextValNode(t[i],i,"",e);else if(typeof t[i]!="object"){let o=this.isAttribute(i);if(o)r+=this.buildAttrPairStr(o,""+t[i]);else if(i===this.options.textNodeName){let s=this.options.tagValueProcessor(i,""+t[i]);n+=this.replaceEntitiesValue(s)}else n+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){let o=t[i].length,s="",a="";for(let d=0;d<o;d++){let l=t[i][d];if(!(typeof l>"u"))if(l===null)i[0]==="?"?n+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(typeof l=="object")if(this.options.oneListGroup){let u=this.j2x(l,e+1);s+=u.val,this.options.attributesGroupName&&l.hasOwnProperty(this.options.attributesGroupName)&&(a+=u.attrStr)}else s+=this.processTextOrObjNode(l,i,e);else if(this.options.oneListGroup){let u=this.options.tagValueProcessor(i,l);u=this.replaceEntitiesValue(u),s+=u}else s+=this.buildTextValNode(l,i,"",e)}this.options.oneListGroup&&(s=this.buildObjectNode(s,i,a,e)),n+=s}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){let o=Object.keys(t[i]),s=o.length;for(let a=0;a<s;a++)r+=this.buildAttrPairStr(o[a],""+t[i][o[a]])}else n+=this.processTextOrObjNode(t[i],i,e);return{attrStr:r,val:n}};Br.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function K1(t,e,r){let n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Br.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let i="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",i=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+o+">"+t+i:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+o+this.tagEndChar+t+this.indentate(n)+i}};Br.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Br.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let i=this.options.tagValueProcessor(e,t);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+i+"</"+e+this.tagEndChar}};Br.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function Q1(t){return this.options.indentBy.repeat(t)}function J1(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}UE.exports=Br});var VE=v((Ece,$E)=>{"use strict";var Y1=pp(),X1=DE(),Z1=jE();$E.exports={XMLParser:X1,XMLValidator:Y1,XMLBuilder:Z1}});var BE,HE,zE,eW,tW,GE=C(()=>{BE=se(Y()),HE=se(VE());lp();zE=(t,e)=>Ec(t,e).then(r=>{if(r.length){let n=new HE.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(d,l)=>l.trim()===""&&l.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let i;try{i=n.parse(r,!0)}catch(d){throw d&&typeof d=="object"&&Object.defineProperty(d,"$responseBodyText",{value:r}),d}let o="#text",s=Object.keys(i)[0],a=i[s];return a[o]&&(a[s]=a[o],delete a[o]),(0,BE.getValueFromTextNode)(a)}return{}}),eW=async(t,e)=>{let r=await zE(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},tW=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var KE=C(()=>{P_();cE();uE();GE()});var Se={};Dn(Se,{AWSSDKSigV4Signer:()=>Kv,AwsSdkSigV4ASigner:()=>ac,AwsSdkSigV4Signer:()=>En,NODE_SIGV4A_CONFIG_OPTIONS:()=>$F,_toBool:()=>NM,_toNum:()=>xM,_toStr:()=>SM,awsExpectUnion:()=>$L,emitWarningIfUnsupportedVersion:()=>Mv,loadRestJsonErrorCode:()=>BL,loadRestXmlErrorCode:()=>tW,parseJsonBody:()=>lE,parseJsonErrorBody:()=>VL,parseXmlBody:()=>zE,parseXmlErrorBody:()=>eW,resolveAWSSDKSigV4Config:()=>wM,resolveAwsSdkSigV4AConfig:()=>jF,resolveAwsSdkSigV4Config:()=>O_,setCredentialFeature:()=>sc,setFeature:()=>Uv,state:()=>oc,validateSigningProperties:()=>Ho});var Ne=C(()=>{Ut();A_();KE()});var mi=v((Pce,sw)=>{"use strict";var Nc=Object.defineProperty,rW=Object.getOwnPropertyDescriptor,nW=Object.getOwnPropertyNames,iW=Object.prototype.hasOwnProperty,bn=(t,e)=>Nc(t,"name",{value:e,configurable:!0}),oW=(t,e)=>{for(var r in e)Nc(t,r,{get:e[r],enumerable:!0})},sW=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nW(e))!iW.call(t,i)&&i!==r&&Nc(t,i,{get:()=>e[i],enumerable:!(n=rW(e,i))||n.enumerable});return t},aW=t=>sW(Nc({},"__esModule",{value:!0}),t),XE={};oW(XE,{DEFAULT_UA_APP_ID:()=>ZE,getUserAgentMiddlewareOptions:()=>ow,getUserAgentPlugin:()=>hW,resolveUserAgentConfig:()=>tw,userAgentMiddleware:()=>iw});sw.exports=aW(XE);var cW=(rt(),F(xt)),ZE=void 0;function ew(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}bn(ew,"isValidUserAgentAppId");function tw(t){let e=(0,cW.normalizeProvider)(t.userAgentAppId??ZE);return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent,userAgentAppId:async()=>{var r,n;let i=await e();if(!ew(i)){let o=((n=(r=t.logger)==null?void 0:r.constructor)==null?void 0:n.name)==="NoOpLogger"||!t.logger?console:t.logger;typeof i!="string"?o?.warn("userAgentAppId must be a string or undefined."):i.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return i}}}bn(tw,"resolveUserAgentConfig");var dW=ci(),lW=de(),$t=(Ne(),F(Se)),uW=/\d{12}\.ddb/;async function rw(t,e,r){var n,i,o,s,a,d,l;let u=r.request;if(((n=u?.headers)==null?void 0:n["smithy-protocol"])==="rpc-v2-cbor"&&(0,$t.setFeature)(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let m=await e.retryStrategy();typeof m.acquireInitialRetryToken=="function"?(o=(i=m.constructor)==null?void 0:i.name)!=null&&o.includes("Adaptive")?(0,$t.setFeature)(t,"RETRY_MODE_ADAPTIVE","F"):(0,$t.setFeature)(t,"RETRY_MODE_STANDARD","E"):(0,$t.setFeature)(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let m=t.endpointV2;switch(String((s=m?.url)==null?void 0:s.hostname).match(uW)&&(0,$t.setFeature)(t,"ACCOUNT_ID_ENDPOINT","O"),await((a=e.accountIdEndpointMode)==null?void 0:a.call(e))){case"disabled":(0,$t.setFeature)(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":(0,$t.setFeature)(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":(0,$t.setFeature)(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let p=(l=(d=t.__smithy_context)==null?void 0:d.selectedHttpAuthScheme)==null?void 0:l.identity;if(p?.$source){let m=p;m.accountId&&(0,$t.setFeature)(t,"RESOLVED_ACCOUNT_ID","T");for(let[f,y]of Object.entries(m.$source??{}))(0,$t.setFeature)(t,f,y)}}bn(rw,"checkFeatures");var QE="user-agent",_p="x-amz-user-agent",JE=" ",Ep="/",pW=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,fW=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,YE="-",mW=1024;function nw(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=mW){e.length?e+=","+n:e+=n;continue}break}return e}bn(nw,"encodeFeatures");var iw=bn(t=>(e,r)=>async n=>{var i,o,s,a;let{request:d}=n;if(!lW.HttpRequest.isInstance(d))return e(n);let{headers:l}=d,u=((i=r?.userAgent)==null?void 0:i.map(Sc))||[],p=(await t.defaultUserAgentProvider()).map(Sc);await rw(r,t,n);let m=r;p.push(`m/${nw(Object.assign({},(o=r.__smithy_context)==null?void 0:o.features,(s=m.__aws_sdk_context)==null?void 0:s.features))}`);let f=((a=t?.customUserAgent)==null?void 0:a.map(Sc))||[],y=await t.userAgentAppId();y&&p.push(Sc([`app/${y}`]));let S=(0,dW.getUserAgentPrefix)(),E=(S?[S]:[]).concat([...p,...u,...f]).join(JE),x=[...p.filter(P=>P.startsWith("aws-sdk-")),...f].join(JE);return t.runtime!=="browser"?(x&&(l[_p]=l[_p]?`${l[QE]} ${x}`:x),l[QE]=E):l[_p]=E,e({...n,request:d})},"userAgentMiddleware"),Sc=bn(t=>{var e;let r=t[0].split(Ep).map(a=>a.replace(pW,YE)).join(Ep),n=(e=t[1])==null?void 0:e.replace(fW,YE),i=r.indexOf(Ep),o=r.substring(0,i),s=r.substring(i+1);return o==="api"&&(s=s.toLowerCase()),[o,s,n].filter(a=>a&&a.length>0).reduce((a,d,l)=>{switch(l){case 0:return d;case 1:return`${a}/${d}`;default:return`${a}#${d}`}},"")},"escapeUserAgent"),ow={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},hW=bn(t=>({applyToStack:e=>{e.add(iw(t),ow)}}),"getUserAgentPlugin")});var uw=v((Ice,lw)=>{var xc=Object.defineProperty,gW=Object.getOwnPropertyDescriptor,yW=Object.getOwnPropertyNames,vW=Object.prototype.hasOwnProperty,aw=(t,e)=>xc(t,"name",{value:e,configurable:!0}),_W=(t,e)=>{for(var r in e)xc(t,r,{get:e[r],enumerable:!0})},EW=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yW(e))!vW.call(t,i)&&i!==r&&xc(t,i,{get:()=>e[i],enumerable:!(n=gW(e,i))||n.enumerable});return t},wW=t=>EW(xc({},"__esModule",{value:!0}),t),cw={};_W(cw,{SelectorType:()=>dw,booleanSelector:()=>SW,numberSelector:()=>NW});lw.exports=wW(cw);var SW=aw((t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},"booleanSelector"),NW=aw((t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n},"numberSelector"),dw=(t=>(t.ENV="env",t.CONFIG="shared config entry",t))(dw||{})});var Vt=v((kce,Sw)=>{var Cc=Object.defineProperty,xW=Object.getOwnPropertyDescriptor,bW=Object.getOwnPropertyNames,CW=Object.prototype.hasOwnProperty,bt=(t,e)=>Cc(t,"name",{value:e,configurable:!0}),OW=(t,e)=>{for(var r in e)Cc(t,r,{get:e[r],enumerable:!0})},RW=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bW(e))!CW.call(t,i)&&i!==r&&Cc(t,i,{get:()=>e[i],enumerable:!(n=xW(e,i))||n.enumerable});return t},TW=t=>RW(Cc({},"__esModule",{value:!0}),t),mw={};OW(mw,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>gw,CONFIG_USE_FIPS_ENDPOINT:()=>vw,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>AW,DEFAULT_USE_FIPS_ENDPOINT:()=>IW,ENV_USE_DUALSTACK_ENDPOINT:()=>hw,ENV_USE_FIPS_ENDPOINT:()=>yw,NODE_REGION_CONFIG_FILE_OPTIONS:()=>LW,NODE_REGION_CONFIG_OPTIONS:()=>MW,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>PW,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>kW,REGION_ENV_NAME:()=>_w,REGION_INI_NAME:()=>Ew,getRegionInfo:()=>VW,resolveCustomEndpointsConfig:()=>DW,resolveEndpointsConfig:()=>FW,resolveRegionConfig:()=>WW});Sw.exports=TW(mw);var Hr=uw(),hw="AWS_USE_DUALSTACK_ENDPOINT",gw="use_dualstack_endpoint",AW=!1,PW={environmentVariableSelector:t=>(0,Hr.booleanSelector)(t,hw,Hr.SelectorType.ENV),configFileSelector:t=>(0,Hr.booleanSelector)(t,gw,Hr.SelectorType.CONFIG),default:!1},yw="AWS_USE_FIPS_ENDPOINT",vw="use_fips_endpoint",IW=!1,kW={environmentVariableSelector:t=>(0,Hr.booleanSelector)(t,yw,Hr.SelectorType.ENV),configFileSelector:t=>(0,Hr.booleanSelector)(t,vw,Hr.SelectorType.CONFIG),default:!1},bc=Nt(),DW=bt(t=>{let{endpoint:e,urlParser:r}=t;return{...t,tls:t.tls??!0,endpoint:(0,bc.normalizeProvider)(typeof e=="string"?r(e):e),isCustomEndpoint:!0,useDualstackEndpoint:(0,bc.normalizeProvider)(t.useDualstackEndpoint??!1)}},"resolveCustomEndpointsConfig"),qW=bt(async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let i=await t.useDualstackEndpoint(),o=await t.useFipsEndpoint(),{hostname:s}=await t.regionInfoProvider(r,{useDualstackEndpoint:i,useFipsEndpoint:o})??{};if(!s)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${s}`)},"getEndpointFromRegion"),FW=bt(t=>{let e=(0,bc.normalizeProvider)(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:i}=t;return{...t,tls:t.tls??!0,endpoint:r?(0,bc.normalizeProvider)(typeof r=="string"?i(r):r):()=>qW({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e}},"resolveEndpointsConfig"),_w="AWS_REGION",Ew="region",MW={environmentVariableSelector:t=>t[_w],configFileSelector:t=>t[Ew],default:()=>{throw new Error("Region is missing")}},LW={preferredFile:"credentials"},ww=bt(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion"),pw=bt(t=>ww(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion"),WW=bt(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return pw(e);let n=await e();return pw(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return ww(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig"),fw=bt((t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>{var n;return(n=t.find(({tags:i})=>e===i.includes("fips")&&r===i.includes("dualstack")))==null?void 0:n.hostname},"getHostnameFromVariants"),UW=bt((t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),"getResolvedHostname"),jW=bt((t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws","getResolvedPartition"),$W=bt((t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let i=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),o=t.match(i);if(o)return o[0].slice(1,-1)}},"getResolvedSigningRegion"),VW=bt((t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:i,partitionHash:o})=>{var s,a,d,l,u;let p=jW(t,{partitionHash:o}),m=t in i?t:((s=o[p])==null?void 0:s.endpoint)??t,f={useFipsEndpoint:e,useDualstackEndpoint:r},y=fw((a=i[m])==null?void 0:a.variants,f),S=fw((d=o[p])==null?void 0:d.variants,f),E=UW(m,{regionHostname:y,partitionHostname:S});if(E===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:m,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let x=$W(E,{signingRegion:(l=i[m])==null?void 0:l.signingRegion,regionRegex:o[p].regionRegex,useFipsEndpoint:e});return{partition:p,signingService:n,hostname:E,...x&&{signingRegion:x},...((u=i[m])==null?void 0:u.signingService)&&{signingService:i[m].signingService}}},"getRegionInfo")});var Xo=v((Dce,Ow)=>{var Oc=Object.defineProperty,BW=Object.getOwnPropertyDescriptor,HW=Object.getOwnPropertyNames,zW=Object.prototype.hasOwnProperty,xw=(t,e)=>Oc(t,"name",{value:e,configurable:!0}),GW=(t,e)=>{for(var r in e)Oc(t,r,{get:e[r],enumerable:!0})},KW=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of HW(e))!zW.call(t,i)&&i!==r&&Oc(t,i,{get:()=>e[i],enumerable:!(n=BW(e,i))||n.enumerable});return t},QW=t=>KW(Oc({},"__esModule",{value:!0}),t),bw={};GW(bw,{contentLengthMiddleware:()=>wp,contentLengthMiddlewareOptions:()=>Cw,getContentLengthPlugin:()=>YW});Ow.exports=QW(bw);var JW=de(),Nw="content-length";function wp(t){return e=>async r=>{let n=r.request;if(JW.HttpRequest.isInstance(n)){let{body:i,headers:o}=n;if(i&&Object.keys(o).map(s=>s.toLowerCase()).indexOf(Nw)===-1)try{let s=t(i);n.headers={...n.headers,[Nw]:String(s)}}catch{}}return e({...r,request:n})}}xw(wp,"contentLengthMiddleware");var Cw={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},YW=xw(t=>({applyToStack:e=>{e.add(wp(t.bodyLengthChecker),Cw)}}),"getContentLengthPlugin")});var hi=v(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.getHomeDir=void 0;var XW=j("os"),ZW=j("path"),Sp={},eU=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",tU=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${ZW.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let i=eU();return Sp[i]||(Sp[i]=(0,XW.homedir)()),Sp[i]};Rc.getHomeDir=tU});var Np=v(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.getSSOTokenFilepath=void 0;var rU=j("crypto"),nU=j("path"),iU=hi(),oU=t=>{let r=(0,rU.createHash)("sha1").update(t).digest("hex");return(0,nU.join)((0,iU.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Tc.getSSOTokenFilepath=oU});var Rw=v(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.getSSOTokenFromFile=void 0;var sU=j("fs"),aU=Np(),{readFile:cU}=sU.promises,dU=async t=>{let e=(0,aU.getSSOTokenFilepath)(t),r=await cU(e,"utf8");return JSON.parse(r)};Ac.getSSOTokenFromFile=dU});var bp=v(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.slurpFile=void 0;var lU=j("fs"),{readFile:uU}=lU.promises,xp={},pU=(t,e)=>((!xp[t]||e?.ignoreCache)&&(xp[t]=uU(t,"utf8")),xp[t]);Pc.slurpFile=pU});var zr=v((Wce,es)=>{var Dc=Object.defineProperty,fU=Object.getOwnPropertyDescriptor,mU=Object.getOwnPropertyNames,hU=Object.prototype.hasOwnProperty,ct=(t,e)=>Dc(t,"name",{value:e,configurable:!0}),gU=(t,e)=>{for(var r in e)Dc(t,r,{get:e[r],enumerable:!0})},Cp=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mU(e))!hU.call(t,i)&&i!==r&&Dc(t,i,{get:()=>e[i],enumerable:!(n=fU(e,i))||n.enumerable});return t},Rp=(t,e,r)=>(Cp(t,e,"default"),r&&Cp(r,e,"default")),yU=t=>Cp(Dc({},"__esModule",{value:!0}),t),Zo={};gU(Zo,{CONFIG_PREFIX_SEPARATOR:()=>Cn,DEFAULT_PROFILE:()=>Iw,ENV_PROFILE:()=>Pw,getProfileName:()=>vU,loadSharedConfigFiles:()=>Dw,loadSsoSessionData:()=>PU,parseKnownFiles:()=>kU});es.exports=yU(Zo);Rp(Zo,hi(),es.exports);var Pw="AWS_PROFILE",Iw="default",vU=ct(t=>t.profile||process.env[Pw]||Iw,"getProfileName");Rp(Zo,Np(),es.exports);Rp(Zo,Rw(),es.exports);var Ic=Mt(),_U=ct(t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Cn);return r===-1?!1:Object.values(Ic.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let i=r.indexOf(Cn),o=r.substring(0,i)===Ic.IniSectionType.PROFILE?r.substring(i+1):r;return e[o]=n,e},{...t.default&&{default:t.default}}),"getConfigData"),kc=j("path"),EU=hi(),wU="AWS_CONFIG_FILE",kw=ct(()=>process.env[wU]||(0,kc.join)((0,EU.getHomeDir)(),".aws","config"),"getConfigFilepath"),SU=hi(),NU="AWS_SHARED_CREDENTIALS_FILE",xU=ct(()=>process.env[NU]||(0,kc.join)((0,SU.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath"),bU=hi(),CU=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,OU=["__proto__","profile __proto__"],Op=ct(t=>{let e={},r,n;for(let i of t.split(/\r?\n/)){let o=i.split(/(^|\s)[;#]/)[0].trim();if(o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let a=o.substring(1,o.length-1),d=CU.exec(a);if(d){let[,l,,u]=d;Object.values(Ic.IniSectionType).includes(l)&&(r=[l,u].join(Cn))}else r=a;if(OU.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=o.indexOf("=");if(![0,-1].includes(a)){let[d,l]=[o.substring(0,a).trim(),o.substring(a+1).trim()];if(l==="")n=d;else{n&&i.trimStart()===i&&(n=void 0),e[r]=e[r]||{};let u=n?[n,d].join(Cn):d;e[r][u]=l}}}}return e},"parseIni"),Tw=bp(),Aw=ct(()=>({}),"swallowError"),Cn=".",Dw=ct(async(t={})=>{let{filepath:e=xU(),configFilepath:r=kw()}=t,n=(0,bU.getHomeDir)(),i="~/",o=e;e.startsWith(i)&&(o=(0,kc.join)(n,e.slice(2)));let s=r;r.startsWith(i)&&(s=(0,kc.join)(n,r.slice(2)));let a=await Promise.all([(0,Tw.slurpFile)(s,{ignoreCache:t.ignoreCache}).then(Op).then(_U).catch(Aw),(0,Tw.slurpFile)(o,{ignoreCache:t.ignoreCache}).then(Op).catch(Aw)]);return{configFile:a[0],credentialsFile:a[1]}},"loadSharedConfigFiles"),RU=ct(t=>Object.entries(t).filter(([e])=>e.startsWith(Ic.IniSectionType.SSO_SESSION+Cn)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Cn)+1)]:n}),{}),"getSsoSessionData"),TU=bp(),AU=ct(()=>({}),"swallowError"),PU=ct(async(t={})=>(0,TU.slurpFile)(t.configFilepath??kw()).then(Op).then(RU).catch(AU),"loadSsoSessionData"),IU=ct((...t)=>{let e={};for(let r of t)for(let[n,i]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],i):e[n]=i;return e},"mergeConfigFiles"),kU=ct(async t=>{let e=await Dw(t);return IU(e.configFile,e.credentialsFile)},"parseKnownFiles")});var Gr=v((Uce,Mw)=>{var qc=Object.defineProperty,DU=Object.getOwnPropertyDescriptor,qU=Object.getOwnPropertyNames,FU=Object.prototype.hasOwnProperty,gi=(t,e)=>qc(t,"name",{value:e,configurable:!0}),MU=(t,e)=>{for(var r in e)qc(t,r,{get:e[r],enumerable:!0})},LU=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qU(e))!FU.call(t,i)&&i!==r&&qc(t,i,{get:()=>e[i],enumerable:!(n=DU(e,i))||n.enumerable});return t},WU=t=>LU(qc({},"__esModule",{value:!0}),t),Fw={};MU(Fw,{loadConfig:()=>BU});Mw.exports=WU(Fw);var ts=$e();function Tp(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}gi(Tp,"getSelectorName");var UU=gi((t,e)=>async()=>{try{let r=t(process.env);if(r===void 0)throw new Error;return r}catch(r){throw new ts.CredentialsProviderError(r.message||`Not found in ENV: ${Tp(t.toString())}`,{logger:e})}},"fromEnv"),qw=zr(),jU=gi((t,{preferredFile:e="config",...r}={})=>async()=>{let n=(0,qw.getProfileName)(r),{configFile:i,credentialsFile:o}=await(0,qw.loadSharedConfigFiles)(r),s=o[n]||{},a=i[n]||{},d=e==="config"?{...s,...a}:{...a,...s};try{let u=t(d,e==="config"?i:o);if(u===void 0)throw new Error;return u}catch(l){throw new ts.CredentialsProviderError(l.message||`Not found in config files w/ profile [${n}]: ${Tp(t.toString())}`,{logger:r.logger})}},"fromSharedConfigFiles"),$U=gi(t=>typeof t=="function","isFunction"),VU=gi(t=>$U(t)?async()=>await t():(0,ts.fromStatic)(t),"fromStatic"),BU=gi(({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>(0,ts.memoize)((0,ts.chain)(UU(t),jU(e,n),VU(r))),"loadConfig")});var jw=v(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.getEndpointUrlConfig=void 0;var Lw=zr(),Ww="AWS_ENDPOINT_URL",Uw="endpoint_url",HU=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(o=>o.toUpperCase()),n=e[[Ww,...r].join("_")];if(n)return n;let i=e[Ww];if(i)return i},configFileSelector:(e,r)=>{if(r&&e.services){let i=r[["services",e.services].join(Lw.CONFIG_PREFIX_SEPARATOR)];if(i){let o=t.split(" ").map(a=>a.toLowerCase()),s=i[[o.join("_"),Uw].join(Lw.CONFIG_PREFIX_SEPARATOR)];if(s)return s}}let n=e[Uw];if(n)return n},default:void 0});Fc.getEndpointUrlConfig=HU});var Ap=v(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.getEndpointFromConfig=void 0;var zU=Gr(),GU=jw(),KU=async t=>(0,zU.loadConfig)((0,GU.getEndpointUrlConfig)(t??""))();Mc.getEndpointFromConfig=KU});var Hw=v((Vce,Bw)=>{var Lc=Object.defineProperty,QU=Object.getOwnPropertyDescriptor,JU=Object.getOwnPropertyNames,YU=Object.prototype.hasOwnProperty,XU=(t,e)=>Lc(t,"name",{value:e,configurable:!0}),ZU=(t,e)=>{for(var r in e)Lc(t,r,{get:e[r],enumerable:!0})},ej=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of JU(e))!YU.call(t,i)&&i!==r&&Lc(t,i,{get:()=>e[i],enumerable:!(n=QU(e,i))||n.enumerable});return t},tj=t=>ej(Lc({},"__esModule",{value:!0}),t),$w={};ZU($w,{parseQueryString:()=>Vw});Bw.exports=tj($w);function Vw(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,i=null]=r.split("=");n=decodeURIComponent(n),i&&(i=decodeURIComponent(i)),n in e?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i}return e}XU(Vw,"parseQueryString")});var On=v((Bce,Kw)=>{var Wc=Object.defineProperty,rj=Object.getOwnPropertyDescriptor,nj=Object.getOwnPropertyNames,ij=Object.prototype.hasOwnProperty,oj=(t,e)=>Wc(t,"name",{value:e,configurable:!0}),sj=(t,e)=>{for(var r in e)Wc(t,r,{get:e[r],enumerable:!0})},aj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nj(e))!ij.call(t,i)&&i!==r&&Wc(t,i,{get:()=>e[i],enumerable:!(n=rj(e,i))||n.enumerable});return t},cj=t=>aj(Wc({},"__esModule",{value:!0}),t),zw={};sj(zw,{parseUrl:()=>Gw});Kw.exports=cj(zw);var dj=Hw(),Gw=oj(t=>{if(typeof t=="string")return Gw(new URL(t));let{hostname:e,pathname:r,port:n,protocol:i,search:o}=t,s;return o&&(s=(0,dj.parseQueryString)(o)),{hostname:e,port:n?parseInt(n):void 0,protocol:i,path:r,query:s}},"parseUrl")});var yi=v((Hce,tS)=>{var jc=Object.defineProperty,lj=Object.getOwnPropertyDescriptor,uj=Object.getOwnPropertyNames,pj=Object.prototype.hasOwnProperty,Ct=(t,e)=>jc(t,"name",{value:e,configurable:!0}),fj=(t,e)=>{for(var r in e)jc(t,r,{get:e[r],enumerable:!0})},mj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of uj(e))!pj.call(t,i)&&i!==r&&jc(t,i,{get:()=>e[i],enumerable:!(n=lj(e,i))||n.enumerable});return t},hj=t=>mj(jc({},"__esModule",{value:!0}),t),Jw={};fj(Jw,{endpointMiddleware:()=>Zw,endpointMiddlewareOptions:()=>eS,getEndpointFromInstructions:()=>Yw,getEndpointPlugin:()=>Cj,resolveEndpointConfig:()=>Rj,resolveParams:()=>Xw,toEndpointV1:()=>Pp});tS.exports=hj(Jw);var gj=Ct(async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),wj(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Ej(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},"resolveParamsForS3"),yj=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,vj=/(\d+\.){3}\d+/,_j=/\.\./,Ej=Ct(t=>yj.test(t)&&!vj.test(t)&&!_j.test(t),"isDnsCompatibleBucketName"),wj=Ct(t=>{let[e,r,n,,,i]=t.split(":"),o=e==="arn"&&t.split(":").length>=6,s=!!(o&&r&&n&&i);if(o&&!s)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return s},"isArnBucketName"),Sj=Ct((t,e,r)=>{let n=Ct(async()=>{let i=r[t]??r[e];return typeof i=="function"?i():i},"configProvider");return t==="credentialScope"||e==="CredentialScope"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{let i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){let{protocol:o,hostname:s,port:a,path:d}=i;return`${o}//${s}${a?":"+a:""}${d}`}}return i}:n},"createConfigValueProvider"),Nj=Ap(),Qw=On(),Pp=Ct(t=>typeof t=="object"?"url"in t?(0,Qw.parseUrl)(t.url):t:(0,Qw.parseUrl)(t),"toEndpointV1"),Yw=Ct(async(t,e,r,n)=>{if(!r.endpoint){let s;r.serviceConfiguredEndpoint?s=await r.serviceConfiguredEndpoint():s=await(0,Nj.getEndpointFromConfig)(r.serviceId),s&&(r.endpoint=()=>Promise.resolve(Pp(s)))}let i=await Xw(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(i,n)},"getEndpointFromInstructions"),Xw=Ct(async(t,e,r)=>{var n;let i={},o=((n=e?.getEndpointParameterInstructions)==null?void 0:n.call(e))||{};for(let[s,a]of Object.entries(o))switch(a.type){case"staticContextParams":i[s]=a.value;break;case"contextParams":i[s]=t[a.name];break;case"clientContextParams":case"builtInParams":i[s]=await Sj(a.name,s,r)();break;case"operationContextParams":i[s]=a.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(i,r),String(r.serviceId).toLowerCase()==="s3"&&await gj(i),i},"resolveParams"),xj=(rt(),F(xt)),Uc=Nt(),Zw=Ct(({config:t,instructions:e})=>(r,n)=>async i=>{var o,s,a;t.endpoint&&(0,xj.setFeature)(n,"ENDPOINT_OVERRIDE","N");let d=await Yw(i.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=d,n.authSchemes=(o=d.properties)==null?void 0:o.authSchemes;let l=(s=n.authSchemes)==null?void 0:s[0];if(l){n.signing_region=l.signingRegion,n.signing_service=l.signingName;let u=(0,Uc.getSmithyContext)(n),p=(a=u?.selectedHttpAuthScheme)==null?void 0:a.httpAuthOption;p&&(p.signingProperties=Object.assign(p.signingProperties||{},{signing_region:l.signingRegion,signingRegion:l.signingRegion,signing_service:l.signingName,signingName:l.signingName,signingRegionSet:l.signingRegionSet},l.properties))}return r({...i})},"endpointMiddleware"),bj=gn(),eS={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:bj.serializerMiddlewareOption.name},Cj=Ct((t,e)=>({applyToStack:r=>{r.addRelativeTo(Zw({config:t,instructions:e}),eS)}}),"getEndpointPlugin"),Oj=Ap(),Rj=Ct(t=>{let e=t.tls??!0,{endpoint:r}=t,n=r!=null?async()=>Pp(await(0,Uc.normalizeProvider)(r)()):void 0,o={...t,endpoint:n,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:(0,Uc.normalizeProvider)(t.useDualstackEndpoint??!1),useFipsEndpoint:(0,Uc.normalizeProvider)(t.useFipsEndpoint??!1)},s;return o.serviceConfiguredEndpoint=async()=>(t.serviceId&&!s&&(s=(0,Oj.getEndpointFromConfig)(t.serviceId)),s),o},"resolveEndpointConfig")});import Tj from"crypto";function rs(){return $c>Vc.length-16&&(Tj.randomFillSync(Vc),$c=0),Vc.slice($c,$c+=16)}var Vc,$c,Ip=C(()=>{Vc=new Uint8Array(256),$c=Vc.length});var rS,nS=C(()=>{rS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Aj(t){return typeof t=="string"&&rS.test(t)}var Kr,ns=C(()=>{nS();Kr=Aj});function Rn(t,e=0){return Te[t[e+0]]+Te[t[e+1]]+Te[t[e+2]]+Te[t[e+3]]+"-"+Te[t[e+4]]+Te[t[e+5]]+"-"+Te[t[e+6]]+Te[t[e+7]]+"-"+Te[t[e+8]]+Te[t[e+9]]+"-"+Te[t[e+10]]+Te[t[e+11]]+Te[t[e+12]]+Te[t[e+13]]+Te[t[e+14]]+Te[t[e+15]]}function Pj(t,e=0){let r=Rn(t,e);if(!Kr(r))throw TypeError("Stringified UUID is invalid");return r}var Te,iS,is=C(()=>{ns();Te=[];for(let t=0;t<256;++t)Te.push((t+256).toString(16).slice(1));iS=Pj});function Ij(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||oS,s=t.clockseq!==void 0?t.clockseq:kp;if(o==null||s==null){let m=t.random||(t.rng||rs)();o==null&&(o=oS=[m[0]|1,m[1],m[2],m[3],m[4],m[5]]),s==null&&(s=kp=(m[6]<<8|m[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),d=t.nsecs!==void 0?t.nsecs:qp+1,l=a-Dp+(d-qp)/1e4;if(l<0&&t.clockseq===void 0&&(s=s+1&16383),(l<0||a>Dp)&&t.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dp=a,qp=d,kp=s,a+=122192928e5;let u=((a&268435455)*1e4+d)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=u&255;let p=a/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let m=0;m<6;++m)i[n+m]=o[m];return e||Rn(i)}var oS,kp,Dp,qp,sS,aS=C(()=>{Ip();is();Dp=0,qp=0;sS=Ij});function kj(t){if(!Kr(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Bc,Fp=C(()=>{ns();Bc=kj});function Dj(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function os(t,e,r){function n(i,o,s,a){var d;if(typeof i=="string"&&(i=Dj(i)),typeof o=="string"&&(o=Bc(o)),((d=o)===null||d===void 0?void 0:d.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=r(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,s){a=a||0;for(let u=0;u<16;++u)s[a+u]=l[u];return s}return Rn(l)}try{n.name=t}catch{}return n.DNS=qj,n.URL=Fj,n}var qj,Fj,Mp=C(()=>{is();Fp();qj="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fj="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});import Mj from"crypto";function Lj(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Mj.createHash("md5").update(t).digest()}var cS,dS=C(()=>{cS=Lj});var Wj,lS,uS=C(()=>{Mp();dS();Wj=os("v3",48,cS),lS=Wj});import Uj from"crypto";var Lp,pS=C(()=>{Lp={randomUUID:Uj.randomUUID}});function jj(t,e,r){if(Lp.randomUUID&&!e&&!t)return Lp.randomUUID();t=t||{};let n=t.random||(t.rng||rs)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Rn(n)}var fS,mS=C(()=>{pS();Ip();is();fS=jj});import $j from"crypto";function Vj(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),$j.createHash("sha1").update(t).digest()}var hS,gS=C(()=>{hS=Vj});var Bj,yS,vS=C(()=>{Mp();gS();Bj=os("v5",80,hS),yS=Bj});var _S,ES=C(()=>{_S="00000000-0000-0000-0000-000000000000"});function Hj(t){if(!Kr(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var wS,SS=C(()=>{ns();wS=Hj});var NS={};Dn(NS,{NIL:()=>_S,parse:()=>Bc,stringify:()=>iS,v1:()=>sS,v3:()=>lS,v4:()=>fS,v5:()=>yS,validate:()=>Kr,version:()=>wS});var xS=C(()=>{aS();uS();mS();vS();ES();SS();ns();is();Fp()});var Up=v((qde,OS)=>{var Hc=Object.defineProperty,zj=Object.getOwnPropertyDescriptor,Gj=Object.getOwnPropertyNames,Kj=Object.prototype.hasOwnProperty,vi=(t,e)=>Hc(t,"name",{value:e,configurable:!0}),Qj=(t,e)=>{for(var r in e)Hc(t,r,{get:e[r],enumerable:!0})},Jj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Gj(e))!Kj.call(t,i)&&i!==r&&Hc(t,i,{get:()=>e[i],enumerable:!(n=zj(e,i))||n.enumerable});return t},Yj=t=>Jj(Hc({},"__esModule",{value:!0}),t),bS={};Qj(bS,{isClockSkewCorrectedError:()=>CS,isClockSkewError:()=>i$,isRetryableByTrait:()=>n$,isServerError:()=>s$,isThrottlingError:()=>o$,isTransientError:()=>Wp});OS.exports=Yj(bS);var Xj=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Zj=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],e$=["TimeoutError","RequestTimeout","RequestTimeoutException"],t$=[500,502,503,504],r$=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],n$=vi(t=>t.$retryable!==void 0,"isRetryableByTrait"),i$=vi(t=>Xj.includes(t.name),"isClockSkewError"),CS=vi(t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},"isClockSkewCorrectedError"),o$=vi(t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||Zj.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),Wp=vi((t,e=0)=>{var r;return CS(t)||e$.includes(t.name)||r$.includes(t?.code||"")||t$.includes(((r=t.$metadata)==null?void 0:r.httpStatusCode)||0)||t.cause!==void 0&&e<=10&&Wp(t.cause,e+1)},"isTransientError"),s$=vi(t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Wp(t)}return!1},"isServerError")});var _i=v((Wde,US)=>{var zc=Object.defineProperty,a$=Object.getOwnPropertyDescriptor,c$=Object.getOwnPropertyNames,d$=Object.prototype.hasOwnProperty,Ot=(t,e)=>zc(t,"name",{value:e,configurable:!0}),l$=(t,e)=>{for(var r in e)zc(t,r,{get:e[r],enumerable:!0})},u$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of c$(e))!d$.call(t,i)&&i!==r&&zc(t,i,{get:()=>e[i],enumerable:!(n=a$(e,i))||n.enumerable});return t},p$=t=>u$(zc({},"__esModule",{value:!0}),t),TS={};l$(TS,{AdaptiveRetryStrategy:()=>v$,ConfiguredRetryStrategy:()=>_$,DEFAULT_MAX_ATTEMPTS:()=>jp,DEFAULT_RETRY_DELAY_BASE:()=>ss,DEFAULT_RETRY_MODE:()=>f$,DefaultRateLimiter:()=>IS,INITIAL_RETRY_TOKENS:()=>$p,INVOCATION_ID_HEADER:()=>h$,MAXIMUM_RETRY_DELAY:()=>Bp,NO_RETRY_INCREMENT:()=>FS,REQUEST_HEADER:()=>g$,RETRY_COST:()=>DS,RETRY_MODES:()=>AS,StandardRetryStrategy:()=>Hp,THROTTLING_RETRY_DELAY_BASE:()=>kS,TIMEOUT_RETRY_COST:()=>qS});US.exports=p$(TS);var AS=(t=>(t.STANDARD="standard",t.ADAPTIVE="adaptive",t))(AS||{}),jp=3,f$="standard",m$=Up(),Vp=class PS{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>PS.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),(0,m$.isThrottlingError)(e)){let i=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=i,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(i),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};Ot(Vp,"DefaultRateLimiter");Vp.setTimeoutFn=setTimeout;var IS=Vp,ss=100,Bp=20*1e3,kS=500,$p=500,DS=5,qS=10,FS=1,h$="amz-sdk-invocation-id",g$="amz-sdk-request",y$=Ot(()=>{let t=ss;return{computeNextBackoffDelay:Ot(n=>Math.floor(Math.min(Bp,Math.random()*2**n*t)),"computeNextBackoffDelay"),setDelayBase:Ot(n=>{t=n},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),RS=Ot(({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:Ot(()=>e,"getRetryCount"),getRetryDelay:Ot(()=>Math.min(Bp,t),"getRetryDelay"),getRetryCost:Ot(()=>r,"getRetryCost")}),"createDefaultRetryToken"),MS=class{constructor(e){this.maxAttempts=e,this.mode="standard",this.capacity=$p,this.retryBackoffStrategy=y$(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return RS({retryDelay:ss,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let i=r.errorType;this.retryBackoffStrategy.setDelayBase(i==="THROTTLING"?kS:ss);let o=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),s=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,o):o,a=this.getCapacityCost(i);return this.capacity-=a,RS({retryDelay:s,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max($p,this.capacity+(e.getRetryCost()??FS))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${jp}`),jp}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?qS:DS}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}};Ot(MS,"StandardRetryStrategy");var Hp=MS,LS=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode="adaptive";let{rateLimiter:n}=r??{};this.rateLimiter=n??new IS,this.standardRetryStrategy=new Hp(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}};Ot(LS,"AdaptiveRetryStrategy");var v$=LS,WS=class extends Hp{constructor(e,r=ss){super(typeof e=="function"?e:async()=>e),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(e,r){let n=await super.refreshRetryTokenForRetry(e,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}};Ot(WS,"ConfiguredRetryStrategy");var _$=WS});var jS=v(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.isStreamingPayload=void 0;var E$=j("stream"),w$=t=>t?.body instanceof E$.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Gc.isStreamingPayload=w$});var ur=v((Vde,iN)=>{var Kc=Object.defineProperty,S$=Object.getOwnPropertyDescriptor,N$=Object.getOwnPropertyNames,x$=Object.prototype.hasOwnProperty,he=(t,e)=>Kc(t,"name",{value:e,configurable:!0}),b$=(t,e)=>{for(var r in e)Kc(t,r,{get:e[r],enumerable:!0})},C$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of N$(e))!x$.call(t,i)&&i!==r&&Kc(t,i,{get:()=>e[i],enumerable:!(n=S$(e,i))||n.enumerable});return t},O$=t=>C$(Kc({},"__esModule",{value:!0}),t),VS={};b$(VS,{AdaptiveRetryStrategy:()=>A$,CONFIG_MAX_ATTEMPTS:()=>Gp,CONFIG_RETRY_MODE:()=>XS,ENV_MAX_ATTEMPTS:()=>zp,ENV_RETRY_MODE:()=>YS,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>P$,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>k$,StandardRetryStrategy:()=>QS,defaultDelayDecider:()=>HS,defaultRetryDecider:()=>zS,getOmitRetryHeadersPlugin:()=>D$,getRetryAfterHint:()=>nN,getRetryPlugin:()=>U$,omitRetryHeadersMiddleware:()=>ZS,omitRetryHeadersMiddlewareOptions:()=>eN,resolveRetryConfig:()=>I$,retryMiddleware:()=>tN,retryMiddlewareOptions:()=>rN});iN.exports=O$(VS);var Ei=de(),BS=(xS(),F(NS)),ne=_i(),R$=he((t,e)=>{let r=t,n=e?.noRetryIncrement??ne.NO_RETRY_INCREMENT,i=e?.retryCost??ne.RETRY_COST,o=e?.timeoutRetryCost??ne.TIMEOUT_RETRY_COST,s=t,a=he(p=>p.name==="TimeoutError"?o:i,"getCapacityAmount"),d=he(p=>a(p)<=s,"hasRetryTokens");return Object.freeze({hasRetryTokens:d,retrieveRetryTokens:he(p=>{if(!d(p))throw new Error("No retry token available");let m=a(p);return s-=m,m},"retrieveRetryTokens"),releaseRetryTokens:he(p=>{s+=p??n,s=Math.min(s,r)},"releaseRetryTokens")})},"getDefaultRetryQuota"),HS=he((t,e)=>Math.floor(Math.min(ne.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),"defaultDelayDecider"),Qr=Up(),zS=he(t=>t?(0,Qr.isRetryableByTrait)(t)||(0,Qr.isClockSkewError)(t)||(0,Qr.isThrottlingError)(t)||(0,Qr.isTransientError)(t):!1,"defaultRetryDecider"),GS=he(t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),"asSdkError"),KS=class{constructor(e,r){this.maxAttemptsProvider=e,this.mode=ne.RETRY_MODES.STANDARD,this.retryDecider=r?.retryDecider??zS,this.delayDecider=r?.delayDecider??HS,this.retryQuota=r?.retryQuota??R$(ne.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=ne.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let i,o=0,s=0,a=await this.getMaxAttempts(),{request:d}=r;for(Ei.HttpRequest.isInstance(d)&&(d.headers[ne.INVOCATION_ID_HEADER]=(0,BS.v4)());;)try{Ei.HttpRequest.isInstance(d)&&(d.headers[ne.REQUEST_HEADER]=`attempt=${o+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:l,output:u}=await e(r);return n?.afterRequest&&n.afterRequest(l),this.retryQuota.releaseRetryTokens(i),u.$metadata.attempts=o+1,u.$metadata.totalRetryDelay=s,{response:l,output:u}}catch(l){let u=GS(l);if(o++,this.shouldRetry(u,o,a)){i=this.retryQuota.retrieveRetryTokens(u);let p=this.delayDecider((0,Qr.isThrottlingError)(u)?ne.THROTTLING_RETRY_DELAY_BASE:ne.DEFAULT_RETRY_DELAY_BASE,o),m=T$(u.$response),f=Math.max(m||0,p);s+=f,await new Promise(y=>setTimeout(y,f));continue}throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=o,u.$metadata.totalRetryDelay=s,u}}};he(KS,"StandardRetryStrategy");var QS=KS,T$=he(t=>{if(!Ei.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},"getDelayFromRetryAfterHeader"),JS=class extends QS{constructor(e,r){let{rateLimiter:n,...i}=r??{};super(e,i),this.rateLimiter=n??new ne.DefaultRateLimiter,this.mode=ne.RETRY_MODES.ADAPTIVE}async retry(e,r){return super.retry(e,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}};he(JS,"AdaptiveRetryStrategy");var A$=JS,$S=Nt(),zp="AWS_MAX_ATTEMPTS",Gp="max_attempts",P$={environmentVariableSelector:t=>{let e=t[zp];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${zp} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[Gp];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Gp} mast be a number, got "${e}"`);return r},default:ne.DEFAULT_MAX_ATTEMPTS},I$=he(t=>{let{retryStrategy:e}=t,r=(0,$S.normalizeProvider)(t.maxAttempts??ne.DEFAULT_MAX_ATTEMPTS);return{...t,maxAttempts:r,retryStrategy:async()=>e||(await(0,$S.normalizeProvider)(t.retryMode)()===ne.RETRY_MODES.ADAPTIVE?new ne.AdaptiveRetryStrategy(r):new ne.StandardRetryStrategy(r))}},"resolveRetryConfig"),YS="AWS_RETRY_MODE",XS="retry_mode",k$={environmentVariableSelector:t=>t[YS],configFileSelector:t=>t[XS],default:ne.DEFAULT_RETRY_MODE},ZS=he(()=>t=>async e=>{let{request:r}=e;return Ei.HttpRequest.isInstance(r)&&(delete r.headers[ne.INVOCATION_ID_HEADER],delete r.headers[ne.REQUEST_HEADER]),t(e)},"omitRetryHeadersMiddleware"),eN={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},D$=he(t=>({applyToStack:e=>{e.addRelativeTo(ZS(),eN)}}),"getOmitRetryHeadersPlugin"),q$=Y(),F$=jS(),tN=he(t=>(e,r)=>async n=>{var i;let o=await t.retryStrategy(),s=await t.maxAttempts();if(M$(o)){o=o;let a=await o.acquireInitialRetryToken(r.partition_id),d=new Error,l=0,u=0,{request:p}=n,m=Ei.HttpRequest.isInstance(p);for(m&&(p.headers[ne.INVOCATION_ID_HEADER]=(0,BS.v4)());;)try{m&&(p.headers[ne.REQUEST_HEADER]=`attempt=${l+1}; max=${s}`);let{response:f,output:y}=await e(n);return o.recordSuccess(a),y.$metadata.attempts=l+1,y.$metadata.totalRetryDelay=u,{response:f,output:y}}catch(f){let y=L$(f);if(d=GS(f),m&&(0,F$.isStreamingPayload)(p))throw(i=r.logger instanceof q$.NoOpLogger?console:r.logger)==null||i.warn("An error was encountered in a non-retryable streaming request."),d;try{a=await o.refreshRetryTokenForRetry(a,y)}catch{throw d.$metadata||(d.$metadata={}),d.$metadata.attempts=l+1,d.$metadata.totalRetryDelay=u,d}l=a.getRetryCount();let S=a.getRetryDelay();u+=S,await new Promise(E=>setTimeout(E,S))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(e,n)},"retryMiddleware"),M$=he(t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u","isRetryStrategyV2"),L$=he(t=>{let e={error:t,errorType:W$(t)},r=nN(t.$response);return r&&(e.retryAfterHint=r),e},"getRetryErrorInfo"),W$=he(t=>(0,Qr.isThrottlingError)(t)?"THROTTLING":(0,Qr.isTransientError)(t)?"TRANSIENT":(0,Qr.isServerError)(t)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),rN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},U$=he(t=>({applyToStack:e=>{e.add(tN(t),rN)}}),"getRetryPlugin"),nN=he(t=>{if(!Ei.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(o=>o.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},"getRetryAfterHint")});var Kp=v(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.resolveHttpAuthSchemeConfig=Jr.defaultRDSDataHttpAuthSchemeProvider=Jr.defaultRDSDataHttpAuthSchemeParametersProvider=void 0;var j$=(Ne(),F(Se)),oN=Nt(),$$=async(t,e,r)=>({operation:(0,oN.getSmithyContext)(e).operation,region:await(0,oN.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Jr.defaultRDSDataHttpAuthSchemeParametersProvider=$$;function V$(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"rds-data",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var B$=t=>{let e=[];switch(t.operation){default:e.push(V$(t))}return e};Jr.defaultRDSDataHttpAuthSchemeProvider=B$;var H$=t=>({...(0,j$.resolveAwsSdkSigV4Config)(t)});Jr.resolveHttpAuthSchemeConfig=H$});var Si={};Dn(Si,{__addDisposableResource:()=>AN,__assign:()=>Qc,__asyncDelegator:()=>SN,__asyncGenerator:()=>wN,__asyncValues:()=>NN,__await:()=>wi,__awaiter:()=>hN,__classPrivateFieldGet:()=>ON,__classPrivateFieldIn:()=>TN,__classPrivateFieldSet:()=>RN,__createBinding:()=>Yc,__decorate:()=>cN,__disposeResources:()=>PN,__esDecorate:()=>lN,__exportStar:()=>yN,__extends:()=>sN,__generator:()=>gN,__importDefault:()=>CN,__importStar:()=>bN,__makeTemplateObject:()=>xN,__metadata:()=>mN,__param:()=>dN,__propKey:()=>pN,__read:()=>Yp,__rest:()=>aN,__rewriteRelativeImportExtension:()=>IN,__runInitializers:()=>uN,__setFunctionName:()=>fN,__spread:()=>vN,__spreadArray:()=>EN,__spreadArrays:()=>_N,__values:()=>Jc,default:()=>K$});function sN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function aN(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function cN(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,r,o):s(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function dN(t,e){return function(r,n){e(r,n,t)}}function lN(t,e,r,n,i,o){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=n.kind,d=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),p,m=!1,f=r.length-1;f>=0;f--){var y={};for(var S in n)y[S]=S==="access"?{}:n[S];for(var S in n.access)y.access[S]=n.access[S];y.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(x||null))};var E=(0,r[f])(a==="accessor"?{get:u.get,set:u.set}:u[d],y);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(p=s(E.get))&&(u.get=p),(p=s(E.set))&&(u.set=p),(p=s(E.init))&&i.unshift(p)}else(p=s(E))&&(a==="field"?i.unshift(p):u[d]=p)}l&&Object.defineProperty(l,n.name,u),m=!0}function uN(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function pN(t){return typeof t=="symbol"?t:"".concat(t)}function fN(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function mN(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function hN(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{l(n.next(u))}catch(p){s(p)}}function d(u){try{l(n.throw(u))}catch(p){s(p)}}function l(u){u.done?o(u.value):i(u.value).then(a,d)}l((n=n.apply(t,e||[])).next())})}function gN(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return d([l,u])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function yN(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Yc(e,t,r)}function Jc(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yp(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function vN(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Yp(arguments[e]));return t}function _N(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function EN(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function wi(t){return this instanceof wi?(this.v=t,this):new wi(t)}function wN(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(y){return Promise.resolve(y).then(f,p)}}function a(f,y){n[f]&&(i[f]=function(S){return new Promise(function(E,x){o.push([f,S,E,x])>1||d(f,S)})},y&&(i[f]=y(i[f])))}function d(f,y){try{l(n[f](y))}catch(S){m(o[0][3],S)}}function l(f){f.value instanceof wi?Promise.resolve(f.value.v).then(u,p):m(o[0][2],f)}function u(f){d("next",f)}function p(f){d("throw",f)}function m(f,y){f(y),o.shift(),o.length&&d(o[0][0],o[0][1])}}function SN(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(s){return(r=!r)?{value:wi(t[i](s)),done:!1}:o?o(s):s}:o}}function NN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Jc=="function"?Jc(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,d){s=t[o](s),i(a,d,s.done,s.value)})}}function i(o,s,a,d){Promise.resolve(d).then(function(l){o({value:l,done:a})},s)}}function xN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function bN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Jp(t),n=0;n<r.length;n++)r[n]!=="default"&&Yc(e,t,r[n]);return z$(e,t),e}function CN(t){return t&&t.__esModule?t:{default:t}}function ON(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function RN(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function TN(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function AN(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function PN(t){function e(o){t.error=t.hasError?new G$(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(s){return e(s),i()})}else n|=1}catch(s){e(s)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function IN(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,o,s){return n?e?".jsx":".js":i&&(!o||!s)?r:i+o+"."+s.toLowerCase()+"js"}):t}var Qp,Qc,Yc,z$,Jp,G$,K$,Ni=C(()=>{Qp=function(t,e){return Qp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Qp(t,e)};Qc=function(){return Qc=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qc.apply(this,arguments)};Yc=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};z$=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Jp=function(t){return Jp=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Jp(t)};G$=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};K$={__extends:sN,__assign:Qc,__rest:aN,__decorate:cN,__param:dN,__esDecorate:lN,__runInitializers:uN,__propKey:pN,__setFunctionName:fN,__metadata:mN,__awaiter:hN,__generator:gN,__createBinding:Yc,__exportStar:yN,__values:Jc,__read:Yp,__spread:vN,__spreadArrays:_N,__spreadArray:EN,__await:wi,__asyncGenerator:wN,__asyncDelegator:SN,__asyncValues:NN,__makeTemplateObject:xN,__importStar:bN,__importDefault:CN,__classPrivateFieldGet:ON,__classPrivateFieldSet:RN,__classPrivateFieldIn:TN,__addDisposableResource:AN,__disposeResources:PN,__rewriteRelativeImportExtension:IN}});var kN=v((Hde,Q$)=>{Q$.exports={name:"@aws-sdk/client-rds-data",description:"AWS SDK for JavaScript Rds Data Client for Node.js, Browser and React Native",version:"3.699.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-rds-data","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo rds-data"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.699.0","@aws-sdk/client-sts":"3.699.0","@aws-sdk/core":"3.696.0","@aws-sdk/credential-provider-node":"3.699.0","@aws-sdk/middleware-host-header":"3.696.0","@aws-sdk/middleware-logger":"3.696.0","@aws-sdk/middleware-recursion-detection":"3.696.0","@aws-sdk/middleware-user-agent":"3.696.0","@aws-sdk/region-config-resolver":"3.696.0","@aws-sdk/types":"3.696.0","@aws-sdk/util-endpoints":"3.696.0","@aws-sdk/util-user-agent-browser":"3.696.0","@aws-sdk/util-user-agent-node":"3.696.0","@smithy/config-resolver":"^3.0.12","@smithy/core":"^2.5.3","@smithy/fetch-http-handler":"^4.1.1","@smithy/hash-node":"^3.0.10","@smithy/invalid-dependency":"^3.0.10","@smithy/middleware-content-length":"^3.0.12","@smithy/middleware-endpoint":"^3.2.3","@smithy/middleware-retry":"^3.0.27","@smithy/middleware-serde":"^3.0.10","@smithy/middleware-stack":"^3.0.10","@smithy/node-config-provider":"^3.1.11","@smithy/node-http-handler":"^3.3.1","@smithy/protocol-http":"^4.1.7","@smithy/smithy-client":"^3.4.4","@smithy/types":"^3.7.1","@smithy/url-parser":"^3.0.10","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.27","@smithy/util-defaults-mode-node":"^3.0.27","@smithy/util-endpoints":"^2.1.6","@smithy/util-middleware":"^3.0.10","@smithy/util-retry":"^3.0.10","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rds-data",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rds-data"}}});var Xp=v((zde,jN)=>{"use strict";var Xc=Object.defineProperty,J$=Object.getOwnPropertyDescriptor,Y$=Object.getOwnPropertyNames,X$=Object.prototype.hasOwnProperty,Z$=(t,e)=>Xc(t,"name",{value:e,configurable:!0}),eV=(t,e)=>{for(var r in e)Xc(t,r,{get:e[r],enumerable:!0})},tV=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Y$(e))!X$.call(t,i)&&i!==r&&Xc(t,i,{get:()=>e[i],enumerable:!(n=J$(e,i))||n.enumerable});return t},rV=t=>tV(Xc({},"__esModule",{value:!0}),t),DN={};eV(DN,{ENV_ACCOUNT_ID:()=>UN,ENV_CREDENTIAL_SCOPE:()=>WN,ENV_EXPIRATION:()=>LN,ENV_KEY:()=>qN,ENV_SECRET:()=>FN,ENV_SESSION:()=>MN,fromEnv:()=>oV});jN.exports=rV(DN);var nV=(Ut(),F(jr)),iV=$e(),qN="AWS_ACCESS_KEY_ID",FN="AWS_SECRET_ACCESS_KEY",MN="AWS_SESSION_TOKEN",LN="AWS_CREDENTIAL_EXPIRATION",WN="AWS_CREDENTIAL_SCOPE",UN="AWS_ACCOUNT_ID",oV=Z$(t=>async()=>{var e;(e=t?.logger)==null||e.debug("@aws-sdk/credential-provider-env - fromEnv");let r=process.env[qN],n=process.env[FN],i=process.env[MN],o=process.env[LN],s=process.env[WN],a=process.env[UN];if(r&&n){let d={accessKeyId:r,secretAccessKey:n,...i&&{sessionToken:i},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...a&&{accountId:a}};return(0,nV.setCredentialFeature)(d,"CREDENTIALS_ENV_VARS","g"),d}throw new iV.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})},"fromEnv")});var as=v((Gde,rx)=>{var td=Object.defineProperty,sV=Object.getOwnPropertyDescriptor,aV=Object.getOwnPropertyNames,cV=Object.prototype.hasOwnProperty,ge=(t,e)=>td(t,"name",{value:e,configurable:!0}),dV=(t,e)=>{for(var r in e)td(t,r,{get:e[r],enumerable:!0})},lV=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aV(e))!cV.call(t,i)&&i!==r&&td(t,i,{get:()=>e[i],enumerable:!(n=sV(e,i))||n.enumerable});return t},uV=t=>lV(td({},"__esModule",{value:!0}),t),HN={};dV(HN,{DEFAULT_MAX_RETRIES:()=>QN,DEFAULT_TIMEOUT:()=>KN,ENV_CMDS_AUTH_TOKEN:()=>tf,ENV_CMDS_FULL_URI:()=>Zc,ENV_CMDS_RELATIVE_URI:()=>ed,Endpoint:()=>XN,fromContainerMetadata:()=>hV,fromInstanceMetadata:()=>FV,getInstanceMetadataEndpoint:()=>ex,httpRequest:()=>xi,providerConfigFromInit:()=>rf});rx.exports=uV(HN);var pV=j("url"),Bt=$e(),fV=j("buffer"),mV=j("http");function xi(t){return new Promise((e,r)=>{var n;let i=(0,mV.request)({method:"GET",...t,hostname:(n=t.hostname)==null?void 0:n.replace(/^\[(.+)\]$/,"$1")});i.on("error",o=>{r(Object.assign(new Bt.ProviderError("Unable to connect to instance metadata service"),o)),i.destroy()}),i.on("timeout",()=>{r(new Bt.ProviderError("TimeoutError from instance metadata service")),i.destroy()}),i.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Bt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),i.destroy());let a=[];o.on("data",d=>{a.push(d)}),o.on("end",()=>{e(fV.Buffer.concat(a)),i.destroy()})}),i.end()})}ge(xi,"httpRequest");var zN=ge(t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string","isImdsCredentials"),GN=ge(t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),"fromImdsCredentials"),KN=1e3,QN=0,rf=ge(({maxRetries:t=QN,timeout:e=KN})=>({maxRetries:t,timeout:e}),"providerConfigFromInit"),ef=ge((t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},"retry"),Zc="AWS_CONTAINER_CREDENTIALS_FULL_URI",ed="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",tf="AWS_CONTAINER_AUTHORIZATION_TOKEN",hV=ge((t={})=>{let{timeout:e,maxRetries:r}=rf(t);return()=>ef(async()=>{let n=await EV({logger:t.logger}),i=JSON.parse(await gV(e,n));if(!zN(i))throw new Bt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return GN(i)},r)},"fromContainerMetadata"),gV=ge(async(t,e)=>(process.env[tf]&&(e.headers={...e.headers,Authorization:process.env[tf]}),(await xi({...e,timeout:t})).toString()),"requestFromEcsImds"),yV="169.254.170.2",vV={localhost:!0,"127.0.0.1":!0},_V={"http:":!0,"https:":!0},EV=ge(async({logger:t})=>{if(process.env[ed])return{hostname:yV,path:process.env[ed]};if(process.env[Zc]){let e=(0,pV.parse)(process.env[Zc]);if(!e.hostname||!(e.hostname in vV))throw new Bt.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in _V))throw new Bt.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new Bt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${ed} or ${Zc} environment variable is set`,{tryNextLink:!1,logger:t})},"getCmdsUri"),JN=class YN extends Bt.CredentialsProviderError{constructor(e,r=!0){super(e,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,YN.prototype)}};ge(JN,"InstanceMetadataV1FallbackError");var wV=JN,nf=Gr(),SV=On(),XN=(t=>(t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]",t))(XN||{}),NV="AWS_EC2_METADATA_SERVICE_ENDPOINT",xV="ec2_metadata_service_endpoint",bV={environmentVariableSelector:t=>t[NV],configFileSelector:t=>t[xV],default:void 0},ZN=(t=>(t.IPv4="IPv4",t.IPv6="IPv6",t))(ZN||{}),CV="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",OV="ec2_metadata_service_endpoint_mode",RV={environmentVariableSelector:t=>t[CV],configFileSelector:t=>t[OV],default:"IPv4"},ex=ge(async()=>(0,SV.parseUrl)(await TV()||await AV()),"getInstanceMetadataEndpoint"),TV=ge(async()=>(0,nf.loadConfig)(bV)(),"getFromEndpointConfig"),AV=ge(async()=>{let t=await(0,nf.loadConfig)(RV)();switch(t){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(ZN)}`)}},"getFromEndpointModeConfig"),PV=5*60,IV=5*60,kV="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",$N=ge((t,e)=>{let r=PV+Math.floor(Math.random()*IV),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+kV);let i=t.originalExpiration??t.expiration;return{...t,...i?{originalExpiration:i}:{},expiration:n}},"getExtendedInstanceMetadataCredentials"),DV=ge((t,e={})=>{let r=e?.logger||console,n;return async()=>{let i;try{i=await t(),i.expiration&&i.expiration.getTime()<Date.now()&&(i=$N(i,r))}catch(o){if(n)r.warn("Credential renew failed: ",o),i=$N(n,r);else throw o}return n=i,i}},"staticStabilityProvider"),tx="/latest/meta-data/iam/security-credentials/",qV="/latest/api/token",Zp="AWS_EC2_METADATA_V1_DISABLED",VN="ec2_metadata_v1_disabled",BN="x-aws-ec2-metadata-token",FV=ge((t={})=>DV(MV(t),{logger:t.logger}),"fromInstanceMetadata"),MV=ge((t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:i,maxRetries:o}=rf(t),s=ge(async(a,d)=>{var l;if(e||((l=d.headers)==null?void 0:l[BN])==null){let m=!1,f=!1,y=await(0,nf.loadConfig)({environmentVariableSelector:S=>{let E=S[Zp];if(f=!!E&&E!=="false",E===void 0)throw new Bt.CredentialsProviderError(`${Zp} not set in env, checking config file next.`,{logger:t.logger});return f},configFileSelector:S=>{let E=S[VN];return m=!!E&&E!=="false",m},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||y){let S=[];throw t.ec2MetadataV1Disabled&&S.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),m&&S.push(`config file profile (${VN})`),f&&S.push(`process environment variable (${Zp})`),new wV(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${S.join(", ")}].`)}}let p=(await ef(async()=>{let m;try{m=await WV(d)}catch(f){throw f.statusCode===401&&(e=!1),f}return m},a)).trim();return ef(async()=>{let m;try{m=await UV(p,d,t)}catch(f){throw f.statusCode===401&&(e=!1),f}return m},a)},"getCredentials");return async()=>{let a=await ex();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),s(o,{...a,timeout:i});{let d;try{d=(await LV({...a,timeout:i})).toString()}catch(l){if(l?.statusCode===400)throw Object.assign(l,{message:"EC2 Metadata token request returned error"});return(l.message==="TimeoutError"||[403,404,405].includes(l.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),s(o,{...a,timeout:i})}return s(o,{...a,headers:{[BN]:d},timeout:i})}}},"getInstanceMetadataProvider"),LV=ge(async t=>xi({...t,path:qV,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),WV=ge(async t=>(await xi({...t,path:tx})).toString(),"getProfile"),UV=ge(async(t,e,r)=>{let n=JSON.parse((await xi({...e,path:tx+t})).toString());if(!zN(n))throw new Bt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return GN(n)},"getCredentialsFromProfile")});var nx=v(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.checkUrl=void 0;var jV=$e(),$V="169.254.170.2",VV="169.254.170.23",BV="[fd00:ec2::23]",HV=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===$V||t.hostname===VV||t.hostname===BV)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=i=>{let o=parseInt(i,10);return 0<=o&&o<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new jV.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};rd.checkUrl=HV});var ix=v(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.getCredentials=bi.createGetRequest=void 0;var of=$e(),zV=de(),GV=Y(),KV=Eu();function QV(t){return new zV.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}bi.createGetRequest=QV;async function JV(t,e){let n=await(0,KV.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let i=JSON.parse(n);if(typeof i.AccessKeyId!="string"||typeof i.SecretAccessKey!="string"||typeof i.Token!="string"||typeof i.Expiration!="string")throw new of.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.Token,expiration:(0,GV.parseRfc3339DateTime)(i.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let i={};try{i=JSON.parse(n)}catch{}throw Object.assign(new of.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:i.Code,Message:i.Message})}throw new of.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}bi.getCredentials=JV});var ox=v(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.retryWrapper=void 0;var YV=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(o=>setTimeout(o,r))}return await t()};nd.retryWrapper=YV});var cx=v(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.fromHttp=void 0;var XV=(Ni(),F(Si)),ZV=(Ut(),F(jr)),eB=yn(),sx=$e(),tB=XV.__importDefault(j("fs/promises")),rB=nx(),ax=ix(),nB=ox(),iB="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",oB="http://169.254.170.2",sB="AWS_CONTAINER_CREDENTIALS_FULL_URI",aB="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",cB="AWS_CONTAINER_AUTHORIZATION_TOKEN",dB=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[iB],n=t.awsContainerCredentialsFullUri??process.env[sB],i=t.awsContainerAuthorizationToken??process.env[cB],o=t.awsContainerAuthorizationTokenFile??process.env[aB],s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console.warn:t.logger.warn;if(r&&n&&(s("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),s("awsContainerCredentialsFullUri will take precedence.")),i&&o&&(s("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),s("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${oB}${r}`;else throw new sx.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,rB.checkUrl)(a,t.logger);let d=new eB.NodeHttpHandler({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,nB.retryWrapper)(async()=>{let l=(0,ax.createGetRequest)(a);i?l.headers.Authorization=i:o&&(l.headers.Authorization=(await tB.default.readFile(o)).toString());try{let u=await d.handle(l);return(0,ax.getCredentials)(u.response).then(p=>(0,ZV.setCredentialFeature)(p,"CREDENTIALS_HTTP","z"))}catch(u){throw new sx.CredentialsProviderError(String(u),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};id.fromHttp=dB});var sf=v(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.fromHttp=void 0;var lB=cx();Object.defineProperty(od,"fromHttp",{enumerable:!0,get:function(){return lB.fromHttp}})});var af=v(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.resolveHttpAuthSchemeConfig=Yr.defaultSSOHttpAuthSchemeProvider=Yr.defaultSSOHttpAuthSchemeParametersProvider=void 0;var uB=(Ne(),F(Se)),dx=Nt(),pB=async(t,e,r)=>({operation:(0,dx.getSmithyContext)(e).operation,region:await(0,dx.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Yr.defaultSSOHttpAuthSchemeParametersProvider=pB;function fB(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function sd(t){return{schemeId:"smithy.api#noAuth"}}var mB=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(sd(t));break}case"ListAccountRoles":{e.push(sd(t));break}case"ListAccounts":{e.push(sd(t));break}case"Logout":{e.push(sd(t));break}default:e.push(fB(t))}return e};Yr.defaultSSOHttpAuthSchemeProvider=mB;var hB=t=>({...(0,uB.resolveAwsSdkSigV4Config)(t)});Yr.resolveHttpAuthSchemeConfig=hB});var lx=v((ele,gB)=>{gB.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.696.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.696.0","@aws-sdk/middleware-host-header":"3.696.0","@aws-sdk/middleware-logger":"3.696.0","@aws-sdk/middleware-recursion-detection":"3.696.0","@aws-sdk/middleware-user-agent":"3.696.0","@aws-sdk/region-config-resolver":"3.696.0","@aws-sdk/types":"3.696.0","@aws-sdk/util-endpoints":"3.696.0","@aws-sdk/util-user-agent-browser":"3.696.0","@aws-sdk/util-user-agent-node":"3.696.0","@smithy/config-resolver":"^3.0.12","@smithy/core":"^2.5.3","@smithy/fetch-http-handler":"^4.1.1","@smithy/hash-node":"^3.0.10","@smithy/invalid-dependency":"^3.0.10","@smithy/middleware-content-length":"^3.0.12","@smithy/middleware-endpoint":"^3.2.3","@smithy/middleware-retry":"^3.0.27","@smithy/middleware-serde":"^3.0.10","@smithy/middleware-stack":"^3.0.10","@smithy/node-config-provider":"^3.1.11","@smithy/node-http-handler":"^3.3.1","@smithy/protocol-http":"^4.1.7","@smithy/smithy-client":"^3.4.4","@smithy/types":"^3.7.1","@smithy/url-parser":"^3.0.10","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.27","@smithy/util-defaults-mode-node":"^3.0.27","@smithy/util-endpoints":"^2.1.6","@smithy/util-middleware":"^3.0.10","@smithy/util-retry":"^3.0.10","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var cs=v((tle,vx)=>{"use strict";var ad=Object.defineProperty,yB=Object.getOwnPropertyDescriptor,vB=Object.getOwnPropertyNames,_B=Object.prototype.hasOwnProperty,px=(t,e)=>ad(t,"name",{value:e,configurable:!0}),EB=(t,e)=>{for(var r in e)ad(t,r,{get:e[r],enumerable:!0})},wB=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vB(e))!_B.call(t,i)&&i!==r&&ad(t,i,{get:()=>e[i],enumerable:!(n=yB(e,i))||n.enumerable});return t},SB=t=>wB(ad({},"__esModule",{value:!0}),t),fx={};EB(fx,{NODE_APP_ID_CONFIG_OPTIONS:()=>CB,UA_APP_ID_ENV_NAME:()=>gx,UA_APP_ID_INI_NAME:()=>yx,createDefaultUserAgentProvider:()=>hx,crtAvailability:()=>mx,defaultUserAgent:()=>xB});vx.exports=SB(fx);var ux=j("os"),cf=j("process"),mx={isCrtAvailable:!1},NB=px(()=>mx.isCrtAvailable?["md/crt-avail"]:null,"isCrtAvailable"),hx=px(({serviceId:t,clientVersion:e})=>async r=>{var n;let i=[["aws-sdk-js",e],["ua","2.1"],[`os/${(0,ux.platform)()}`,(0,ux.release)()],["lang/js"],["md/nodejs",`${cf.versions.node}`]],o=NB();o&&i.push(o),t&&i.push([`api/${t}`,e]),cf.env.AWS_EXECUTION_ENV&&i.push([`exec-env/${cf.env.AWS_EXECUTION_ENV}`]);let s=await((n=r?.userAgentAppId)==null?void 0:n.call(r));return s?[...i,[`app/${s}`]]:[...i]},"createDefaultUserAgentProvider"),xB=hx,bB=mi(),gx="AWS_SDK_UA_APP_ID",yx="sdk-ua-app-id",CB={environmentVariableSelector:t=>t[gx],configFileSelector:t=>t[yx],default:bB.DEFAULT_UA_APP_ID}});var ds=v((nle,Nx)=>{var cd=Object.defineProperty,OB=Object.getOwnPropertyDescriptor,RB=Object.getOwnPropertyNames,TB=Object.prototype.hasOwnProperty,Ex=(t,e)=>cd(t,"name",{value:e,configurable:!0}),AB=(t,e)=>{for(var r in e)cd(t,r,{get:e[r],enumerable:!0})},PB=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RB(e))!TB.call(t,i)&&i!==r&&cd(t,i,{get:()=>e[i],enumerable:!(n=OB(e,i))||n.enumerable});return t},IB=t=>PB(cd({},"__esModule",{value:!0}),t),wx={};AB(wx,{Hash:()=>qB});Nx.exports=IB(wx);var df=ii(),kB=tt(),DB=j("buffer"),_x=j("crypto"),Sx=class{constructor(e,r){this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update((0,kB.toUint8Array)(lf(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,_x.createHmac)(this.algorithmIdentifier,lf(this.secret)):(0,_x.createHash)(this.algorithmIdentifier)}};Ex(Sx,"Hash");var qB=Sx;function lf(t,e){return DB.Buffer.isBuffer(t)?t:typeof t=="string"?(0,df.fromString)(t,e):ArrayBuffer.isView(t)?(0,df.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength):(0,df.fromArrayBuffer)(t)}Ex(lf,"castSourceData")});var ls=v((ile,Cx)=>{var dd=Object.defineProperty,FB=Object.getOwnPropertyDescriptor,MB=Object.getOwnPropertyNames,LB=Object.prototype.hasOwnProperty,WB=(t,e)=>dd(t,"name",{value:e,configurable:!0}),UB=(t,e)=>{for(var r in e)dd(t,r,{get:e[r],enumerable:!0})},jB=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of MB(e))!LB.call(t,i)&&i!==r&&dd(t,i,{get:()=>e[i],enumerable:!(n=FB(e,i))||n.enumerable});return t},$B=t=>jB(dd({},"__esModule",{value:!0}),t),bx={};UB(bx,{calculateBodyLength:()=>VB});Cx.exports=$B(bx);var xx=j("fs"),VB=WB(t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(typeof t.path=="string"||Buffer.isBuffer(t.path))return(0,xx.lstatSync)(t.path).size;if(typeof t.fd=="number")return(0,xx.fstatSync)(t.fd).size;throw new Error(`Body Length computation failed for ${t}`)},"calculateBodyLength")});var jx=v(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.ruleSet=void 0;var Mx="required",lt="fn",ut="argv",Ri="ref",Ox=!0,Rx="isSet",us="booleanEquals",Ci="error",Oi="endpoint",pr="tree",uf="PartitionResult",pf="getAttr",Tx={[Mx]:!1,type:"String"},Ax={[Mx]:!0,default:!1,type:"Boolean"},Px={[Ri]:"Endpoint"},Lx={[lt]:us,[ut]:[{[Ri]:"UseFIPS"},!0]},Wx={[lt]:us,[ut]:[{[Ri]:"UseDualStack"},!0]},dt={},Ix={[lt]:pf,[ut]:[{[Ri]:uf},"supportsFIPS"]},Ux={[Ri]:uf},kx={[lt]:us,[ut]:[!0,{[lt]:pf,[ut]:[Ux,"supportsDualStack"]}]},Dx=[Lx],qx=[Wx],Fx=[{[Ri]:"Region"}],BB={version:"1.0",parameters:{Region:Tx,UseDualStack:Ax,UseFIPS:Ax,Endpoint:Tx},rules:[{conditions:[{[lt]:Rx,[ut]:[Px]}],rules:[{conditions:Dx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ci},{conditions:qx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ci},{endpoint:{url:Px,properties:dt,headers:dt},type:Oi}],type:pr},{conditions:[{[lt]:Rx,[ut]:Fx}],rules:[{conditions:[{[lt]:"aws.partition",[ut]:Fx,assign:uf}],rules:[{conditions:[Lx,Wx],rules:[{conditions:[{[lt]:us,[ut]:[Ox,Ix]},kx],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dt,headers:dt},type:Oi}],type:pr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ci}],type:pr},{conditions:Dx,rules:[{conditions:[{[lt]:us,[ut]:[Ix,Ox]}],rules:[{conditions:[{[lt]:"stringEquals",[ut]:[{[lt]:pf,[ut]:[Ux,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:dt,headers:dt},type:Oi},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:dt,headers:dt},type:Oi}],type:pr},{error:"FIPS is enabled but this partition does not support FIPS",type:Ci}],type:pr},{conditions:qx,rules:[{conditions:[kx],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dt,headers:dt},type:Oi}],type:pr},{error:"DualStack is enabled but this partition does not support DualStack",type:Ci}],type:pr},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:dt,headers:dt},type:Oi}],type:pr}],type:pr},{error:"Invalid Configuration: Missing Region",type:Ci}]};ld.ruleSet=BB});var $x=v(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.defaultEndpointResolver=void 0;var HB=ci(),ff=si(),zB=jx(),GB=new ff.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),KB=(t,e={})=>GB.get(t,()=>(0,ff.resolveEndpoint)(zB.ruleSet,{endpointParams:t,logger:e.logger}));ud.defaultEndpointResolver=KB;ff.customEndpointFunctions.aws=HB.awsEndpointFunctions});var Hx=v(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.getRuntimeConfig=void 0;var QB=(Ne(),F(Se)),JB=(rt(),F(xt)),YB=Y(),XB=On(),Vx=Lt(),Bx=tt(),ZB=af(),eH=$x(),tH=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??Vx.fromBase64,base64Encoder:t?.base64Encoder??Vx.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??eH.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??ZB.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new QB.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new JB.NoAuthSigner}],logger:t?.logger??new YB.NoOpLogger,serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??XB.parseUrl,utf8Decoder:t?.utf8Decoder??Bx.fromUtf8,utf8Encoder:t?.utf8Encoder??Bx.toUtf8});pd.getRuntimeConfig=tH});var fs=v((cle,Yx)=>{var rH=Object.create,ps=Object.defineProperty,nH=Object.getOwnPropertyDescriptor,iH=Object.getOwnPropertyNames,oH=Object.getPrototypeOf,sH=Object.prototype.hasOwnProperty,mf=(t,e)=>ps(t,"name",{value:e,configurable:!0}),aH=(t,e)=>{for(var r in e)ps(t,r,{get:e[r],enumerable:!0})},Qx=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iH(e))!sH.call(t,i)&&i!==r&&ps(t,i,{get:()=>e[i],enumerable:!(n=nH(e,i))||n.enumerable});return t},cH=(t,e,r)=>(r=t!=null?rH(oH(t)):{},Qx(e||!t||!t.__esModule?ps(r,"default",{value:t,enumerable:!0}):r,t)),dH=t=>Qx(ps({},"__esModule",{value:!0}),t),Jx={};aH(Jx,{resolveDefaultsModeConfig:()=>_H});Yx.exports=dH(Jx);var lH=Vt(),zx=Gr(),uH=$e(),pH="AWS_EXECUTION_ENV",Gx="AWS_REGION",Kx="AWS_DEFAULT_REGION",fH="AWS_EC2_METADATA_DISABLED",mH=["in-region","cross-region","mobile","standard","legacy"],hH="/latest/meta-data/placement/region",gH="AWS_DEFAULTS_MODE",yH="defaults_mode",vH={environmentVariableSelector:t=>t[gH],configFileSelector:t=>t[yH],default:"legacy"},_H=mf(({region:t=(0,zx.loadConfig)(lH.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=(0,zx.loadConfig)(vH)}={})=>(0,uH.memoize)(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return EH(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${mH.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig"),EH=mf(async t=>{if(t){let e=typeof t=="function"?await t():t,r=await wH();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),wH=mf(async()=>{if(process.env[pH]&&(process.env[Gx]||process.env[Kx]))return process.env[Gx]??process.env[Kx];if(!process.env[fH])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>cH(as())),r=await t();return(await e({...r,path:hH})).toString()}catch{}},"inferPhysicalRegion")});var tb=v(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.getRuntimeConfig=void 0;var SH=(Ni(),F(Si)),NH=SH.__importDefault(lx()),xH=(Ne(),F(Se)),Xx=cs(),fd=Vt(),bH=ds(),Zx=ur(),Ti=Gr(),eb=yn(),CH=ls(),OH=_i(),RH=Hx(),TH=Y(),AH=fs(),PH=Y(),IH=t=>{(0,PH.emitWarningIfUnsupportedVersion)(process.version);let e=(0,AH.resolveDefaultsModeConfig)(t),r=()=>e().then(TH.loadConfigsForDefaultMode),n=(0,RH.getRuntimeConfig)(t);return(0,xH.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??CH.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Xx.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:NH.default.version}),maxAttempts:t?.maxAttempts??(0,Ti.loadConfig)(Zx.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Ti.loadConfig)(fd.NODE_REGION_CONFIG_OPTIONS,fd.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:eb.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ti.loadConfig)({...Zx.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||OH.DEFAULT_RETRY_MODE}),sha256:t?.sha256??bH.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??eb.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ti.loadConfig)(fd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Ti.loadConfig)(fd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:t?.userAgentAppId??(0,Ti.loadConfig)(Xx.NODE_APP_ID_CONFIG_OPTIONS)}};md.getRuntimeConfig=IH});var ms=v((lle,ab)=>{"use strict";var hd=Object.defineProperty,kH=Object.getOwnPropertyDescriptor,DH=Object.getOwnPropertyNames,qH=Object.prototype.hasOwnProperty,Ai=(t,e)=>hd(t,"name",{value:e,configurable:!0}),FH=(t,e)=>{for(var r in e)hd(t,r,{get:e[r],enumerable:!0})},MH=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of DH(e))!qH.call(t,i)&&i!==r&&hd(t,i,{get:()=>e[i],enumerable:!(n=kH(e,i))||n.enumerable});return t},LH=t=>MH(hd({},"__esModule",{value:!0}),t),nb={};FH(nb,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>$H,NODE_REGION_CONFIG_OPTIONS:()=>jH,REGION_ENV_NAME:()=>ib,REGION_INI_NAME:()=>ob,getAwsRegionExtensionConfiguration:()=>WH,resolveAwsRegionExtensionConfiguration:()=>UH,resolveRegionConfig:()=>VH});ab.exports=LH(nb);var WH=Ai(t=>{let e=Ai(async()=>{if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=t.region;return typeof r=="string"?r:r()},"runtimeConfigRegion");return{setRegion(r){e=r},region(){return e}}},"getAwsRegionExtensionConfiguration"),UH=Ai(t=>({region:t.region()}),"resolveAwsRegionExtensionConfiguration"),ib="AWS_REGION",ob="region",jH={environmentVariableSelector:t=>t[ib],configFileSelector:t=>t[ob],default:()=>{throw new Error("Region is missing")}},$H={preferredFile:"credentials"},sb=Ai(t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),"isFipsRegion"),rb=Ai(t=>sb(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,"getRealRegion"),VH=Ai(t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return rb(e);let n=await e();return rb(n)},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return sb(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},"resolveRegionConfig")});var Yb=v((yle,Jb)=>{"use strict";var yd=Object.defineProperty,BH=Object.getOwnPropertyDescriptor,HH=Object.getOwnPropertyNames,zH=Object.prototype.hasOwnProperty,L=(t,e)=>yd(t,"name",{value:e,configurable:!0}),GH=(t,e)=>{for(var r in e)yd(t,r,{get:e[r],enumerable:!0})},KH=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of HH(e))!zH.call(t,i)&&i!==r&&yd(t,i,{get:()=>e[i],enumerable:!(n=BH(e,i))||n.enumerable});return t},QH=t=>KH(yd({},"__esModule",{value:!0}),t),mb={};GH(mb,{GetRoleCredentialsCommand:()=>Vb,GetRoleCredentialsRequestFilterSensitiveLog:()=>Ab,GetRoleCredentialsResponseFilterSensitiveLog:()=>Ib,InvalidRequestException:()=>Eb,ListAccountRolesCommand:()=>hf,ListAccountRolesRequestFilterSensitiveLog:()=>kb,ListAccountsCommand:()=>gf,ListAccountsRequestFilterSensitiveLog:()=>Db,LogoutCommand:()=>Gb,LogoutRequestFilterSensitiveLog:()=>qb,ResourceNotFoundException:()=>Nb,RoleCredentialsFilterSensitiveLog:()=>Pb,SSO:()=>Qb,SSOClient:()=>_d,SSOServiceException:()=>Pi,TooManyRequestsException:()=>Cb,UnauthorizedException:()=>Tb,__Client:()=>b.Client,paginateListAccountRoles:()=>wz,paginateListAccounts:()=>Sz});Jb.exports=QH(mb);var cb=Lo(),JH=Wo(),YH=Uo(),db=mi(),XH=Vt(),fr=(rt(),F(xt)),ZH=Xo(),gs=yi(),lb=ur(),ub=af(),ez=L(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters"),vd={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},tz=tb(),pb=ms(),fb=de(),b=Y(),rz=L(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(i){let o=e.findIndex(s=>s.schemeId===i.schemeId);o===-1?e.push(i):e.splice(o,1,i)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),nz=L(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),gd=L(t=>t,"asPartial"),iz=L((t,e)=>{let r={...gd((0,pb.getAwsRegionExtensionConfiguration)(t)),...gd((0,b.getDefaultExtensionConfiguration)(t)),...gd((0,fb.getHttpHandlerExtensionConfiguration)(t)),...gd(rz(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,pb.resolveAwsRegionExtensionConfiguration)(r),...(0,b.resolveDefaultRuntimeConfig)(r),...(0,fb.resolveHttpHandlerRuntimeConfig)(r),...nz(r)}},"resolveRuntimeExtensions"),hb=class extends b.Client{constructor(...[e]){let r=(0,tz.getRuntimeConfig)(e||{}),n=ez(r),i=(0,db.resolveUserAgentConfig)(n),o=(0,lb.resolveRetryConfig)(i),s=(0,XH.resolveRegionConfig)(o),a=(0,cb.resolveHostHeaderConfig)(s),d=(0,gs.resolveEndpointConfig)(a),l=(0,ub.resolveHttpAuthSchemeConfig)(d),u=iz(l,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,db.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,lb.getRetryPlugin)(this.config)),this.middlewareStack.use((0,ZH.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,cb.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,JH.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,YH.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,fr.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:ub.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new fr.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,fr.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};L(hb,"SSOClient");var _d=hb,Ed=gn(),gb=class yb extends b.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,yb.prototype)}};L(gb,"SSOServiceException");var Pi=gb,vb=class _b extends Pi{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,_b.prototype)}};L(vb,"InvalidRequestException");var Eb=vb,wb=class Sb extends Pi{constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Sb.prototype)}};L(wb,"ResourceNotFoundException");var Nb=wb,xb=class bb extends Pi{constructor(e){super({name:"TooManyRequestsException",$fault:"client",...e}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,bb.prototype)}};L(xb,"TooManyRequestsException");var Cb=xb,Ob=class Rb extends Pi{constructor(e){super({name:"UnauthorizedException",$fault:"client",...e}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Rb.prototype)}};L(Ob,"UnauthorizedException");var Tb=Ob,Ab=L(t=>({...t,...t.accessToken&&{accessToken:b.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog"),Pb=L(t=>({...t,...t.secretAccessKey&&{secretAccessKey:b.SENSITIVE_STRING},...t.sessionToken&&{sessionToken:b.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog"),Ib=L(t=>({...t,...t.roleCredentials&&{roleCredentials:Pb(t.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog"),kb=L(t=>({...t,...t.accessToken&&{accessToken:b.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog"),Db=L(t=>({...t,...t.accessToken&&{accessToken:b.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog"),qb=L(t=>({...t,...t.accessToken&&{accessToken:b.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog"),hs=(Ne(),F(Se)),oz=L(async(t,e)=>{let r=(0,fr.requestBuilder)(t,e),n=(0,b.map)({},b.isSerializableHeaderValue,{[Nd]:t[Sd]});r.bp("/federation/credentials");let i=(0,b.map)({[_z]:[,(0,b.expectNonNull)(t[vz],"roleName")],[Mb]:[,(0,b.expectNonNull)(t[Fb],"accountId")]}),o;return r.m("GET").h(n).q(i).b(o),r.build()},"se_GetRoleCredentialsCommand"),sz=L(async(t,e)=>{let r=(0,fr.requestBuilder)(t,e),n=(0,b.map)({},b.isSerializableHeaderValue,{[Nd]:t[Sd]});r.bp("/assignment/roles");let i=(0,b.map)({[jb]:[,t[Ub]],[Wb]:[()=>t.maxResults!==void 0,()=>t[Lb].toString()],[Mb]:[,(0,b.expectNonNull)(t[Fb],"accountId")]}),o;return r.m("GET").h(n).q(i).b(o),r.build()},"se_ListAccountRolesCommand"),az=L(async(t,e)=>{let r=(0,fr.requestBuilder)(t,e),n=(0,b.map)({},b.isSerializableHeaderValue,{[Nd]:t[Sd]});r.bp("/assignment/accounts");let i=(0,b.map)({[jb]:[,t[Ub]],[Wb]:[()=>t.maxResults!==void 0,()=>t[Lb].toString()]}),o;return r.m("GET").h(n).q(i).b(o),r.build()},"se_ListAccountsCommand"),cz=L(async(t,e)=>{let r=(0,fr.requestBuilder)(t,e),n=(0,b.map)({},b.isSerializableHeaderValue,{[Nd]:t[Sd]});r.bp("/logout");let i;return r.m("POST").h(n).b(i),r.build()},"se_LogoutCommand"),dz=L(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wd(t,e);let r=(0,b.map)({$metadata:Xr(t)}),n=(0,b.expectNonNull)((0,b.expectObject)(await(0,hs.parseJsonBody)(t.body,e)),"body"),i=(0,b.take)(n,{roleCredentials:b._json});return Object.assign(r,i),r},"de_GetRoleCredentialsCommand"),lz=L(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wd(t,e);let r=(0,b.map)({$metadata:Xr(t)}),n=(0,b.expectNonNull)((0,b.expectObject)(await(0,hs.parseJsonBody)(t.body,e)),"body"),i=(0,b.take)(n,{nextToken:b.expectString,roleList:b._json});return Object.assign(r,i),r},"de_ListAccountRolesCommand"),uz=L(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wd(t,e);let r=(0,b.map)({$metadata:Xr(t)}),n=(0,b.expectNonNull)((0,b.expectObject)(await(0,hs.parseJsonBody)(t.body,e)),"body"),i=(0,b.take)(n,{accountList:b._json,nextToken:b.expectString});return Object.assign(r,i),r},"de_ListAccountsCommand"),pz=L(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return wd(t,e);let r=(0,b.map)({$metadata:Xr(t)});return await(0,b.collectBody)(t.body,e),r},"de_LogoutCommand"),wd=L(async(t,e)=>{let r={...t,body:await(0,hs.parseJsonErrorBody)(t.body,e)},n=(0,hs.loadRestJsonErrorCode)(t,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await mz(r,e);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await hz(r,e);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await gz(r,e);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await yz(r,e);default:let i=r.body;return fz({output:t,parsedBody:i,errorCode:n})}},"de_CommandError"),fz=(0,b.withBaseException)(Pi),mz=L(async(t,e)=>{let r=(0,b.map)({}),n=t.body,i=(0,b.take)(n,{message:b.expectString});Object.assign(r,i);let o=new Eb({$metadata:Xr(t),...r});return(0,b.decorateServiceException)(o,t.body)},"de_InvalidRequestExceptionRes"),hz=L(async(t,e)=>{let r=(0,b.map)({}),n=t.body,i=(0,b.take)(n,{message:b.expectString});Object.assign(r,i);let o=new Nb({$metadata:Xr(t),...r});return(0,b.decorateServiceException)(o,t.body)},"de_ResourceNotFoundExceptionRes"),gz=L(async(t,e)=>{let r=(0,b.map)({}),n=t.body,i=(0,b.take)(n,{message:b.expectString});Object.assign(r,i);let o=new Cb({$metadata:Xr(t),...r});return(0,b.decorateServiceException)(o,t.body)},"de_TooManyRequestsExceptionRes"),yz=L(async(t,e)=>{let r=(0,b.map)({}),n=t.body,i=(0,b.take)(n,{message:b.expectString});Object.assign(r,i);let o=new Tb({$metadata:Xr(t),...r});return(0,b.decorateServiceException)(o,t.body)},"de_UnauthorizedExceptionRes"),Xr=L(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),Fb="accountId",Sd="accessToken",Mb="account_id",Lb="maxResults",Wb="max_result",Ub="nextToken",jb="next_token",vz="roleName",_z="role_name",Nd="x-amz-sso_bearer_token",$b=class extends b.Command.classBuilder().ep(vd).m(function(e,r,n,i){return[(0,Ed.getSerdePlugin)(n,this.serialize,this.deserialize),(0,gs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(Ab,Ib).ser(oz).de(dz).build(){};L($b,"GetRoleCredentialsCommand");var Vb=$b,Bb=class extends b.Command.classBuilder().ep(vd).m(function(e,r,n,i){return[(0,Ed.getSerdePlugin)(n,this.serialize,this.deserialize),(0,gs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(kb,void 0).ser(sz).de(lz).build(){};L(Bb,"ListAccountRolesCommand");var hf=Bb,Hb=class extends b.Command.classBuilder().ep(vd).m(function(e,r,n,i){return[(0,Ed.getSerdePlugin)(n,this.serialize,this.deserialize),(0,gs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(Db,void 0).ser(az).de(uz).build(){};L(Hb,"ListAccountsCommand");var gf=Hb,zb=class extends b.Command.classBuilder().ep(vd).m(function(e,r,n,i){return[(0,Ed.getSerdePlugin)(n,this.serialize,this.deserialize),(0,gs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(qb,void 0).ser(cz).de(pz).build(){};L(zb,"LogoutCommand");var Gb=zb,Ez={GetRoleCredentialsCommand:Vb,ListAccountRolesCommand:hf,ListAccountsCommand:gf,LogoutCommand:Gb},Kb=class extends _d{};L(Kb,"SSO");var Qb=Kb;(0,b.createAggregatedClient)(Ez,Qb);var wz=(0,fr.createPaginator)(_d,hf,"nextToken","nextToken","maxResults"),Sz=(0,fr.createPaginator)(_d,gf,"nextToken","nextToken","maxResults")});var vf=v(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.resolveHttpAuthSchemeConfig=Zr.defaultSSOOIDCHttpAuthSchemeProvider=Zr.defaultSSOOIDCHttpAuthSchemeParametersProvider=void 0;var Nz=(Ne(),F(Se)),Xb=Nt(),xz=async(t,e,r)=>({operation:(0,Xb.getSmithyContext)(e).operation,region:await(0,Xb.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Zr.defaultSSOOIDCHttpAuthSchemeParametersProvider=xz;function bz(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function yf(t){return{schemeId:"smithy.api#noAuth"}}var Cz=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(yf(t));break}case"RegisterClient":{e.push(yf(t));break}case"StartDeviceAuthorization":{e.push(yf(t));break}default:e.push(bz(t))}return e};Zr.defaultSSOOIDCHttpAuthSchemeProvider=Cz;var Oz=t=>({...(0,Nz.resolveAwsSdkSigV4Config)(t)});Zr.resolveHttpAuthSchemeConfig=Oz});var Zb=v((_le,Rz)=>{Rz.exports={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.699.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso-oidc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.696.0","@aws-sdk/credential-provider-node":"3.699.0","@aws-sdk/middleware-host-header":"3.696.0","@aws-sdk/middleware-logger":"3.696.0","@aws-sdk/middleware-recursion-detection":"3.696.0","@aws-sdk/middleware-user-agent":"3.696.0","@aws-sdk/region-config-resolver":"3.696.0","@aws-sdk/types":"3.696.0","@aws-sdk/util-endpoints":"3.696.0","@aws-sdk/util-user-agent-browser":"3.696.0","@aws-sdk/util-user-agent-node":"3.696.0","@smithy/config-resolver":"^3.0.12","@smithy/core":"^2.5.3","@smithy/fetch-http-handler":"^4.1.1","@smithy/hash-node":"^3.0.10","@smithy/invalid-dependency":"^3.0.10","@smithy/middleware-content-length":"^3.0.12","@smithy/middleware-endpoint":"^3.2.3","@smithy/middleware-retry":"^3.0.27","@smithy/middleware-serde":"^3.0.10","@smithy/middleware-stack":"^3.0.10","@smithy/node-config-provider":"^3.1.11","@smithy/node-http-handler":"^3.3.1","@smithy/protocol-http":"^4.1.7","@smithy/smithy-client":"^3.4.4","@smithy/types":"^3.7.1","@smithy/url-parser":"^3.0.10","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.27","@smithy/util-defaults-mode-node":"^3.0.27","@smithy/util-endpoints":"^2.1.6","@smithy/util-middleware":"^3.0.10","@smithy/util-retry":"^3.0.10","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",peerDependencies:{"@aws-sdk/client-sts":"^3.699.0"},browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}}});var mC=v(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.ruleSet=void 0;var lC="required",ft="fn",mt="argv",Di="ref",eC=!0,tC="isSet",ys="booleanEquals",Ii="error",ki="endpoint",mr="tree",_f="PartitionResult",Ef="getAttr",rC={[lC]:!1,type:"String"},nC={[lC]:!0,default:!1,type:"Boolean"},iC={[Di]:"Endpoint"},uC={[ft]:ys,[mt]:[{[Di]:"UseFIPS"},!0]},pC={[ft]:ys,[mt]:[{[Di]:"UseDualStack"},!0]},pt={},oC={[ft]:Ef,[mt]:[{[Di]:_f},"supportsFIPS"]},fC={[Di]:_f},sC={[ft]:ys,[mt]:[!0,{[ft]:Ef,[mt]:[fC,"supportsDualStack"]}]},aC=[uC],cC=[pC],dC=[{[Di]:"Region"}],Tz={version:"1.0",parameters:{Region:rC,UseDualStack:nC,UseFIPS:nC,Endpoint:rC},rules:[{conditions:[{[ft]:tC,[mt]:[iC]}],rules:[{conditions:aC,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ii},{conditions:cC,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ii},{endpoint:{url:iC,properties:pt,headers:pt},type:ki}],type:mr},{conditions:[{[ft]:tC,[mt]:dC}],rules:[{conditions:[{[ft]:"aws.partition",[mt]:dC,assign:_f}],rules:[{conditions:[uC,pC],rules:[{conditions:[{[ft]:ys,[mt]:[eC,oC]},sC],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},type:ki}],type:mr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ii}],type:mr},{conditions:aC,rules:[{conditions:[{[ft]:ys,[mt]:[oC,eC]}],rules:[{conditions:[{[ft]:"stringEquals",[mt]:[{[ft]:Ef,[mt]:[fC,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:pt,headers:pt},type:ki},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},type:ki}],type:mr},{error:"FIPS is enabled but this partition does not support FIPS",type:Ii}],type:mr},{conditions:cC,rules:[{conditions:[sC],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pt,headers:pt},type:ki}],type:mr},{error:"DualStack is enabled but this partition does not support DualStack",type:Ii}],type:mr},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:pt,headers:pt},type:ki}],type:mr}],type:mr},{error:"Invalid Configuration: Missing Region",type:Ii}]};xd.ruleSet=Tz});var hC=v(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.defaultEndpointResolver=void 0;var Az=ci(),wf=si(),Pz=mC(),Iz=new wf.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),kz=(t,e={})=>Iz.get(t,()=>(0,wf.resolveEndpoint)(Pz.ruleSet,{endpointParams:t,logger:e.logger}));bd.defaultEndpointResolver=kz;wf.customEndpointFunctions.aws=Az.awsEndpointFunctions});var vC=v(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.getRuntimeConfig=void 0;var Dz=(Ne(),F(Se)),qz=(rt(),F(xt)),Fz=Y(),Mz=On(),gC=Lt(),yC=tt(),Lz=vf(),Wz=hC(),Uz=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??gC.fromBase64,base64Encoder:t?.base64Encoder??gC.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Wz.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Lz.defaultSSOOIDCHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Dz.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new qz.NoAuthSigner}],logger:t?.logger??new Fz.NoOpLogger,serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??Mz.parseUrl,utf8Decoder:t?.utf8Decoder??yC.fromUtf8,utf8Encoder:t?.utf8Encoder??yC.toUtf8});Cd.getRuntimeConfig=Uz});var SC=v(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.getRuntimeConfig=void 0;var jz=(Ni(),F(Si)),$z=jz.__importDefault(Zb()),Vz=(Ne(),F(Se)),Bz=Td(),_C=cs(),Od=Vt(),Hz=ds(),EC=ur(),qi=Gr(),wC=yn(),zz=ls(),Gz=_i(),Kz=vC(),Qz=Y(),Jz=fs(),Yz=Y(),Xz=t=>{(0,Yz.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Jz.resolveDefaultsModeConfig)(t),r=()=>e().then(Qz.loadConfigsForDefaultMode),n=(0,Kz.getRuntimeConfig)(t);return(0,Vz.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??zz.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??Bz.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,_C.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:$z.default.version}),maxAttempts:t?.maxAttempts??(0,qi.loadConfig)(EC.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,qi.loadConfig)(Od.NODE_REGION_CONFIG_OPTIONS,Od.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:wC.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,qi.loadConfig)({...EC.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Gz.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Hz.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??wC.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,qi.loadConfig)(Od.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,qi.loadConfig)(Od.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:t?.userAgentAppId??(0,qi.loadConfig)(_C.NODE_APP_ID_CONFIG_OPTIONS)}};Rd.getRuntimeConfig=Xz});var Sf=v((Ale,LO)=>{"use strict";var Pd=Object.defineProperty,Zz=Object.getOwnPropertyDescriptor,e2=Object.getOwnPropertyNames,t2=Object.prototype.hasOwnProperty,A=(t,e)=>Pd(t,"name",{value:e,configurable:!0}),r2=(t,e)=>{for(var r in e)Pd(t,r,{get:e[r],enumerable:!0})},n2=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of e2(e))!t2.call(t,i)&&i!==r&&Pd(t,i,{get:()=>e[i],enumerable:!(n=Zz(e,i))||n.enumerable});return t},i2=t=>n2(Pd({},"__esModule",{value:!0}),t),TC={};r2(TC,{AccessDeniedException:()=>FC,AuthorizationPendingException:()=>WC,CreateTokenCommand:()=>TO,CreateTokenRequestFilterSensitiveLog:()=>SO,CreateTokenResponseFilterSensitiveLog:()=>NO,CreateTokenWithIAMCommand:()=>PO,CreateTokenWithIAMRequestFilterSensitiveLog:()=>xO,CreateTokenWithIAMResponseFilterSensitiveLog:()=>bO,ExpiredTokenException:()=>$C,InternalServerException:()=>HC,InvalidClientException:()=>KC,InvalidClientMetadataException:()=>vO,InvalidGrantException:()=>YC,InvalidRedirectUriException:()=>wO,InvalidRequestException:()=>eO,InvalidRequestRegionException:()=>hO,InvalidScopeException:()=>nO,RegisterClientCommand:()=>kO,RegisterClientResponseFilterSensitiveLog:()=>CO,SSOOIDC:()=>MO,SSOOIDCClient:()=>PC,SSOOIDCServiceException:()=>Me,SlowDownException:()=>sO,StartDeviceAuthorizationCommand:()=>qO,StartDeviceAuthorizationRequestFilterSensitiveLog:()=>OO,UnauthorizedClientException:()=>dO,UnsupportedGrantTypeException:()=>pO,__Client:()=>g.Client});LO.exports=i2(TC);var NC=Lo(),o2=Wo(),s2=Uo(),xC=mi(),a2=Vt(),Tn=(rt(),F(xt)),c2=Xo(),vs=yi(),bC=ur(),CC=vf(),d2=A(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),"resolveClientEndpointParameters"),Id={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},l2=SC(),OC=ms(),RC=de(),g=Y(),u2=A(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(i){let o=e.findIndex(s=>s.schemeId===i.schemeId);o===-1?e.push(i):e.splice(o,1,i)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),p2=A(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),Ad=A(t=>t,"asPartial"),f2=A((t,e)=>{let r={...Ad((0,OC.getAwsRegionExtensionConfiguration)(t)),...Ad((0,g.getDefaultExtensionConfiguration)(t)),...Ad((0,RC.getHttpHandlerExtensionConfiguration)(t)),...Ad(u2(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,OC.resolveAwsRegionExtensionConfiguration)(r),...(0,g.resolveDefaultRuntimeConfig)(r),...(0,RC.resolveHttpHandlerRuntimeConfig)(r),...p2(r)}},"resolveRuntimeExtensions"),AC=class extends g.Client{constructor(...[e]){let r=(0,l2.getRuntimeConfig)(e||{}),n=d2(r),i=(0,xC.resolveUserAgentConfig)(n),o=(0,bC.resolveRetryConfig)(i),s=(0,a2.resolveRegionConfig)(o),a=(0,NC.resolveHostHeaderConfig)(s),d=(0,vs.resolveEndpointConfig)(a),l=(0,CC.resolveHttpAuthSchemeConfig)(d),u=f2(l,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,xC.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,bC.getRetryPlugin)(this.config)),this.middlewareStack.use((0,c2.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,NC.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,o2.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,s2.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Tn.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:CC.defaultSSOOIDCHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new Tn.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,Tn.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};A(AC,"SSOOIDCClient");var PC=AC,kd=gn(),IC=class kC extends g.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,kC.prototype)}};A(IC,"SSOOIDCServiceException");var Me=IC,DC=class qC extends Me{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,qC.prototype),this.error=e.error,this.error_description=e.error_description}};A(DC,"AccessDeniedException");var FC=DC,MC=class LC extends Me{constructor(e){super({name:"AuthorizationPendingException",$fault:"client",...e}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,LC.prototype),this.error=e.error,this.error_description=e.error_description}};A(MC,"AuthorizationPendingException");var WC=MC,UC=class jC extends Me{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,jC.prototype),this.error=e.error,this.error_description=e.error_description}};A(UC,"ExpiredTokenException");var $C=UC,VC=class BC extends Me{constructor(e){super({name:"InternalServerException",$fault:"server",...e}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,BC.prototype),this.error=e.error,this.error_description=e.error_description}};A(VC,"InternalServerException");var HC=VC,zC=class GC extends Me{constructor(e){super({name:"InvalidClientException",$fault:"client",...e}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,GC.prototype),this.error=e.error,this.error_description=e.error_description}};A(zC,"InvalidClientException");var KC=zC,QC=class JC extends Me{constructor(e){super({name:"InvalidGrantException",$fault:"client",...e}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,JC.prototype),this.error=e.error,this.error_description=e.error_description}};A(QC,"InvalidGrantException");var YC=QC,XC=class ZC extends Me{constructor(e){super({name:"InvalidRequestException",$fault:"client",...e}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,ZC.prototype),this.error=e.error,this.error_description=e.error_description}};A(XC,"InvalidRequestException");var eO=XC,tO=class rO extends Me{constructor(e){super({name:"InvalidScopeException",$fault:"client",...e}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,rO.prototype),this.error=e.error,this.error_description=e.error_description}};A(tO,"InvalidScopeException");var nO=tO,iO=class oO extends Me{constructor(e){super({name:"SlowDownException",$fault:"client",...e}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,oO.prototype),this.error=e.error,this.error_description=e.error_description}};A(iO,"SlowDownException");var sO=iO,aO=class cO extends Me{constructor(e){super({name:"UnauthorizedClientException",$fault:"client",...e}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,cO.prototype),this.error=e.error,this.error_description=e.error_description}};A(aO,"UnauthorizedClientException");var dO=aO,lO=class uO extends Me{constructor(e){super({name:"UnsupportedGrantTypeException",$fault:"client",...e}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,uO.prototype),this.error=e.error,this.error_description=e.error_description}};A(lO,"UnsupportedGrantTypeException");var pO=lO,fO=class mO extends Me{constructor(e){super({name:"InvalidRequestRegionException",$fault:"client",...e}),this.name="InvalidRequestRegionException",this.$fault="client",Object.setPrototypeOf(this,mO.prototype),this.error=e.error,this.error_description=e.error_description,this.endpoint=e.endpoint,this.region=e.region}};A(fO,"InvalidRequestRegionException");var hO=fO,gO=class yO extends Me{constructor(e){super({name:"InvalidClientMetadataException",$fault:"client",...e}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,yO.prototype),this.error=e.error,this.error_description=e.error_description}};A(gO,"InvalidClientMetadataException");var vO=gO,_O=class EO extends Me{constructor(e){super({name:"InvalidRedirectUriException",$fault:"client",...e}),this.name="InvalidRedirectUriException",this.$fault="client",Object.setPrototypeOf(this,EO.prototype),this.error=e.error,this.error_description=e.error_description}};A(_O,"InvalidRedirectUriException");var wO=_O,SO=A(t=>({...t,...t.clientSecret&&{clientSecret:g.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:g.SENSITIVE_STRING},...t.codeVerifier&&{codeVerifier:g.SENSITIVE_STRING}}),"CreateTokenRequestFilterSensitiveLog"),NO=A(t=>({...t,...t.accessToken&&{accessToken:g.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:g.SENSITIVE_STRING},...t.idToken&&{idToken:g.SENSITIVE_STRING}}),"CreateTokenResponseFilterSensitiveLog"),xO=A(t=>({...t,...t.refreshToken&&{refreshToken:g.SENSITIVE_STRING},...t.assertion&&{assertion:g.SENSITIVE_STRING},...t.subjectToken&&{subjectToken:g.SENSITIVE_STRING},...t.codeVerifier&&{codeVerifier:g.SENSITIVE_STRING}}),"CreateTokenWithIAMRequestFilterSensitiveLog"),bO=A(t=>({...t,...t.accessToken&&{accessToken:g.SENSITIVE_STRING},...t.refreshToken&&{refreshToken:g.SENSITIVE_STRING},...t.idToken&&{idToken:g.SENSITIVE_STRING}}),"CreateTokenWithIAMResponseFilterSensitiveLog"),CO=A(t=>({...t,...t.clientSecret&&{clientSecret:g.SENSITIVE_STRING}}),"RegisterClientResponseFilterSensitiveLog"),OO=A(t=>({...t,...t.clientSecret&&{clientSecret:g.SENSITIVE_STRING}}),"StartDeviceAuthorizationRequestFilterSensitiveLog"),Fi=(Ne(),F(Se)),m2=A(async(t,e)=>{let r=(0,Tn.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/token");let i;return i=JSON.stringify((0,g.take)(t,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:o=>(0,g._json)(o)})),r.m("POST").h(n).b(i),r.build()},"se_CreateTokenCommand"),h2=A(async(t,e)=>{let r=(0,Tn.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/token");let i=(0,g.map)({[M2]:[,"t"]}),o;return o=JSON.stringify((0,g.take)(t,{assertion:[],clientId:[],code:[],codeVerifier:[],grantType:[],redirectUri:[],refreshToken:[],requestedTokenType:[],scope:s=>(0,g._json)(s),subjectToken:[],subjectTokenType:[]})),r.m("POST").h(n).q(i).b(o),r.build()},"se_CreateTokenWithIAMCommand"),g2=A(async(t,e)=>{let r=(0,Tn.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/client/register");let i;return i=JSON.stringify((0,g.take)(t,{clientName:[],clientType:[],entitledApplicationArn:[],grantTypes:o=>(0,g._json)(o),issuerUrl:[],redirectUris:o=>(0,g._json)(o),scopes:o=>(0,g._json)(o)})),r.m("POST").h(n).b(i),r.build()},"se_RegisterClientCommand"),y2=A(async(t,e)=>{let r=(0,Tn.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/device_authorization");let i;return i=JSON.stringify((0,g.take)(t,{clientId:[],clientSecret:[],startUrl:[]})),r.m("POST").h(n).b(i),r.build()},"se_StartDeviceAuthorizationCommand"),v2=A(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Dd(t,e);let r=(0,g.map)({$metadata:xe(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await(0,Fi.parseJsonBody)(t.body,e)),"body"),i=(0,g.take)(n,{accessToken:g.expectString,expiresIn:g.expectInt32,idToken:g.expectString,refreshToken:g.expectString,tokenType:g.expectString});return Object.assign(r,i),r},"de_CreateTokenCommand"),_2=A(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Dd(t,e);let r=(0,g.map)({$metadata:xe(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await(0,Fi.parseJsonBody)(t.body,e)),"body"),i=(0,g.take)(n,{accessToken:g.expectString,expiresIn:g.expectInt32,idToken:g.expectString,issuedTokenType:g.expectString,refreshToken:g.expectString,scope:g._json,tokenType:g.expectString});return Object.assign(r,i),r},"de_CreateTokenWithIAMCommand"),E2=A(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Dd(t,e);let r=(0,g.map)({$metadata:xe(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await(0,Fi.parseJsonBody)(t.body,e)),"body"),i=(0,g.take)(n,{authorizationEndpoint:g.expectString,clientId:g.expectString,clientIdIssuedAt:g.expectLong,clientSecret:g.expectString,clientSecretExpiresAt:g.expectLong,tokenEndpoint:g.expectString});return Object.assign(r,i),r},"de_RegisterClientCommand"),w2=A(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return Dd(t,e);let r=(0,g.map)({$metadata:xe(t)}),n=(0,g.expectNonNull)((0,g.expectObject)(await(0,Fi.parseJsonBody)(t.body,e)),"body"),i=(0,g.take)(n,{deviceCode:g.expectString,expiresIn:g.expectInt32,interval:g.expectInt32,userCode:g.expectString,verificationUri:g.expectString,verificationUriComplete:g.expectString});return Object.assign(r,i),r},"de_StartDeviceAuthorizationCommand"),Dd=A(async(t,e)=>{let r={...t,body:await(0,Fi.parseJsonErrorBody)(t.body,e)},n=(0,Fi.loadRestJsonErrorCode)(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await N2(r,e);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await x2(r,e);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await b2(r,e);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await C2(r,e);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await O2(r,e);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await T2(r,e);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await P2(r,e);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await k2(r,e);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await D2(r,e);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await q2(r,e);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await F2(r,e);case"InvalidRequestRegionException":case"com.amazonaws.ssooidc#InvalidRequestRegionException":throw await I2(r,e);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await R2(r,e);case"InvalidRedirectUriException":case"com.amazonaws.ssooidc#InvalidRedirectUriException":throw await A2(r,e);default:let i=r.body;return S2({output:t,parsedBody:i,errorCode:n})}},"de_CommandError"),S2=(0,g.withBaseException)(Me),N2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new FC({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_AccessDeniedExceptionRes"),x2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new WC({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_AuthorizationPendingExceptionRes"),b2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new $C({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_ExpiredTokenExceptionRes"),C2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new HC({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InternalServerExceptionRes"),O2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new KC({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidClientExceptionRes"),R2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new vO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidClientMetadataExceptionRes"),T2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new YC({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidGrantExceptionRes"),A2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new wO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidRedirectUriExceptionRes"),P2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new eO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidRequestExceptionRes"),I2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{endpoint:g.expectString,error:g.expectString,error_description:g.expectString,region:g.expectString});Object.assign(r,i);let o=new hO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidRequestRegionExceptionRes"),k2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new nO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_InvalidScopeExceptionRes"),D2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new sO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_SlowDownExceptionRes"),q2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new dO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_UnauthorizedClientExceptionRes"),F2=A(async(t,e)=>{let r=(0,g.map)({}),n=t.body,i=(0,g.take)(n,{error:g.expectString,error_description:g.expectString});Object.assign(r,i);let o=new pO({$metadata:xe(t),...r});return(0,g.decorateServiceException)(o,t.body)},"de_UnsupportedGrantTypeExceptionRes"),xe=A(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),M2="aws_iam",RO=class extends g.Command.classBuilder().ep(Id).m(function(e,r,n,i){return[(0,kd.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(SO,NO).ser(m2).de(v2).build(){};A(RO,"CreateTokenCommand");var TO=RO,AO=class extends g.Command.classBuilder().ep(Id).m(function(e,r,n,i){return[(0,kd.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateTokenWithIAM",{}).n("SSOOIDCClient","CreateTokenWithIAMCommand").f(xO,bO).ser(h2).de(_2).build(){};A(AO,"CreateTokenWithIAMCommand");var PO=AO,IO=class extends g.Command.classBuilder().ep(Id).m(function(e,r,n,i){return[(0,kd.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","RegisterClient",{}).n("SSOOIDCClient","RegisterClientCommand").f(void 0,CO).ser(g2).de(E2).build(){};A(IO,"RegisterClientCommand");var kO=IO,DO=class extends g.Command.classBuilder().ep(Id).m(function(e,r,n,i){return[(0,kd.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vs.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","StartDeviceAuthorization",{}).n("SSOOIDCClient","StartDeviceAuthorizationCommand").f(OO,void 0).ser(y2).de(w2).build(){};A(DO,"StartDeviceAuthorizationCommand");var qO=DO,L2={CreateTokenCommand:TO,CreateTokenWithIAMCommand:PO,RegisterClientCommand:kO,StartDeviceAuthorizationCommand:qO},FO=class extends PC{};A(FO,"SSOOIDC");var MO=FO;(0,g.createAggregatedClient)(L2,MO)});var zO=v((Ple,HO)=>{"use strict";var W2=Object.create,Es=Object.defineProperty,U2=Object.getOwnPropertyDescriptor,j2=Object.getOwnPropertyNames,$2=Object.getPrototypeOf,V2=Object.prototype.hasOwnProperty,en=(t,e)=>Es(t,"name",{value:e,configurable:!0}),B2=(t,e)=>{for(var r in e)Es(t,r,{get:e[r],enumerable:!0})},jO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of j2(e))!V2.call(t,i)&&i!==r&&Es(t,i,{get:()=>e[i],enumerable:!(n=U2(e,i))||n.enumerable});return t},$O=(t,e,r)=>(r=t!=null?W2($2(t)):{},jO(e||!t||!t.__esModule?Es(r,"default",{value:t,enumerable:!0}):r,t)),H2=t=>jO(Es({},"__esModule",{value:!0}),t),VO={};B2(VO,{fromSso:()=>BO,fromStatic:()=>X2,nodeProvider:()=>Z2});HO.exports=H2(VO);var z2=5*60*1e3,Nf="To refresh this SSO session run 'aws sso login' with the corresponding profile.",G2=en(async(t,e={})=>{var r,n,i;let{SSOOIDCClient:o}=await Promise.resolve().then(()=>$O(Sf()));return new o(Object.assign({},e.clientConfig??{},{region:t??((r=e.clientConfig)==null?void 0:r.region),logger:((n=e.clientConfig)==null?void 0:n.logger)??((i=e.parentClientConfig)==null?void 0:i.logger)}))},"getSsoOidcClient"),K2=en(async(t,e,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>$O(Sf()));return(await G2(e,r)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},"getNewSsoOidcToken"),Rt=$e(),WO=en(t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new Rt.TokenProviderError(`Token is expired. ${Nf}`,!1)},"validateTokenExpiry"),An=en((t,e,r=!1)=>{if(typeof e>"u")throw new Rt.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Nf}`,!1)},"validateTokenKey"),_s=zr(),Q2=j("fs"),{writeFile:J2}=Q2.promises,Y2=en((t,e)=>{let r=(0,_s.getSSOTokenFilepath)(t),n=JSON.stringify(e,null,2);return J2(r,n)},"writeSSOTokenToFile"),UO=new Date(0),BO=en((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/token-providers - fromSso");let r=await(0,_s.parseKnownFiles)(t),n=(0,_s.getProfileName)(t),i=r[n];if(i){if(!i.sso_session)throw new Rt.TokenProviderError(`Profile '${n}' is missing required property 'sso_session'.`)}else throw new Rt.TokenProviderError(`Profile '${n}' could not be found in shared credentials file.`,!1);let o=i.sso_session,a=(await(0,_s.loadSsoSessionData)(t))[o];if(!a)throw new Rt.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!a[y])throw new Rt.TokenProviderError(`Sso session '${o}' is missing required property '${y}'.`,!1);let d=a.sso_start_url,l=a.sso_region,u;try{u=await(0,_s.getSSOTokenFromFile)(o)}catch{throw new Rt.TokenProviderError(`The SSO session token associated with profile=${n} was not found or is invalid. ${Nf}`,!1)}An("accessToken",u.accessToken),An("expiresAt",u.expiresAt);let{accessToken:p,expiresAt:m}=u,f={token:p,expiration:new Date(m)};if(f.expiration.getTime()-Date.now()>z2)return f;if(Date.now()-UO.getTime()<30*1e3)return WO(f),f;An("clientId",u.clientId,!0),An("clientSecret",u.clientSecret,!0),An("refreshToken",u.refreshToken,!0);try{UO.setTime(Date.now());let y=await K2(u,l,t);An("accessToken",y.accessToken),An("expiresIn",y.expiresIn);let S=new Date(Date.now()+y.expiresIn*1e3);try{await Y2(o,{...u,accessToken:y.accessToken,expiresAt:S.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:S}}catch{return WO(f),f}},"fromSso"),X2=en(({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new Rt.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},"fromStatic"),Z2=en((t={})=>(0,Rt.memoize)((0,Rt.chain)(BO(t),async()=>{throw new Rt.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0),"nodeProvider")});var bf=v((Ile,t0)=>{"use strict";var Fd=Object.defineProperty,e3=Object.getOwnPropertyDescriptor,QO=Object.getOwnPropertyNames,t3=Object.prototype.hasOwnProperty,Md=(t,e)=>Fd(t,"name",{value:e,configurable:!0}),r3=(t,e)=>function(){return t&&(e=(0,t[QO(t)[0]])(t=0)),e},JO=(t,e)=>{for(var r in e)Fd(t,r,{get:e[r],enumerable:!0})},n3=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of QO(e))!t3.call(t,i)&&i!==r&&Fd(t,i,{get:()=>e[i],enumerable:!(n=e3(e,i))||n.enumerable});return t},i3=t=>n3(Fd({},"__esModule",{value:!0}),t),YO={};JO(YO,{GetRoleCredentialsCommand:()=>xf.GetRoleCredentialsCommand,SSOClient:()=>xf.SSOClient});var xf,o3=r3({"src/loadSso.ts"(){"use strict";xf=Yb()}}),XO={};JO(XO,{fromSSO:()=>a3,isSsoProfile:()=>ZO,validateSsoProfile:()=>e0});t0.exports=i3(XO);var ZO=Md(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile"),GO=(Ut(),F(jr)),s3=zO(),Tt=$e(),qd=zr(),ws=!1,KO=Md(async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:i,ssoClient:o,clientConfig:s,parentClientConfig:a,profile:d,logger:l})=>{let u,p="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let fe=await(0,s3.fromSso)({profile:d})();u={accessToken:fe.token,expiresAt:new Date(fe.expiration).toISOString()}}catch(fe){throw new Tt.CredentialsProviderError(fe.message,{tryNextLink:ws,logger:l})}else try{u=await(0,qd.getSSOTokenFromFile)(t)}catch{throw new Tt.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${p}`,{tryNextLink:ws,logger:l})}if(new Date(u.expiresAt).getTime()-Date.now()<=0)throw new Tt.CredentialsProviderError(`The SSO session associated with this profile has expired. ${p}`,{tryNextLink:ws,logger:l});let{accessToken:m}=u,{SSOClient:f,GetRoleCredentialsCommand:y}=await Promise.resolve().then(()=>(o3(),YO)),S=o||new f(Object.assign({},s??{},{logger:s?.logger??a?.logger,region:s?.region??n})),E;try{E=await S.send(new y({accountId:r,roleName:i,accessToken:m}))}catch(fe){throw new Tt.CredentialsProviderError(fe,{tryNextLink:ws,logger:l})}let{roleCredentials:{accessKeyId:x,secretAccessKey:P,sessionToken:k,expiration:D,credentialScope:ie,accountId:De}={}}=E;if(!x||!P||!k||!D)throw new Tt.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:ws,logger:l});let _t={accessKeyId:x,secretAccessKey:P,sessionToken:k,expiration:new Date(D),...ie&&{credentialScope:ie},...De&&{accountId:De}};return e?(0,GO.setCredentialFeature)(_t,"CREDENTIALS_SSO","s"):(0,GO.setCredentialFeature)(_t,"CREDENTIALS_SSO_LEGACY","u"),_t},"resolveSSOCredentials"),e0=Md((t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:i,sso_role_name:o}=t;if(!r||!n||!i||!o)throw new Tt.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},"validateSsoProfile"),a3=Md((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:i,ssoRoleName:o,ssoSession:s}=t,{ssoClient:a}=t,d=(0,qd.getProfileName)(t);if(!r&&!n&&!i&&!o&&!s){let u=(await(0,qd.parseKnownFiles)(t))[d];if(!u)throw new Tt.CredentialsProviderError(`Profile ${d} was not found.`,{logger:t.logger});if(!ZO(u))throw new Tt.CredentialsProviderError(`Profile ${d} is not configured with SSO credentials.`,{logger:t.logger});if(u?.sso_session){let x=(await(0,qd.loadSsoSessionData)(t))[u.sso_session],P=` configurations in profile ${d} and sso-session ${u.sso_session}`;if(i&&i!==x.sso_region)throw new Tt.CredentialsProviderError("Conflicting SSO region"+P,{tryNextLink:!1,logger:t.logger});if(r&&r!==x.sso_start_url)throw new Tt.CredentialsProviderError("Conflicting SSO start_url"+P,{tryNextLink:!1,logger:t.logger});u.sso_region=x.sso_region,u.sso_start_url=x.sso_start_url}let{sso_start_url:p,sso_account_id:m,sso_region:f,sso_role_name:y,sso_session:S}=e0(u,t.logger);return KO({ssoStartUrl:p,ssoSession:S,ssoAccountId:m,ssoRegion:f,ssoRoleName:y,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:d})}else{if(!r||!n||!i||!o)throw new Tt.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return KO({ssoStartUrl:r,ssoSession:s,ssoAccountId:n,ssoRegion:i,ssoRoleName:o,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:d})}},"fromSSO")});var Cf=v(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.resolveHttpAuthSchemeConfig=At.resolveStsAuthConfig=At.defaultSTSHttpAuthSchemeProvider=At.defaultSTSHttpAuthSchemeParametersProvider=void 0;var c3=(Ne(),F(Se)),r0=Nt(),d3=Ss(),l3=async(t,e,r)=>({operation:(0,r0.getSmithyContext)(e).operation,region:await(0,r0.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});At.defaultSTSHttpAuthSchemeParametersProvider=l3;function u3(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function n0(t){return{schemeId:"smithy.api#noAuth"}}var p3=t=>{let e=[];switch(t.operation){case"AssumeRoleWithSAML":{e.push(n0(t));break}case"AssumeRoleWithWebIdentity":{e.push(n0(t));break}default:e.push(u3(t))}return e};At.defaultSTSHttpAuthSchemeProvider=p3;var f3=t=>({...t,stsClientCtor:d3.STSClient});At.resolveStsAuthConfig=f3;var m3=t=>{let e=(0,At.resolveStsAuthConfig)(t);return{...(0,c3.resolveAwsSdkSigV4Config)(e)}};At.resolveHttpAuthSchemeConfig=m3});var ht=v(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.commonParams=Mi.resolveClientEndpointParameters=void 0;var h3=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"});Mi.resolveClientEndpointParameters=h3;Mi.commonParams={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var i0=v((qle,g3)=>{g3.exports={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.699.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sts","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"rimraf ./dist-types tsconfig.types.tsbuildinfo && tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.699.0","@aws-sdk/core":"3.696.0","@aws-sdk/credential-provider-node":"3.699.0","@aws-sdk/middleware-host-header":"3.696.0","@aws-sdk/middleware-logger":"3.696.0","@aws-sdk/middleware-recursion-detection":"3.696.0","@aws-sdk/middleware-user-agent":"3.696.0","@aws-sdk/region-config-resolver":"3.696.0","@aws-sdk/types":"3.696.0","@aws-sdk/util-endpoints":"3.696.0","@aws-sdk/util-user-agent-browser":"3.696.0","@aws-sdk/util-user-agent-node":"3.696.0","@smithy/config-resolver":"^3.0.12","@smithy/core":"^2.5.3","@smithy/fetch-http-handler":"^4.1.1","@smithy/hash-node":"^3.0.10","@smithy/invalid-dependency":"^3.0.10","@smithy/middleware-content-length":"^3.0.12","@smithy/middleware-endpoint":"^3.2.3","@smithy/middleware-retry":"^3.0.27","@smithy/middleware-serde":"^3.0.10","@smithy/middleware-stack":"^3.0.10","@smithy/node-config-provider":"^3.1.11","@smithy/node-http-handler":"^3.3.1","@smithy/protocol-http":"^4.1.7","@smithy/smithy-client":"^3.4.4","@smithy/types":"^3.7.1","@smithy/url-parser":"^3.0.10","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.27","@smithy/util-defaults-mode-node":"^3.0.27","@smithy/util-endpoints":"^2.1.6","@smithy/util-middleware":"^3.0.10","@smithy/util-retry":"^3.0.10","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},engines:{node:">=16.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}}});var C0=v(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.ruleSet=void 0;var g0="required",M="type",$="fn",V="argv",rn="ref",o0=!1,Of=!0,tn="booleanEquals",Ae="stringEquals",y0="sigv4",v0="sts",_0="us-east-1",X="endpoint",s0="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ht="tree",Li="error",Tf="getAttr",a0={[g0]:!1,[M]:"String"},Rf={[g0]:!0,default:!1,[M]:"Boolean"},E0={[rn]:"Endpoint"},c0={[$]:"isSet",[V]:[{[rn]:"Region"}]},Pe={[rn]:"Region"},d0={[$]:"aws.partition",[V]:[Pe],assign:"PartitionResult"},w0={[rn]:"UseFIPS"},S0={[rn]:"UseDualStack"},Le={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:y0,signingName:v0,signingRegion:_0}]},headers:{}},nt={},l0={conditions:[{[$]:Ae,[V]:[Pe,"aws-global"]}],[X]:Le,[M]:X},N0={[$]:tn,[V]:[w0,!0]},x0={[$]:tn,[V]:[S0,!0]},u0={[$]:Tf,[V]:[{[rn]:"PartitionResult"},"supportsFIPS"]},b0={[rn]:"PartitionResult"},p0={[$]:tn,[V]:[!0,{[$]:Tf,[V]:[b0,"supportsDualStack"]}]},f0=[{[$]:"isSet",[V]:[E0]}],m0=[N0],h0=[x0],y3={version:"1.0",parameters:{Region:a0,UseDualStack:Rf,UseFIPS:Rf,Endpoint:a0,UseGlobalEndpoint:Rf},rules:[{conditions:[{[$]:tn,[V]:[{[rn]:"UseGlobalEndpoint"},Of]},{[$]:"not",[V]:f0},c0,d0,{[$]:tn,[V]:[w0,o0]},{[$]:tn,[V]:[S0,o0]}],rules:[{conditions:[{[$]:Ae,[V]:[Pe,"ap-northeast-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"ap-south-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"ap-southeast-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"ap-southeast-2"]}],endpoint:Le,[M]:X},l0,{conditions:[{[$]:Ae,[V]:[Pe,"ca-central-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"eu-central-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"eu-north-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"eu-west-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"eu-west-2"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"eu-west-3"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"sa-east-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,_0]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"us-east-2"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"us-west-1"]}],endpoint:Le,[M]:X},{conditions:[{[$]:Ae,[V]:[Pe,"us-west-2"]}],endpoint:Le,[M]:X},{endpoint:{url:s0,properties:{authSchemes:[{name:y0,signingName:v0,signingRegion:"{Region}"}]},headers:nt},[M]:X}],[M]:Ht},{conditions:f0,rules:[{conditions:m0,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[M]:Li},{conditions:h0,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[M]:Li},{endpoint:{url:E0,properties:nt,headers:nt},[M]:X}],[M]:Ht},{conditions:[c0],rules:[{conditions:[d0],rules:[{conditions:[N0,x0],rules:[{conditions:[{[$]:tn,[V]:[Of,u0]},p0],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:nt,headers:nt},[M]:X}],[M]:Ht},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[M]:Li}],[M]:Ht},{conditions:m0,rules:[{conditions:[{[$]:tn,[V]:[u0,Of]}],rules:[{conditions:[{[$]:Ae,[V]:[{[$]:Tf,[V]:[b0,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:nt,headers:nt},[M]:X},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:nt,headers:nt},[M]:X}],[M]:Ht},{error:"FIPS is enabled but this partition does not support FIPS",[M]:Li}],[M]:Ht},{conditions:h0,rules:[{conditions:[p0],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:nt,headers:nt},[M]:X}],[M]:Ht},{error:"DualStack is enabled but this partition does not support DualStack",[M]:Li}],[M]:Ht},l0,{endpoint:{url:s0,properties:nt,headers:nt},[M]:X}],[M]:Ht}],[M]:Ht},{error:"Invalid Configuration: Missing Region",[M]:Li}]};Ld.ruleSet=y3});var O0=v(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.defaultEndpointResolver=void 0;var v3=ci(),Af=si(),_3=C0(),E3=new Af.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),w3=(t,e={})=>E3.get(t,()=>(0,Af.resolveEndpoint)(_3.ruleSet,{endpointParams:t,logger:e.logger}));Wd.defaultEndpointResolver=w3;Af.customEndpointFunctions.aws=v3.awsEndpointFunctions});var A0=v(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.getRuntimeConfig=void 0;var S3=(Ne(),F(Se)),N3=(rt(),F(xt)),x3=Y(),b3=On(),R0=Lt(),T0=tt(),C3=Cf(),O3=O0(),R3=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??R0.fromBase64,base64Encoder:t?.base64Encoder??R0.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??O3.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??C3.defaultSTSHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new S3.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new N3.NoAuthSigner}],logger:t?.logger??new x3.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??b3.parseUrl,utf8Decoder:t?.utf8Decoder??T0.fromUtf8,utf8Encoder:t?.utf8Encoder??T0.toUtf8});Ud.getRuntimeConfig=R3});var F0=v($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.getRuntimeConfig=void 0;var T3=(Ni(),F(Si)),A3=T3.__importDefault(i0()),P0=(Ne(),F(Se)),I0=Td(),k0=cs(),jd=Vt(),P3=(rt(),F(xt)),I3=ds(),D0=ur(),Wi=Gr(),q0=yn(),k3=ls(),D3=_i(),q3=A0(),F3=Y(),M3=fs(),L3=Y(),W3=t=>{(0,L3.emitWarningIfUnsupportedVersion)(process.version);let e=(0,M3.resolveDefaultsModeConfig)(t),r=()=>e().then(F3.loadConfigsForDefaultMode),n=(0,q3.getRuntimeConfig)(t);return(0,P0.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??k3.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??I0.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,k0.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:A3.default.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await(0,I0.defaultProvider)(o?.__config||{})()),signer:new P0.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new P3.NoAuthSigner}],maxAttempts:t?.maxAttempts??(0,Wi.loadConfig)(D0.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Wi.loadConfig)(jd.NODE_REGION_CONFIG_OPTIONS,jd.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:q0.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Wi.loadConfig)({...D0.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||D3.DEFAULT_RETRY_MODE}),sha256:t?.sha256??I3.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??q0.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Wi.loadConfig)(jd.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Wi.loadConfig)(jd.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:t?.userAgentAppId??(0,Wi.loadConfig)(k0.NODE_APP_ID_CONFIG_OPTIONS)}};$d.getRuntimeConfig=W3});var M0=v(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.resolveHttpAuthRuntimeConfig=Ui.getHttpAuthExtensionConfiguration=void 0;var U3=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(i){let o=e.findIndex(s=>s.schemeId===i.schemeId);o===-1?e.push(i):e.splice(o,1,i)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}};Ui.getHttpAuthExtensionConfiguration=U3;var j3=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()});Ui.resolveHttpAuthRuntimeConfig=j3});var $0=v(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.resolveRuntimeExtensions=void 0;var L0=ms(),W0=de(),U0=Y(),j0=M0(),Vd=t=>t,$3=(t,e)=>{let r={...Vd((0,L0.getAwsRegionExtensionConfiguration)(t)),...Vd((0,U0.getDefaultExtensionConfiguration)(t)),...Vd((0,W0.getHttpHandlerExtensionConfiguration)(t)),...Vd((0,j0.getHttpAuthExtensionConfiguration)(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,L0.resolveAwsRegionExtensionConfiguration)(r),...(0,U0.resolveDefaultRuntimeConfig)(r),...(0,W0.resolveHttpHandlerRuntimeConfig)(r),...(0,j0.resolveHttpAuthRuntimeConfig)(r)}};Bd.resolveRuntimeExtensions=$3});var Ss=v(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.STSClient=ji.__Client=void 0;var V0=Lo(),V3=Wo(),B3=Uo(),B0=mi(),H3=Vt(),Pf=(rt(),F(xt)),z3=Xo(),G3=yi(),H0=ur(),G0=Y();Object.defineProperty(ji,"__Client",{enumerable:!0,get:function(){return G0.Client}});var z0=Cf(),K3=ht(),Q3=F0(),J3=$0(),If=class extends G0.Client{constructor(...[e]){let r=(0,Q3.getRuntimeConfig)(e||{}),n=(0,K3.resolveClientEndpointParameters)(r),i=(0,B0.resolveUserAgentConfig)(n),o=(0,H0.resolveRetryConfig)(i),s=(0,H3.resolveRegionConfig)(o),a=(0,V0.resolveHostHeaderConfig)(s),d=(0,G3.resolveEndpointConfig)(a),l=(0,z0.resolveHttpAuthSchemeConfig)(d),u=(0,J3.resolveRuntimeExtensions)(l,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,B0.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,H0.getRetryPlugin)(this.config)),this.middlewareStack.use((0,z3.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,V0.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,V3.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,B3.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Pf.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:z0.defaultSTSHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new Pf.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,Pf.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};ji.STSClient=If});var hm=v((Zle,mm)=>{"use strict";var Hd=Object.defineProperty,Y3=Object.getOwnPropertyDescriptor,X3=Object.getOwnPropertyNames,Z3=Object.prototype.hasOwnProperty,_=(t,e)=>Hd(t,"name",{value:e,configurable:!0}),eG=(t,e)=>{for(var r in e)Hd(t,r,{get:e[r],enumerable:!0})},cm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of X3(e))!Z3.call(t,i)&&i!==r&&Hd(t,i,{get:()=>e[i],enumerable:!(n=Y3(e,i))||n.enumerable});return t},tG=(t,e,r)=>(cm(t,e,"default"),r&&cm(r,e,"default")),rG=t=>cm(Hd({},"__esModule",{value:!0}),t),lm={};eG(lm,{AssumeRoleCommand:()=>pm,AssumeRoleResponseFilterSensitiveLog:()=>SR,AssumeRoleWithSAMLCommand:()=>DR,AssumeRoleWithSAMLRequestFilterSensitiveLog:()=>NR,AssumeRoleWithSAMLResponseFilterSensitiveLog:()=>xR,AssumeRoleWithWebIdentityCommand:()=>fm,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>bR,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>CR,AssumeRootCommand:()=>MR,AssumeRootResponseFilterSensitiveLog:()=>OR,ClientInputEndpointParameters:()=>T6.ClientInputEndpointParameters,CredentialsFilterSensitiveLog:()=>Pn,DecodeAuthorizationMessageCommand:()=>WR,ExpiredTokenException:()=>eR,GetAccessKeyInfoCommand:()=>jR,GetCallerIdentityCommand:()=>VR,GetFederationTokenCommand:()=>HR,GetFederationTokenResponseFilterSensitiveLog:()=>RR,GetSessionTokenCommand:()=>GR,GetSessionTokenResponseFilterSensitiveLog:()=>TR,IDPCommunicationErrorException:()=>vR,IDPRejectedClaimException:()=>pR,InvalidAuthorizationMessageException:()=>wR,InvalidIdentityTokenException:()=>hR,MalformedPolicyDocumentException:()=>nR,PackedPolicyTooLargeException:()=>sR,RegionDisabledException:()=>dR,STS:()=>QR,STSServiceException:()=>zt,decorateDefaultCredentialProvider:()=>I6,getDefaultRoleAssumer:()=>tT,getDefaultRoleAssumerWithWebIdentity:()=>rT});mm.exports=rG(lm);tG(lm,Ss(),mm.exports);var vr=yi(),_r=gn(),nG=ht(),O=Y(),J0=class Y0 extends O.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,Y0.prototype)}};_(J0,"STSServiceException");var zt=J0,X0=class Z0 extends zt{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Z0.prototype)}};_(X0,"ExpiredTokenException");var eR=X0,tR=class rR extends zt{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,rR.prototype)}};_(tR,"MalformedPolicyDocumentException");var nR=tR,iR=class oR extends zt{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,oR.prototype)}};_(iR,"PackedPolicyTooLargeException");var sR=iR,aR=class cR extends zt{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,cR.prototype)}};_(aR,"RegionDisabledException");var dR=aR,lR=class uR extends zt{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,uR.prototype)}};_(lR,"IDPRejectedClaimException");var pR=lR,fR=class mR extends zt{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,mR.prototype)}};_(fR,"InvalidIdentityTokenException");var hR=fR,gR=class yR extends zt{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,yR.prototype)}};_(gR,"IDPCommunicationErrorException");var vR=gR,_R=class ER extends zt{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,ER.prototype)}};_(_R,"InvalidAuthorizationMessageException");var wR=_R,Pn=_(t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:O.SENSITIVE_STRING}}),"CredentialsFilterSensitiveLog"),SR=_(t=>({...t,...t.Credentials&&{Credentials:Pn(t.Credentials)}}),"AssumeRoleResponseFilterSensitiveLog"),NR=_(t=>({...t,...t.SAMLAssertion&&{SAMLAssertion:O.SENSITIVE_STRING}}),"AssumeRoleWithSAMLRequestFilterSensitiveLog"),xR=_(t=>({...t,...t.Credentials&&{Credentials:Pn(t.Credentials)}}),"AssumeRoleWithSAMLResponseFilterSensitiveLog"),bR=_(t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:O.SENSITIVE_STRING}}),"AssumeRoleWithWebIdentityRequestFilterSensitiveLog"),CR=_(t=>({...t,...t.Credentials&&{Credentials:Pn(t.Credentials)}}),"AssumeRoleWithWebIdentityResponseFilterSensitiveLog"),OR=_(t=>({...t,...t.Credentials&&{Credentials:Pn(t.Credentials)}}),"AssumeRootResponseFilterSensitiveLog"),RR=_(t=>({...t,...t.Credentials&&{Credentials:Pn(t.Credentials)}}),"GetFederationTokenResponseFilterSensitiveLog"),TR=_(t=>({...t,...t.Credentials&&{Credentials:Pn(t.Credentials)}}),"GetSessionTokenResponseFilterSensitiveLog"),Gt=(Ne(),F(Se)),iG=de(),oG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...PG(t,e),[xr]:d6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_AssumeRoleCommand"),sG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...IG(t,e),[xr]:l6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_AssumeRoleWithSAMLCommand"),aG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...kG(t,e),[xr]:u6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_AssumeRoleWithWebIdentityCommand"),cG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...DG(t,e),[xr]:p6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_AssumeRootCommand"),dG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...qG(t,e),[xr]:f6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_DecodeAuthorizationMessageCommand"),lG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...FG(t,e),[xr]:m6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_GetAccessKeyInfoCommand"),uG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...MG(t,e),[xr]:h6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_GetCallerIdentityCommand"),pG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...LG(t,e),[xr]:g6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_GetFederationTokenCommand"),fG=_(async(t,e)=>{let r=Sr,n;return n=Cr({...WG(t,e),[xr]:y6,[br]:Nr}),wr(e,r,"/",void 0,n)},"se_GetSessionTokenCommand"),mG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=BG(r.AssumeRoleResult,e),{$metadata:Ie(t),...n}},"de_AssumeRoleCommand"),hG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=HG(r.AssumeRoleWithSAMLResult,e),{$metadata:Ie(t),...n}},"de_AssumeRoleWithSAMLCommand"),gG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=zG(r.AssumeRoleWithWebIdentityResult,e),{$metadata:Ie(t),...n}},"de_AssumeRoleWithWebIdentityCommand"),yG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=GG(r.AssumeRootResult,e),{$metadata:Ie(t),...n}},"de_AssumeRootCommand"),vG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=KG(r.DecodeAuthorizationMessageResult,e),{$metadata:Ie(t),...n}},"de_DecodeAuthorizationMessageCommand"),_G=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=YG(r.GetAccessKeyInfoResult,e),{$metadata:Ie(t),...n}},"de_GetAccessKeyInfoCommand"),EG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=XG(r.GetCallerIdentityResult,e),{$metadata:Ie(t),...n}},"de_GetCallerIdentityCommand"),wG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=ZG(r.GetFederationTokenResult,e),{$metadata:Ie(t),...n}},"de_GetFederationTokenCommand"),SG=_(async(t,e)=>{if(t.statusCode>=300)return Er(t,e);let r=await(0,Gt.parseXmlBody)(t.body,e),n={};return n=e6(r.GetSessionTokenResult,e),{$metadata:Ie(t),...n}},"de_GetSessionTokenCommand"),Er=_(async(t,e)=>{let r={...t,body:await(0,Gt.parseXmlErrorBody)(t.body,e)},n=v6(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await NG(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await RG(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await TG(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await AG(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await bG(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await OG(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await xG(r,e);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await CG(r,e);default:let i=r.body;return c6({output:t,parsedBody:i.Error,errorCode:n})}},"de_CommandError"),NG=_(async(t,e)=>{let r=t.body,n=QG(r.Error,e),i=new eR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_ExpiredTokenExceptionRes"),xG=_(async(t,e)=>{let r=t.body,n=t6(r.Error,e),i=new vR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_IDPCommunicationErrorExceptionRes"),bG=_(async(t,e)=>{let r=t.body,n=r6(r.Error,e),i=new pR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_IDPRejectedClaimExceptionRes"),CG=_(async(t,e)=>{let r=t.body,n=n6(r.Error,e),i=new wR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_InvalidAuthorizationMessageExceptionRes"),OG=_(async(t,e)=>{let r=t.body,n=i6(r.Error,e),i=new hR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_InvalidIdentityTokenExceptionRes"),RG=_(async(t,e)=>{let r=t.body,n=o6(r.Error,e),i=new nR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_MalformedPolicyDocumentExceptionRes"),TG=_(async(t,e)=>{let r=t.body,n=s6(r.Error,e),i=new sR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_PackedPolicyTooLargeExceptionRes"),AG=_(async(t,e)=>{let r=t.body,n=a6(r.Error,e),i=new dR({$metadata:Ie(t),...n});return(0,O.decorateServiceException)(i,r)},"de_RegionDisabledExceptionRes"),PG=_((t,e)=>{var r,n,i,o;let s={};if(t[yr]!=null&&(s[yr]=t[yr]),t[Hi]!=null&&(s[Hi]=t[Hi]),t[yt]!=null){let a=zd(t[yt],e);((r=t[yt])==null?void 0:r.length)===0&&(s.PolicyArns=[]),Object.entries(a).forEach(([d,l])=>{let u=`PolicyArns.${d}`;s[u]=l})}if(t[gt]!=null&&(s[gt]=t[gt]),t[Ce]!=null&&(s[Ce]=t[Ce]),t[Gi]!=null){let a=PR(t[Gi],e);((n=t[Gi])==null?void 0:n.length)===0&&(s.Tags=[]),Object.entries(a).forEach(([d,l])=>{let u=`Tags.${d}`;s[u]=l})}if(t[nm]!=null){let a=VG(t[nm],e);((i=t[nm])==null?void 0:i.length)===0&&(s.TransitiveTagKeys=[]),Object.entries(a).forEach(([d,l])=>{let u=`TransitiveTagKeys.${d}`;s[u]=l})}if(t[Mf]!=null&&(s[Mf]=t[Mf]),t[zi]!=null&&(s[zi]=t[zi]),t[Ki]!=null&&(s[Ki]=t[Ki]),t[Be]!=null&&(s[Be]=t[Be]),t[Gf]!=null){let a=jG(t[Gf],e);((o=t[Gf])==null?void 0:o.length)===0&&(s.ProvidedContexts=[]),Object.entries(a).forEach(([d,l])=>{let u=`ProvidedContexts.${d}`;s[u]=l})}return s},"se_AssumeRoleRequest"),IG=_((t,e)=>{var r;let n={};if(t[yr]!=null&&(n[yr]=t[yr]),t[Hf]!=null&&(n[Hf]=t[Hf]),t[Xf]!=null&&(n[Xf]=t[Xf]),t[yt]!=null){let i=zd(t[yt],e);((r=t[yt])==null?void 0:r.length)===0&&(n.PolicyArns=[]),Object.entries(i).forEach(([o,s])=>{let a=`PolicyArns.${o}`;n[a]=s})}return t[gt]!=null&&(n[gt]=t[gt]),t[Ce]!=null&&(n[Ce]=t[Ce]),n},"se_AssumeRoleWithSAMLRequest"),kG=_((t,e)=>{var r;let n={};if(t[yr]!=null&&(n[yr]=t[yr]),t[Hi]!=null&&(n[Hi]=t[Hi]),t[sm]!=null&&(n[sm]=t[sm]),t[Kf]!=null&&(n[Kf]=t[Kf]),t[yt]!=null){let i=zd(t[yt],e);((r=t[yt])==null?void 0:r.length)===0&&(n.PolicyArns=[]),Object.entries(i).forEach(([o,s])=>{let a=`PolicyArns.${o}`;n[a]=s})}return t[gt]!=null&&(n[gt]=t[gt]),t[Ce]!=null&&(n[Ce]=t[Ce]),n},"se_AssumeRoleWithWebIdentityRequest"),DG=_((t,e)=>{let r={};if(t[rm]!=null&&(r[rm]=t[rm]),t[K0]!=null){let n=AR(t[K0],e);Object.entries(n).forEach(([i,o])=>{let s=`TaskPolicyArn.${i}`;r[s]=o})}return t[Ce]!=null&&(r[Ce]=t[Ce]),r},"se_AssumeRootRequest"),qG=_((t,e)=>{let r={};return t[Lf]!=null&&(r[Lf]=t[Lf]),r},"se_DecodeAuthorizationMessageRequest"),FG=_((t,e)=>{let r={};return t[$i]!=null&&(r[$i]=t[$i]),r},"se_GetAccessKeyInfoRequest"),MG=_((t,e)=>({}),"se_GetCallerIdentityRequest"),LG=_((t,e)=>{var r,n;let i={};if(t[Vf]!=null&&(i[Vf]=t[Vf]),t[gt]!=null&&(i[gt]=t[gt]),t[yt]!=null){let o=zd(t[yt],e);((r=t[yt])==null?void 0:r.length)===0&&(i.PolicyArns=[]),Object.entries(o).forEach(([s,a])=>{let d=`PolicyArns.${s}`;i[d]=a})}if(t[Ce]!=null&&(i[Ce]=t[Ce]),t[Gi]!=null){let o=PR(t[Gi],e);((n=t[Gi])==null?void 0:n.length)===0&&(i.Tags=[]),Object.entries(o).forEach(([s,a])=>{let d=`Tags.${s}`;i[d]=a})}return i},"se_GetFederationTokenRequest"),WG=_((t,e)=>{let r={};return t[Ce]!=null&&(r[Ce]=t[Ce]),t[zi]!=null&&(r[zi]=t[zi]),t[Ki]!=null&&(r[Ki]=t[Ki]),r},"se_GetSessionTokenRequest"),zd=_((t,e)=>{let r={},n=1;for(let i of t){if(i===null)continue;let o=AR(i,e);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},"se_policyDescriptorListType"),AR=_((t,e)=>{let r={};return t[am]!=null&&(r[am]=t[am]),r},"se_PolicyDescriptorType"),UG=_((t,e)=>{let r={};return t[zf]!=null&&(r[zf]=t[zf]),t[Df]!=null&&(r[Df]=t[Df]),r},"se_ProvidedContext"),jG=_((t,e)=>{let r={},n=1;for(let i of t){if(i===null)continue;let o=UG(i,e);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},"se_ProvidedContextsListType"),$G=_((t,e)=>{let r={};return t[$f]!=null&&(r[$f]=t[$f]),t[om]!=null&&(r[om]=t[om]),r},"se_Tag"),VG=_((t,e)=>{let r={},n=1;for(let i of t)i!==null&&(r[`member.${n}`]=i,n++);return r},"se_tagKeyListType"),PR=_((t,e)=>{let r={},n=1;for(let i of t){if(i===null)continue;let o=$G(i,e);Object.entries(o).forEach(([s,a])=>{r[`member.${n}.${s}`]=a}),n++}return r},"se_tagListType"),um=_((t,e)=>{let r={};return t[kf]!=null&&(r[kf]=(0,O.expectString)(t[kf])),t[gr]!=null&&(r[gr]=(0,O.expectString)(t[gr])),r},"de_AssumedRoleUser"),BG=_((t,e)=>{let r={};return t[be]!=null&&(r[be]=Qi(t[be],e)),t[hr]!=null&&(r[hr]=um(t[hr],e)),t[vt]!=null&&(r[vt]=(0,O.strictParseInt32)(t[vt])),t[Be]!=null&&(r[Be]=(0,O.expectString)(t[Be])),r},"de_AssumeRoleResponse"),HG=_((t,e)=>{let r={};return t[be]!=null&&(r[be]=Qi(t[be],e)),t[hr]!=null&&(r[hr]=um(t[hr],e)),t[vt]!=null&&(r[vt]=(0,O.strictParseInt32)(t[vt])),t[Jf]!=null&&(r[Jf]=(0,O.expectString)(t[Jf])),t[em]!=null&&(r[em]=(0,O.expectString)(t[em])),t[jf]!=null&&(r[jf]=(0,O.expectString)(t[jf])),t[Bi]!=null&&(r[Bi]=(0,O.expectString)(t[Bi])),t[Bf]!=null&&(r[Bf]=(0,O.expectString)(t[Bf])),t[Be]!=null&&(r[Be]=(0,O.expectString)(t[Be])),r},"de_AssumeRoleWithSAMLResponse"),zG=_((t,e)=>{let r={};return t[be]!=null&&(r[be]=Qi(t[be],e)),t[Zf]!=null&&(r[Zf]=(0,O.expectString)(t[Zf])),t[hr]!=null&&(r[hr]=um(t[hr],e)),t[vt]!=null&&(r[vt]=(0,O.strictParseInt32)(t[vt])),t[Qf]!=null&&(r[Qf]=(0,O.expectString)(t[Qf])),t[Bi]!=null&&(r[Bi]=(0,O.expectString)(t[Bi])),t[Be]!=null&&(r[Be]=(0,O.expectString)(t[Be])),r},"de_AssumeRoleWithWebIdentityResponse"),GG=_((t,e)=>{let r={};return t[be]!=null&&(r[be]=Qi(t[be],e)),t[Be]!=null&&(r[Be]=(0,O.expectString)(t[Be])),r},"de_AssumeRootResponse"),Qi=_((t,e)=>{let r={};return t[$i]!=null&&(r[$i]=(0,O.expectString)(t[$i])),t[Yf]!=null&&(r[Yf]=(0,O.expectString)(t[Yf])),t[tm]!=null&&(r[tm]=(0,O.expectString)(t[tm])),t[Ff]!=null&&(r[Ff]=(0,O.expectNonNull)((0,O.parseRfc3339DateTimeWithOffset)(t[Ff]))),r},"de_Credentials"),KG=_((t,e)=>{let r={};return t[qf]!=null&&(r[qf]=(0,O.expectString)(t[qf])),r},"de_DecodeAuthorizationMessageResponse"),QG=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_ExpiredTokenException"),JG=_((t,e)=>{let r={};return t[Uf]!=null&&(r[Uf]=(0,O.expectString)(t[Uf])),t[gr]!=null&&(r[gr]=(0,O.expectString)(t[gr])),r},"de_FederatedUser"),YG=_((t,e)=>{let r={};return t[Vi]!=null&&(r[Vi]=(0,O.expectString)(t[Vi])),r},"de_GetAccessKeyInfoResponse"),XG=_((t,e)=>{let r={};return t[im]!=null&&(r[im]=(0,O.expectString)(t[im])),t[Vi]!=null&&(r[Vi]=(0,O.expectString)(t[Vi])),t[gr]!=null&&(r[gr]=(0,O.expectString)(t[gr])),r},"de_GetCallerIdentityResponse"),ZG=_((t,e)=>{let r={};return t[be]!=null&&(r[be]=Qi(t[be],e)),t[Wf]!=null&&(r[Wf]=JG(t[Wf],e)),t[vt]!=null&&(r[vt]=(0,O.strictParseInt32)(t[vt])),r},"de_GetFederationTokenResponse"),e6=_((t,e)=>{let r={};return t[be]!=null&&(r[be]=Qi(t[be],e)),r},"de_GetSessionTokenResponse"),t6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_IDPCommunicationErrorException"),r6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_IDPRejectedClaimException"),n6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_InvalidAuthorizationMessageException"),i6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_InvalidIdentityTokenException"),o6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_MalformedPolicyDocumentException"),s6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_PackedPolicyTooLargeException"),a6=_((t,e)=>{let r={};return t[Z]!=null&&(r[Z]=(0,O.expectString)(t[Z])),r},"de_RegionDisabledException"),Ie=_(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),c6=(0,O.withBaseException)(zt),wr=_(async(t,e,r,n,i)=>{let{hostname:o,protocol:s="https",port:a,path:d}=await t.endpoint(),l={protocol:s,hostname:o,port:a,method:"POST",path:d.endsWith("/")?d.slice(0,-1)+r:d+r,headers:e};return n!==void 0&&(l.hostname=n),i!==void 0&&(l.body=i),new iG.HttpRequest(l)},"buildHttpRpcRequest"),Sr={"content-type":"application/x-www-form-urlencoded"},Nr="2011-06-15",xr="Action",$i="AccessKeyId",d6="AssumeRole",kf="AssumedRoleId",hr="AssumedRoleUser",l6="AssumeRoleWithSAML",u6="AssumeRoleWithWebIdentity",p6="AssumeRoot",Vi="Account",gr="Arn",Bi="Audience",be="Credentials",Df="ContextAssertion",f6="DecodeAuthorizationMessage",qf="DecodedMessage",Ce="DurationSeconds",Ff="Expiration",Mf="ExternalId",Lf="EncodedMessage",Wf="FederatedUser",Uf="FederatedUserId",m6="GetAccessKeyInfo",h6="GetCallerIdentity",g6="GetFederationToken",y6="GetSessionToken",jf="Issuer",$f="Key",Vf="Name",Bf="NameQualifier",gt="Policy",yt="PolicyArns",Hf="PrincipalArn",zf="ProviderArn",Gf="ProvidedContexts",Kf="ProviderId",vt="PackedPolicySize",Qf="Provider",yr="RoleArn",Hi="RoleSessionName",Jf="Subject",Yf="SecretAccessKey",Xf="SAMLAssertion",Zf="SubjectFromWebIdentityToken",Be="SourceIdentity",zi="SerialNumber",em="SubjectType",tm="SessionToken",Gi="Tags",Ki="TokenCode",rm="TargetPrincipal",K0="TaskPolicyArn",nm="TransitiveTagKeys",im="UserId",br="Version",om="Value",sm="WebIdentityToken",am="arn",Z="message",Cr=_(t=>Object.entries(t).map(([e,r])=>(0,O.extendedEncodeURIComponent)(e)+"="+(0,O.extendedEncodeURIComponent)(r)).join("&"),"buildFormUrlencodedString"),v6=_((t,e)=>{var r;if(((r=e.Error)==null?void 0:r.Code)!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"},"loadQueryErrorCode"),IR=class extends O.Command.classBuilder().ep(nG.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,SR).ser(oG).de(mG).build(){};_(IR,"AssumeRoleCommand");var pm=IR,_6=ht(),kR=class extends O.Command.classBuilder().ep(_6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithSAML",{}).n("STSClient","AssumeRoleWithSAMLCommand").f(NR,xR).ser(sG).de(hG).build(){};_(kR,"AssumeRoleWithSAMLCommand");var DR=kR,E6=ht(),qR=class extends O.Command.classBuilder().ep(E6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(bR,CR).ser(aG).de(gG).build(){};_(qR,"AssumeRoleWithWebIdentityCommand");var fm=qR,w6=ht(),FR=class extends O.Command.classBuilder().ep(w6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoot",{}).n("STSClient","AssumeRootCommand").f(void 0,OR).ser(cG).de(yG).build(){};_(FR,"AssumeRootCommand");var MR=FR,S6=ht(),LR=class extends O.Command.classBuilder().ep(S6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","DecodeAuthorizationMessage",{}).n("STSClient","DecodeAuthorizationMessageCommand").f(void 0,void 0).ser(dG).de(vG).build(){};_(LR,"DecodeAuthorizationMessageCommand");var WR=LR,N6=ht(),UR=class extends O.Command.classBuilder().ep(N6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetAccessKeyInfo",{}).n("STSClient","GetAccessKeyInfoCommand").f(void 0,void 0).ser(lG).de(_G).build(){};_(UR,"GetAccessKeyInfoCommand");var jR=UR,x6=ht(),$R=class extends O.Command.classBuilder().ep(x6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetCallerIdentity",{}).n("STSClient","GetCallerIdentityCommand").f(void 0,void 0).ser(uG).de(EG).build(){};_($R,"GetCallerIdentityCommand");var VR=$R,b6=ht(),BR=class extends O.Command.classBuilder().ep(b6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetFederationToken",{}).n("STSClient","GetFederationTokenCommand").f(void 0,RR).ser(pG).de(wG).build(){};_(BR,"GetFederationTokenCommand");var HR=BR,C6=ht(),zR=class extends O.Command.classBuilder().ep(C6.commonParams).m(function(e,r,n,i){return[(0,_r.getSerdePlugin)(n,this.serialize,this.deserialize),(0,vr.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","GetSessionToken",{}).n("STSClient","GetSessionTokenCommand").f(void 0,TR).ser(fG).de(SG).build(){};_(zR,"GetSessionTokenCommand");var GR=zR,O6=Ss(),R6={AssumeRoleCommand:pm,AssumeRoleWithSAMLCommand:DR,AssumeRoleWithWebIdentityCommand:fm,AssumeRootCommand:MR,DecodeAuthorizationMessageCommand:WR,GetAccessKeyInfoCommand:jR,GetCallerIdentityCommand:VR,GetFederationTokenCommand:HR,GetSessionTokenCommand:GR},KR=class extends O6.STSClient{};_(KR,"STS");var QR=KR;(0,O.createAggregatedClient)(R6,QR);var T6=ht(),dm=(Ut(),F(jr)),Q0="us-east-1",JR=_(t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},"getAccountIdFromAssumedRoleUser"),YR=_(async(t,e,r)=>{var n;let i=typeof t=="function"?await t():t,o=typeof e=="function"?await e():e;return(n=r?.debug)==null||n.call(r,"@aws-sdk/client-sts::resolveRegion","accepting first of:",`${i} (provider)`,`${o} (parent client)`,`${Q0} (STS default)`),i??o??Q0},"resolveRegion"),A6=_((t,e)=>{let r,n;return async(i,o)=>{var s,a,d;if(n=i,!r){let{logger:f=(s=t?.parentClientConfig)==null?void 0:s.logger,region:y,requestHandler:S=(a=t?.parentClientConfig)==null?void 0:a.requestHandler,credentialProviderLogger:E}=t,x=await YR(y,(d=t?.parentClientConfig)==null?void 0:d.region,E),P=!XR(S);r=new e({credentialDefaultProvider:()=>async()=>n,region:x,requestHandler:P?S:void 0,logger:f})}let{Credentials:l,AssumedRoleUser:u}=await r.send(new pm(o));if(!l||!l.AccessKeyId||!l.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);let p=JR(u),m={accessKeyId:l.AccessKeyId,secretAccessKey:l.SecretAccessKey,sessionToken:l.SessionToken,expiration:l.Expiration,...l.CredentialScope&&{credentialScope:l.CredentialScope},...p&&{accountId:p}};return(0,dm.setCredentialFeature)(m,"CREDENTIALS_STS_ASSUME_ROLE","i"),m}},"getDefaultRoleAssumer"),P6=_((t,e)=>{let r;return async n=>{var i,o,s;if(!r){let{logger:p=(i=t?.parentClientConfig)==null?void 0:i.logger,region:m,requestHandler:f=(o=t?.parentClientConfig)==null?void 0:o.requestHandler,credentialProviderLogger:y}=t,S=await YR(m,(s=t?.parentClientConfig)==null?void 0:s.region,y),E=!XR(f);r=new e({region:S,requestHandler:E?f:void 0,logger:p})}let{Credentials:a,AssumedRoleUser:d}=await r.send(new fm(n));if(!a||!a.AccessKeyId||!a.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let l=JR(d),u={accessKeyId:a.AccessKeyId,secretAccessKey:a.SecretAccessKey,sessionToken:a.SessionToken,expiration:a.Expiration,...a.CredentialScope&&{credentialScope:a.CredentialScope},...l&&{accountId:l}};return l&&(0,dm.setCredentialFeature)(u,"RESOLVED_ACCOUNT_ID","T"),(0,dm.setCredentialFeature)(u,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),u}},"getDefaultRoleAssumerWithWebIdentity"),XR=_(t=>{var e;return((e=t?.metadata)==null?void 0:e.handlerProtocol)==="h2"},"isH2"),ZR=Ss(),eT=_((t,e)=>{var r;return e?(r=class extends t{constructor(n){super(n);for(let i of e)this.middlewareStack.use(i)}},_(r,"CustomizableSTSClient"),r):t},"getCustomizableStsClientCtor"),tT=_((t={},e)=>A6(t,eT(ZR.STSClient,e)),"getDefaultRoleAssumer"),rT=_((t={},e)=>P6(t,eT(ZR.STSClient,e)),"getDefaultRoleAssumerWithWebIdentity"),I6=_(t=>e=>t({roleAssumer:tT(e),roleAssumerWithWebIdentity:rT(e),...e}),"decorateDefaultCredentialProvider")});var vm=v((tue,oT)=>{"use strict";var Gd=Object.defineProperty,k6=Object.getOwnPropertyDescriptor,D6=Object.getOwnPropertyNames,q6=Object.prototype.hasOwnProperty,ym=(t,e)=>Gd(t,"name",{value:e,configurable:!0}),F6=(t,e)=>{for(var r in e)Gd(t,r,{get:e[r],enumerable:!0})},M6=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D6(e))!q6.call(t,i)&&i!==r&&Gd(t,i,{get:()=>e[i],enumerable:!(n=k6(e,i))||n.enumerable});return t},L6=t=>M6(Gd({},"__esModule",{value:!0}),t),iT={};F6(iT,{fromProcess:()=>B6});oT.exports=L6(iT);var nT=zr(),gm=$e(),W6=j("child_process"),U6=j("util"),j6=(Ut(),F(jr)),$6=ym((t,e,r)=>{var n;if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let s=new Date;if(new Date(e.Expiration)<s)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let i=e.AccountId;!i&&((n=r?.[t])!=null&&n.aws_account_id)&&(i=r[t].aws_account_id);let o={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...i&&{accountId:i}};return(0,j6.setCredentialFeature)(o,"CREDENTIALS_PROCESS","w"),o},"getValidatedProcessCredentials"),V6=ym(async(t,e,r)=>{let n=e[t];if(e[t]){let i=n.credential_process;if(i!==void 0){let o=(0,U6.promisify)(W6.exec);try{let{stdout:s}=await o(i),a;try{a=JSON.parse(s.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return $6(t,a,e)}catch(s){throw new gm.CredentialsProviderError(s.message,{logger:r})}}else throw new gm.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new gm.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},"resolveProcessCredentials"),B6=ym((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await(0,nT.parseKnownFiles)(t);return V6((0,nT.getProfileName)(t),r,t.logger)},"fromProcess")});var _m=v(Kt=>{"use strict";var H6=Kt&&Kt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),z6=Kt&&Kt.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),G6=Kt&&Kt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&H6(e,t,r);return z6(e,t),e};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.fromWebToken=void 0;var K6=t=>async()=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:e,roleSessionName:r,webIdentityToken:n,providerId:i,policyArns:o,policy:s,durationSeconds:a}=t,{roleAssumerWithWebIdentity:d}=t;if(!d){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>G6(hm()));d=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:t.parentClientConfig},t.clientPlugins)}return d({RoleArn:e,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:i,PolicyArns:o,Policy:s,DurationSeconds:a})};Kt.fromWebToken=K6});var aT=v(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.fromTokenFile=void 0;var Q6=(Ut(),F(jr)),J6=$e(),Y6=j("fs"),X6=_m(),sT="AWS_WEB_IDENTITY_TOKEN_FILE",Z6="AWS_ROLE_ARN",e4="AWS_ROLE_SESSION_NAME",t4=(t={})=>async()=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let e=t?.webIdentityTokenFile??process.env[sT],r=t?.roleArn??process.env[Z6],n=t?.roleSessionName??process.env[e4];if(!e||!r)throw new J6.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let i=await(0,X6.fromWebToken)({...t,webIdentityToken:(0,Y6.readFileSync)(e,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return e===process.env[sT]&&(0,Q6.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};Kd.fromTokenFile=t4});var Sm=v((iue,Qd)=>{"use strict";var cT=Object.defineProperty,r4=Object.getOwnPropertyDescriptor,n4=Object.getOwnPropertyNames,i4=Object.prototype.hasOwnProperty,Em=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of n4(e))!i4.call(t,i)&&i!==r&&cT(t,i,{get:()=>e[i],enumerable:!(n=r4(e,i))||n.enumerable});return t},dT=(t,e,r)=>(Em(t,e,"default"),r&&Em(r,e,"default")),o4=t=>Em(cT({},"__esModule",{value:!0}),t),wm={};Qd.exports=o4(wm);dT(wm,aT(),Qd.exports);dT(wm,_m(),Qd.exports)});var yT=v((oue,gT)=>{"use strict";var s4=Object.create,xs=Object.defineProperty,a4=Object.getOwnPropertyDescriptor,c4=Object.getOwnPropertyNames,d4=Object.getPrototypeOf,l4=Object.prototype.hasOwnProperty,ke=(t,e)=>xs(t,"name",{value:e,configurable:!0}),u4=(t,e)=>{for(var r in e)xs(t,r,{get:e[r],enumerable:!0})},fT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of c4(e))!l4.call(t,i)&&i!==r&&xs(t,i,{get:()=>e[i],enumerable:!(n=a4(e,i))||n.enumerable});return t},nn=(t,e,r)=>(r=t!=null?s4(d4(t)):{},fT(e||!t||!t.__esModule?xs(r,"default",{value:t,enumerable:!0}):r,t)),p4=t=>fT(xs({},"__esModule",{value:!0}),t),mT={};u4(mT,{fromIni:()=>x4});gT.exports=p4(mT);var xm=zr(),on=(Ut(),F(jr)),Ns=$e(),f4=ke((t,e,r)=>{let n={EcsContainer:async i=>{let{fromHttp:o}=await Promise.resolve().then(()=>nn(sf())),{fromContainerMetadata:s}=await Promise.resolve().then(()=>nn(as()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,Ns.chain)(o(i??{}),s(i))().then(Nm)},Ec2InstanceMetadata:async i=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:o}=await Promise.resolve().then(()=>nn(as()));return async()=>o(i)().then(Nm)},Environment:async i=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:o}=await Promise.resolve().then(()=>nn(Xp()));return async()=>o(i)().then(Nm)}};if(t in n)return n[t];throw new Ns.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},"resolveCredentialSource"),Nm=ke(t=>(0,on.setCredentialFeature)(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),"setNamedProvider"),m4=ke((t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(h4(t,{profile:e,logger:r})||g4(t,{profile:e,logger:r})),"isAssumeRoleProfile"),h4=ke((t,{profile:e,logger:r})=>{var n;let i=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return i&&((n=r?.debug)==null||n.call(r,`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`)),i},"isAssumeRoleWithSourceProfile"),g4=ke((t,{profile:e,logger:r})=>{var n;let i=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return i&&((n=r?.debug)==null||n.call(r,`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`)),i},"isCredentialSourceProfile"),y4=ke(async(t,e,r,n={})=>{var i,o;(i=r.logger)==null||i.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let s=e[t];if(!r.roleAssumer){let{getDefaultRoleAssumer:l}=await Promise.resolve().then(()=>nn(hm()));r.roleAssumer=l({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:r?.parentClientConfig},r.clientPlugins)}let{source_profile:a}=s;if(a&&a in n)throw new Ns.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,xm.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});(o=r.logger)==null||o.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${a?`source_profile=[${a}]`:`profile=[${t}]`}`);let d=a?hT(a,e,r,{...n,[a]:!0},lT(e[a]??{})):(await f4(s.credential_source,t,r.logger)(r))();if(lT(s))return d.then(l=>(0,on.setCredentialFeature)(l,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let l={RoleArn:s.role_arn,RoleSessionName:s.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:s.external_id,DurationSeconds:parseInt(s.duration_seconds||"3600",10)},{mfa_serial:u}=s;if(u){if(!r.mfaCodeProvider)throw new Ns.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});l.SerialNumber=u,l.TokenCode=await r.mfaCodeProvider(u)}let p=await d;return r.roleAssumer(p,l).then(m=>(0,on.setCredentialFeature)(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},"resolveAssumeRoleCredentials"),lT=ke(t=>!t.role_arn&&!!t.credential_source,"isCredentialSourceWithoutRoleArn"),v4=ke(t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string","isProcessProfile"),_4=ke(async(t,e)=>Promise.resolve().then(()=>nn(vm())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>(0,on.setCredentialFeature)(n,"CREDENTIALS_PROFILE_PROCESS","v"))),"resolveProcessCredentials"),E4=ke(async(t,e,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>nn(bf()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(i=>e.sso_session?(0,on.setCredentialFeature)(i,"CREDENTIALS_PROFILE_SSO","r"):(0,on.setCredentialFeature)(i,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},"resolveSsoCredentials"),w4=ke(t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),"isSsoProfile"),uT=ke(t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,"isStaticCredsProfile"),pT=ke(async(t,e)=>{var r;(r=e?.logger)==null||r.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let n={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return(0,on.setCredentialFeature)(n,"CREDENTIALS_PROFILE","n")},"resolveStaticCredentials"),S4=ke(t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,"isWebIdentityProfile"),N4=ke(async(t,e)=>Promise.resolve().then(()=>nn(Sm())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})().then(n=>(0,on.setCredentialFeature)(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),"resolveWebIdentityCredentials"),hT=ke(async(t,e,r,n={},i=!1)=>{let o=e[t];if(Object.keys(n).length>0&&uT(o))return pT(o,r);if(i||m4(o,{profile:t,logger:r.logger}))return y4(t,e,r,n);if(uT(o))return pT(o,r);if(S4(o))return N4(o,r);if(v4(o))return _4(r,t);if(w4(o))return await E4(t,o,r);throw new Ns.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},"resolveProfileData"),x4=ke((t={})=>async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-ini - fromIni");let r=await(0,xm.parseKnownFiles)(t);return hT((0,xm.getProfileName)(t),r,t)},"fromIni")});var Td=v((sue,NT)=>{"use strict";var b4=Object.create,bs=Object.defineProperty,C4=Object.getOwnPropertyDescriptor,O4=Object.getOwnPropertyNames,R4=Object.getPrototypeOf,T4=Object.prototype.hasOwnProperty,Jd=(t,e)=>bs(t,"name",{value:e,configurable:!0}),A4=(t,e)=>{for(var r in e)bs(t,r,{get:e[r],enumerable:!0})},_T=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of O4(e))!T4.call(t,i)&&i!==r&&bs(t,i,{get:()=>e[i],enumerable:!(n=C4(e,i))||n.enumerable});return t},Ji=(t,e,r)=>(r=t!=null?b4(R4(t)):{},_T(e||!t||!t.__esModule?bs(r,"default",{value:t,enumerable:!0}):r,t)),P4=t=>_T(bs({},"__esModule",{value:!0}),t),ET={};A4(ET,{credentialsTreatedAsExpired:()=>ST,credentialsWillNeedRefresh:()=>wT,defaultProvider:()=>q4});NT.exports=P4(ET);var bm=Xp(),I4=zr(),In=$e(),k4="AWS_EC2_METADATA_DISABLED",D4=Jd(async t=>{var e,r;let{ENV_CMDS_FULL_URI:n,ENV_CMDS_RELATIVE_URI:i,fromContainerMetadata:o,fromInstanceMetadata:s}=await Promise.resolve().then(()=>Ji(as()));if(process.env[i]||process.env[n]){(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:a}=await Promise.resolve().then(()=>Ji(sf()));return(0,In.chain)(a(t),o(t))}return process.env[k4]?async()=>{throw new In.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:((r=t.logger)==null||r.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))},"remoteProvider"),vT=!1,q4=Jd((t={})=>(0,In.memoize)((0,In.chain)(async()=>{var e,r,n,i;if(t.profile??process.env[I4.ENV_PROFILE])throw process.env[bm.ENV_KEY]&&process.env[bm.ENV_SECRET]&&(vT||(((e=t.logger)!=null&&e.warn&&((n=(r=t.logger)==null?void 0:r.constructor)==null?void 0:n.name)!=="NoOpLogger"?t.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),vT=!0)),new In.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return(i=t.logger)==null||i.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,bm.fromEnv)(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:i,ssoRoleName:o,ssoSession:s}=t;if(!r&&!n&&!i&&!o&&!s)throw new In.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>Ji(bf()));return a(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>Ji(yT()));return r(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>Ji(vm()));return r(t)()},async()=>{var e;(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>Ji(Sm()));return r(t)()},async()=>{var e;return(e=t.logger)==null||e.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await D4(t))()},async()=>{throw new In.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}),ST,wT),"defaultProvider"),wT=Jd(t=>t?.expiration!==void 0,"credentialsWillNeedRefresh"),ST=Jd(t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,"credentialsTreatedAsExpired")});var MT=v(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.ruleSet=void 0;var DT="required",Jt="fn",Yt="argv",Xi="ref",xT=!0,bT="isSet",Os="booleanEquals",Yi="error",Cs="endpoint",Or="tree",Cm="PartitionResult",CT={[DT]:!1,type:"String"},OT={[DT]:!0,default:!1,type:"Boolean"},RT={[Xi]:"Endpoint"},qT={[Jt]:Os,[Yt]:[{[Xi]:"UseFIPS"},!0]},FT={[Jt]:Os,[Yt]:[{[Xi]:"UseDualStack"},!0]},Qt={},TT={[Jt]:"getAttr",[Yt]:[{[Xi]:Cm},"supportsFIPS"]},AT={[Jt]:Os,[Yt]:[!0,{[Jt]:"getAttr",[Yt]:[{[Xi]:Cm},"supportsDualStack"]}]},PT=[qT],IT=[FT],kT=[{[Xi]:"Region"}],F4={version:"1.0",parameters:{Region:CT,UseDualStack:OT,UseFIPS:OT,Endpoint:CT},rules:[{conditions:[{[Jt]:bT,[Yt]:[RT]}],rules:[{conditions:PT,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Yi},{conditions:IT,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Yi},{endpoint:{url:RT,properties:Qt,headers:Qt},type:Cs}],type:Or},{conditions:[{[Jt]:bT,[Yt]:kT}],rules:[{conditions:[{[Jt]:"aws.partition",[Yt]:kT,assign:Cm}],rules:[{conditions:[qT,FT],rules:[{conditions:[{[Jt]:Os,[Yt]:[xT,TT]},AT],rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:Cs}],type:Or},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Yi}],type:Or},{conditions:PT,rules:[{conditions:[{[Jt]:Os,[Yt]:[TT,xT]}],rules:[{endpoint:{url:"https://rds-data-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:Cs}],type:Or},{error:"FIPS is enabled but this partition does not support FIPS",type:Yi}],type:Or},{conditions:IT,rules:[{conditions:[AT],rules:[{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Qt,headers:Qt},type:Cs}],type:Or},{error:"DualStack is enabled but this partition does not support DualStack",type:Yi}],type:Or},{endpoint:{url:"https://rds-data.{Region}.{PartitionResult#dnsSuffix}",properties:Qt,headers:Qt},type:Cs}],type:Or}],type:Or},{error:"Invalid Configuration: Missing Region",type:Yi}]};Yd.ruleSet=F4});var LT=v(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.defaultEndpointResolver=void 0;var M4=ci(),Om=si(),L4=MT(),W4=new Om.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),U4=(t,e={})=>W4.get(t,()=>(0,Om.resolveEndpoint)(L4.ruleSet,{endpointParams:t,logger:e.logger}));Xd.defaultEndpointResolver=U4;Om.customEndpointFunctions.aws=M4.awsEndpointFunctions});var jT=v(Zd=>{"use strict";Object.defineProperty(Zd,"__esModule",{value:!0});Zd.getRuntimeConfig=void 0;var j4=(Ne(),F(Se)),$4=Y(),V4=On(),WT=Lt(),UT=tt(),B4=Kp(),H4=LT(),z4=t=>({apiVersion:"2018-08-01",base64Decoder:t?.base64Decoder??WT.fromBase64,base64Encoder:t?.base64Encoder??WT.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??H4.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??B4.defaultRDSDataHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new j4.AwsSdkSigV4Signer}],logger:t?.logger??new $4.NoOpLogger,serviceId:t?.serviceId??"RDS Data",urlParser:t?.urlParser??V4.parseUrl,utf8Decoder:t?.utf8Decoder??UT.fromUtf8,utf8Encoder:t?.utf8Encoder??UT.toUtf8});Zd.getRuntimeConfig=z4});var HT=v(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.getRuntimeConfig=void 0;var G4=(Ni(),F(Si)),K4=G4.__importDefault(kN()),Q4=(Ne(),F(Se)),J4=Td(),$T=cs(),el=Vt(),Y4=ds(),VT=ur(),Zi=Gr(),BT=yn(),X4=ls(),Z4=_i(),eK=jT(),tK=Y(),rK=fs(),nK=Y(),iK=t=>{(0,nK.emitWarningIfUnsupportedVersion)(process.version);let e=(0,rK.resolveDefaultsModeConfig)(t),r=()=>e().then(tK.loadConfigsForDefaultMode),n=(0,eK.getRuntimeConfig)(t);return(0,Q4.emitWarningIfUnsupportedVersion)(process.version),{...n,...t,runtime:"node",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??X4.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??J4.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,$T.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:K4.default.version}),maxAttempts:t?.maxAttempts??(0,Zi.loadConfig)(VT.NODE_MAX_ATTEMPT_CONFIG_OPTIONS),region:t?.region??(0,Zi.loadConfig)(el.NODE_REGION_CONFIG_OPTIONS,el.NODE_REGION_CONFIG_FILE_OPTIONS),requestHandler:BT.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Zi.loadConfig)({...VT.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Z4.DEFAULT_RETRY_MODE}),sha256:t?.sha256??Y4.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??BT.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Zi.loadConfig)(el.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS),useFipsEndpoint:t?.useFipsEndpoint??(0,Zi.loadConfig)(el.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS),userAgentAppId:t?.userAgentAppId??(0,Zi.loadConfig)($T.NODE_APP_ID_CONFIG_OPTIONS)}};tl.getRuntimeConfig=iK});var yP=v((_ue,gP)=>{"use strict";var ol=Object.defineProperty,oK=Object.getOwnPropertyDescriptor,sK=Object.getOwnPropertyNames,aK=Object.prototype.hasOwnProperty,w=(t,e)=>ol(t,"name",{value:e,configurable:!0}),cK=(t,e)=>{for(var r in e)ol(t,r,{get:e[r],enumerable:!0})},dK=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of sK(e))!aK.call(t,i)&&i!==r&&ol(t,i,{get:()=>e[i],enumerable:!(n=oK(e,i))||n.enumerable});return t},lK=t=>dK(ol({},"__esModule",{value:!0}),t),XT={};cK(XT,{AccessDeniedException:()=>oA,ArrayValue:()=>nl,BadRequestException:()=>cA,BatchExecuteStatementCommand:()=>nP,BeginTransactionCommand:()=>oP,CommitTransactionCommand:()=>aP,DatabaseErrorException:()=>uA,DatabaseNotFoundException:()=>mA,DatabaseResumingException:()=>yA,DatabaseUnavailableException:()=>EA,DecimalReturnType:()=>wK,ExecuteSqlCommand:()=>dP,ExecuteStatementCommand:()=>uP,Field:()=>il,ForbiddenException:()=>NA,HttpEndpointNotEnabledException:()=>CA,InternalServerErrorException:()=>TA,InvalidSecretException:()=>IA,LongReturnType:()=>NK,NotFoundException:()=>GA,RDSData:()=>hP,RDSDataClient:()=>eA,RDSDataServiceException:()=>Oe,RecordsFormatType:()=>SK,RollbackTransactionCommand:()=>fP,SecretsErrorException:()=>qA,ServiceUnavailableError:()=>LA,StatementTimeoutException:()=>jA,TransactionNotFoundException:()=>BA,TypeHint:()=>EK,UnsupportedResultException:()=>JA,Value:()=>Rm,__Client:()=>h.Client});gP.exports=lK(XT);var zT=Lo(),uK=Wo(),pK=Uo(),GT=mi(),fK=Vt(),Rr=(rt(),F(xt)),mK=Xo(),kn=yi(),KT=ur(),QT=Kp(),hK=w(t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"rds-data"}),"resolveClientEndpointParameters"),eo={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},gK=HT(),JT=ms(),YT=de(),h=Y(),yK=w(t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(i){let o=e.findIndex(s=>s.schemeId===i.schemeId);o===-1?e.push(i):e.splice(o,1,i)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(i){r=i},httpAuthSchemeProvider(){return r},setCredentials(i){n=i},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),vK=w(t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),"resolveHttpAuthRuntimeConfig"),rl=w(t=>t,"asPartial"),_K=w((t,e)=>{let r={...rl((0,JT.getAwsRegionExtensionConfiguration)(t)),...rl((0,h.getDefaultExtensionConfiguration)(t)),...rl((0,YT.getHttpHandlerExtensionConfiguration)(t)),...rl(yK(t))};return e.forEach(n=>n.configure(r)),{...t,...(0,JT.resolveAwsRegionExtensionConfiguration)(r),...(0,h.resolveDefaultRuntimeConfig)(r),...(0,YT.resolveHttpHandlerRuntimeConfig)(r),...vK(r)}},"resolveRuntimeExtensions"),ZT=class extends h.Client{constructor(...[e]){let r=(0,gK.getRuntimeConfig)(e||{}),n=hK(r),i=(0,GT.resolveUserAgentConfig)(n),o=(0,KT.resolveRetryConfig)(i),s=(0,fK.resolveRegionConfig)(o),a=(0,zT.resolveHostHeaderConfig)(s),d=(0,kn.resolveEndpointConfig)(a),l=(0,QT.resolveHttpAuthSchemeConfig)(d),u=_K(l,e?.extensions||[]);super(u),this.config=u,this.middlewareStack.use((0,GT.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,KT.getRetryPlugin)(this.config)),this.middlewareStack.use((0,mK.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,zT.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,uK.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,pK.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Rr.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:QT.defaultRDSDataHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async p=>new Rr.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use((0,Rr.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}};w(ZT,"RDSDataClient");var eA=ZT,to=gn(),it=(Ne(),F(Se)),tA=class rA extends h.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,rA.prototype)}};w(tA,"RDSDataServiceException");var Oe=tA,nA=class iA extends Oe{constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,iA.prototype)}};w(nA,"AccessDeniedException");var oA=nA,sA=class aA extends Oe{constructor(e){super({name:"BadRequestException",$fault:"client",...e}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,aA.prototype)}};w(sA,"BadRequestException");var cA=sA,EK={DATE:"DATE",DECIMAL:"DECIMAL",JSON:"JSON",TIME:"TIME",TIMESTAMP:"TIMESTAMP",UUID:"UUID"},dA=class lA extends Oe{constructor(e){super({name:"DatabaseErrorException",$fault:"client",...e}),this.name="DatabaseErrorException",this.$fault="client",Object.setPrototypeOf(this,lA.prototype)}};w(dA,"DatabaseErrorException");var uA=dA,pA=class fA extends Oe{constructor(e){super({name:"DatabaseNotFoundException",$fault:"client",...e}),this.name="DatabaseNotFoundException",this.$fault="client",Object.setPrototypeOf(this,fA.prototype)}};w(pA,"DatabaseNotFoundException");var mA=pA,hA=class gA extends Oe{constructor(e){super({name:"DatabaseResumingException",$fault:"client",...e}),this.name="DatabaseResumingException",this.$fault="client",Object.setPrototypeOf(this,gA.prototype)}};w(hA,"DatabaseResumingException");var yA=hA,vA=class _A extends Oe{constructor(e){super({name:"DatabaseUnavailableException",$fault:"server",...e}),this.name="DatabaseUnavailableException",this.$fault="server",Object.setPrototypeOf(this,_A.prototype)}};w(vA,"DatabaseUnavailableException");var EA=vA,wA=class SA extends Oe{constructor(e){super({name:"ForbiddenException",$fault:"client",...e}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,SA.prototype)}};w(wA,"ForbiddenException");var NA=wA,xA=class bA extends Oe{constructor(e){super({name:"HttpEndpointNotEnabledException",$fault:"client",...e}),this.name="HttpEndpointNotEnabledException",this.$fault="client",Object.setPrototypeOf(this,bA.prototype)}};w(xA,"HttpEndpointNotEnabledException");var CA=xA,OA=class RA extends Oe{constructor(e){super({name:"InternalServerErrorException",$fault:"server",...e}),this.name="InternalServerErrorException",this.$fault="server",Object.setPrototypeOf(this,RA.prototype)}};w(OA,"InternalServerErrorException");var TA=OA,AA=class PA extends Oe{constructor(e){super({name:"InvalidSecretException",$fault:"client",...e}),this.name="InvalidSecretException",this.$fault="client",Object.setPrototypeOf(this,PA.prototype)}};w(AA,"InvalidSecretException");var IA=AA,kA=class DA extends Oe{constructor(e){super({name:"SecretsErrorException",$fault:"client",...e}),this.name="SecretsErrorException",this.$fault="client",Object.setPrototypeOf(this,DA.prototype)}};w(kA,"SecretsErrorException");var qA=kA,FA=class MA extends Oe{constructor(e){super({name:"ServiceUnavailableError",$fault:"server",...e}),this.name="ServiceUnavailableError",this.$fault="server",Object.setPrototypeOf(this,MA.prototype)}};w(FA,"ServiceUnavailableError");var LA=FA,WA=class UA extends Oe{constructor(e){super({name:"StatementTimeoutException",$fault:"client",...e}),this.name="StatementTimeoutException",this.$fault="client",Object.setPrototypeOf(this,UA.prototype),this.dbConnectionId=e.dbConnectionId}};w(WA,"StatementTimeoutException");var jA=WA,$A=class VA extends Oe{constructor(e){super({name:"TransactionNotFoundException",$fault:"client",...e}),this.name="TransactionNotFoundException",this.$fault="client",Object.setPrototypeOf(this,VA.prototype)}};w($A,"TransactionNotFoundException");var BA=$A,HA=class zA extends Oe{constructor(e){super({name:"NotFoundException",$fault:"client",...e}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,zA.prototype)}};w(HA,"NotFoundException");var GA=HA,wK={DOUBLE_OR_LONG:"DOUBLE_OR_LONG",STRING:"STRING"},SK={JSON:"JSON",NONE:"NONE"},NK={LONG:"LONG",STRING:"STRING"},KA=class QA extends Oe{constructor(e){super({name:"UnsupportedResultException",$fault:"client",...e}),this.name="UnsupportedResultException",this.$fault="client",Object.setPrototypeOf(this,QA.prototype)}};w(KA,"UnsupportedResultException");var JA=KA,nl;(t=>{t.visit=w((e,r)=>e.booleanValues!==void 0?r.booleanValues(e.booleanValues):e.longValues!==void 0?r.longValues(e.longValues):e.doubleValues!==void 0?r.doubleValues(e.doubleValues):e.stringValues!==void 0?r.stringValues(e.stringValues):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):r._(e.$unknown[0],e.$unknown[1]),"visit")})(nl||(nl={}));var il;(t=>{t.visit=w((e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.booleanValue!==void 0?r.booleanValue(e.booleanValue):e.longValue!==void 0?r.longValue(e.longValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValue!==void 0?r.arrayValue(e.arrayValue):r._(e.$unknown[0],e.$unknown[1]),"visit")})(il||(il={}));var Rm;(t=>{t.visit=w((e,r)=>e.isNull!==void 0?r.isNull(e.isNull):e.bitValue!==void 0?r.bitValue(e.bitValue):e.bigIntValue!==void 0?r.bigIntValue(e.bigIntValue):e.intValue!==void 0?r.intValue(e.intValue):e.doubleValue!==void 0?r.doubleValue(e.doubleValue):e.realValue!==void 0?r.realValue(e.realValue):e.stringValue!==void 0?r.stringValue(e.stringValue):e.blobValue!==void 0?r.blobValue(e.blobValue):e.arrayValues!==void 0?r.arrayValues(e.arrayValues):e.structValue!==void 0?r.structValue(e.structValue):r._(e.$unknown[0],e.$unknown[1]),"visit")})(Rm||(Rm={}));var xK=w(async(t,e)=>{let r=(0,Rr.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/BatchExecute");let i;return i=JSON.stringify((0,h.take)(t,{database:[],parameterSets:o=>nQ(o,e),resourceArn:[],schema:[],secretArn:[],sql:[],transactionId:[]})),r.m("POST").h(n).b(i),r.build()},"se_BatchExecuteStatementCommand"),bK=w(async(t,e)=>{let r=(0,Rr.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/BeginTransaction");let i;return i=JSON.stringify((0,h.take)(t,{database:[],resourceArn:[],schema:[],secretArn:[]})),r.m("POST").h(n).b(i),r.build()},"se_BeginTransactionCommand"),CK=w(async(t,e)=>{let r=(0,Rr.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/CommitTransaction");let i;return i=JSON.stringify((0,h.take)(t,{resourceArn:[],secretArn:[],transactionId:[]})),r.m("POST").h(n).b(i),r.build()},"se_CommitTransactionCommand"),OK=w(async(t,e)=>{let r=(0,Rr.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/ExecuteSql");let i;return i=JSON.stringify((0,h.take)(t,{awsSecretStoreArn:[],database:[],dbClusterOrInstanceArn:[],schema:[],sqlStatements:[]})),r.m("POST").h(n).b(i),r.build()},"se_ExecuteSqlCommand"),RK=w(async(t,e)=>{let r=(0,Rr.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/Execute");let i;return i=JSON.stringify((0,h.take)(t,{continueAfterTimeout:[],database:[],formatRecordsAs:[],includeResultMetadata:[],parameters:o=>XA(o,e),resourceArn:[],resultSetOptions:o=>(0,h._json)(o),schema:[],secretArn:[],sql:[],transactionId:[]})),r.m("POST").h(n).b(i),r.build()},"se_ExecuteStatementCommand"),TK=w(async(t,e)=>{let r=(0,Rr.requestBuilder)(t,e),n={"content-type":"application/json"};r.bp("/RollbackTransaction");let i;return i=JSON.stringify((0,h.take)(t,{resourceArn:[],secretArn:[],transactionId:[]})),r.m("POST").h(n).b(i),r.build()},"se_RollbackTransactionCommand"),AK=w(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ro(t,e);let r=(0,h.map)({$metadata:le(t)}),n=(0,h.expectNonNull)((0,h.expectObject)(await(0,it.parseJsonBody)(t.body,e)),"body"),i=(0,h.take)(n,{updateResults:o=>gQ(o,e)});return Object.assign(r,i),r},"de_BatchExecuteStatementCommand"),PK=w(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ro(t,e);let r=(0,h.map)({$metadata:le(t)}),n=(0,h.expectNonNull)((0,h.expectObject)(await(0,it.parseJsonBody)(t.body,e)),"body"),i=(0,h.take)(n,{transactionId:h.expectString});return Object.assign(r,i),r},"de_BeginTransactionCommand"),IK=w(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ro(t,e);let r=(0,h.map)({$metadata:le(t)}),n=(0,h.expectNonNull)((0,h.expectObject)(await(0,it.parseJsonBody)(t.body,e)),"body"),i=(0,h.take)(n,{transactionStatus:h.expectString});return Object.assign(r,i),r},"de_CommitTransactionCommand"),kK=w(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ro(t,e);let r=(0,h.map)({$metadata:le(t)}),n=(0,h.expectNonNull)((0,h.expectObject)(await(0,it.parseJsonBody)(t.body,e)),"body"),i=(0,h.take)(n,{sqlStatementResults:o=>fQ(o,e)});return Object.assign(r,i),r},"de_ExecuteSqlCommand"),DK=w(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ro(t,e);let r=(0,h.map)({$metadata:le(t)}),n=(0,h.expectNonNull)((0,h.expectObject)(await(0,it.parseJsonBody)(t.body,e)),"body"),i=(0,h.take)(n,{columnMetadata:h._json,formattedRecords:h.expectString,generatedFields:o=>Tm(o,e),numberOfRecordsUpdated:h.expectLong,records:o=>uQ(o,e)});return Object.assign(r,i),r},"de_ExecuteStatementCommand"),qK=w(async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return ro(t,e);let r=(0,h.map)({$metadata:le(t)}),n=(0,h.expectNonNull)((0,h.expectObject)(await(0,it.parseJsonBody)(t.body,e)),"body"),i=(0,h.take)(n,{transactionStatus:h.expectString});return Object.assign(r,i),r},"de_RollbackTransactionCommand"),ro=w(async(t,e)=>{let r={...t,body:await(0,it.parseJsonErrorBody)(t.body,e)},n=(0,it.loadRestJsonErrorCode)(t,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.rdsdata#AccessDeniedException":throw await MK(r,e);case"BadRequestException":case"com.amazonaws.rdsdata#BadRequestException":throw await LK(r,e);case"DatabaseErrorException":case"com.amazonaws.rdsdata#DatabaseErrorException":throw await WK(r,e);case"DatabaseNotFoundException":case"com.amazonaws.rdsdata#DatabaseNotFoundException":throw await UK(r,e);case"DatabaseResumingException":case"com.amazonaws.rdsdata#DatabaseResumingException":throw await jK(r,e);case"DatabaseUnavailableException":case"com.amazonaws.rdsdata#DatabaseUnavailableException":throw await $K(r,e);case"ForbiddenException":case"com.amazonaws.rdsdata#ForbiddenException":throw await VK(r,e);case"HttpEndpointNotEnabledException":case"com.amazonaws.rdsdata#HttpEndpointNotEnabledException":throw await BK(r,e);case"InternalServerErrorException":case"com.amazonaws.rdsdata#InternalServerErrorException":throw await HK(r,e);case"InvalidSecretException":case"com.amazonaws.rdsdata#InvalidSecretException":throw await zK(r,e);case"SecretsErrorException":case"com.amazonaws.rdsdata#SecretsErrorException":throw await KK(r,e);case"ServiceUnavailableError":case"com.amazonaws.rdsdata#ServiceUnavailableError":throw await QK(r,e);case"StatementTimeoutException":case"com.amazonaws.rdsdata#StatementTimeoutException":throw await JK(r,e);case"TransactionNotFoundException":case"com.amazonaws.rdsdata#TransactionNotFoundException":throw await YK(r,e);case"NotFoundException":case"com.amazonaws.rdsdata#NotFoundException":throw await GK(r,e);case"UnsupportedResultException":case"com.amazonaws.rdsdata#UnsupportedResultException":throw await XK(r,e);default:let i=r.body;return FK({output:t,parsedBody:i,errorCode:n})}},"de_CommandError"),FK=(0,h.withBaseException)(Oe),MK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new oA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_AccessDeniedExceptionRes"),LK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new cA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_BadRequestExceptionRes"),WK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new uA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_DatabaseErrorExceptionRes"),UK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new mA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_DatabaseNotFoundExceptionRes"),jK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new yA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_DatabaseResumingExceptionRes"),$K=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{});Object.assign(r,i);let o=new EA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_DatabaseUnavailableExceptionRes"),VK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new NA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_ForbiddenExceptionRes"),BK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new CA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_HttpEndpointNotEnabledExceptionRes"),HK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{});Object.assign(r,i);let o=new TA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_InternalServerErrorExceptionRes"),zK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new IA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_InvalidSecretExceptionRes"),GK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new GA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_NotFoundExceptionRes"),KK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new qA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_SecretsErrorExceptionRes"),QK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{});Object.assign(r,i);let o=new LA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_ServiceUnavailableErrorRes"),JK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{dbConnectionId:h.expectLong,message:h.expectString});Object.assign(r,i);let o=new jA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_StatementTimeoutExceptionRes"),YK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new BA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_TransactionNotFoundExceptionRes"),XK=w(async(t,e)=>{let r=(0,h.map)({}),n=t.body,i=(0,h.take)(n,{message:h.expectString});Object.assign(r,i);let o=new JA({$metadata:le(t),...r});return(0,h.decorateServiceException)(o,t.body)},"de_UnsupportedResultExceptionRes"),ZK=w((t,e)=>t.filter(r=>r!=null).map(r=>YA(r,e)),"se_ArrayOfArray"),YA=w((t,e)=>nl.visit(t,{arrayValues:r=>({arrayValues:ZK(r,e)}),booleanValues:r=>({booleanValues:(0,h._json)(r)}),doubleValues:r=>({doubleValues:eQ(r,e)}),longValues:r=>({longValues:(0,h._json)(r)}),stringValues:r=>({stringValues:(0,h._json)(r)}),_:(r,n)=>({name:n})}),"se_ArrayValue"),eQ=w((t,e)=>t.filter(r=>r!=null).map(r=>(0,h.serializeFloat)(r)),"se_DoubleArray"),tQ=w((t,e)=>il.visit(t,{arrayValue:r=>({arrayValue:YA(r,e)}),blobValue:r=>({blobValue:e.base64Encoder(r)}),booleanValue:r=>({booleanValue:r}),doubleValue:r=>({doubleValue:(0,h.serializeFloat)(r)}),isNull:r=>({isNull:r}),longValue:r=>({longValue:r}),stringValue:r=>({stringValue:r}),_:(r,n)=>({name:n})}),"se_Field"),rQ=w((t,e)=>(0,h.take)(t,{name:[],typeHint:[],value:r=>tQ(r,e)}),"se_SqlParameter"),nQ=w((t,e)=>t.filter(r=>r!=null).map(r=>XA(r,e)),"se_SqlParameterSets"),XA=w((t,e)=>t.filter(r=>r!=null).map(r=>rQ(r,e)),"se_SqlParametersList"),iQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>ZA((0,it.awsExpectUnion)(n),e)),"de_ArrayOfArray"),ZA=w((t,e)=>t.arrayValues!=null?{arrayValues:iQ(t.arrayValues,e)}:t.booleanValues!=null?{booleanValues:(0,h._json)(t.booleanValues)}:t.doubleValues!=null?{doubleValues:oQ(t.doubleValues,e)}:t.longValues!=null?{longValues:(0,h._json)(t.longValues)}:t.stringValues!=null?{stringValues:(0,h._json)(t.stringValues)}:{$unknown:Object.entries(t)[0]},"de_ArrayValue"),eP=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>tP((0,it.awsExpectUnion)(n),e)),"de_ArrayValueList"),oQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>(0,h.limitedParseDouble)(n)),"de_DoubleArray"),sQ=w((t,e)=>t.arrayValue!=null?{arrayValue:ZA((0,it.awsExpectUnion)(t.arrayValue),e)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,h.expectBoolean)(t.booleanValue)!==void 0?{booleanValue:(0,h.expectBoolean)(t.booleanValue)}:(0,h.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,h.limitedParseDouble)(t.doubleValue)}:(0,h.expectBoolean)(t.isNull)!==void 0?{isNull:(0,h.expectBoolean)(t.isNull)}:(0,h.expectLong)(t.longValue)!==void 0?{longValue:(0,h.expectLong)(t.longValue)}:(0,h.expectString)(t.stringValue)!==void 0?{stringValue:(0,h.expectString)(t.stringValue)}:{$unknown:Object.entries(t)[0]},"de_Field"),Tm=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>sQ((0,it.awsExpectUnion)(n),e)),"de_FieldList"),aQ=w((t,e)=>(0,h.take)(t,{values:r=>lQ(r,e)}),"de__Record"),cQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>aQ(n,e)),"de_Records"),dQ=w((t,e)=>(0,h.take)(t,{records:r=>cQ(r,e),resultSetMetadata:h._json}),"de_ResultFrame"),lQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>tP((0,it.awsExpectUnion)(n),e)),"de_Row"),uQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>Tm(n,e)),"de_SqlRecords"),pQ=w((t,e)=>(0,h.take)(t,{numberOfRecordsUpdated:h.expectLong,resultFrame:r=>dQ(r,e)}),"de_SqlStatementResult"),fQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>pQ(n,e)),"de_SqlStatementResults"),mQ=w((t,e)=>(0,h.take)(t,{attributes:r=>eP(r,e)}),"de_StructValue"),hQ=w((t,e)=>(0,h.take)(t,{generatedFields:r=>Tm(r,e)}),"de_UpdateResult"),gQ=w((t,e)=>(t||[]).filter(n=>n!=null).map(n=>hQ(n,e)),"de_UpdateResults"),tP=w((t,e)=>t.arrayValues!=null?{arrayValues:eP(t.arrayValues,e)}:(0,h.expectLong)(t.bigIntValue)!==void 0?{bigIntValue:(0,h.expectLong)(t.bigIntValue)}:(0,h.expectBoolean)(t.bitValue)!==void 0?{bitValue:(0,h.expectBoolean)(t.bitValue)}:t.blobValue!=null?{blobValue:e.base64Decoder(t.blobValue)}:(0,h.limitedParseDouble)(t.doubleValue)!==void 0?{doubleValue:(0,h.limitedParseDouble)(t.doubleValue)}:(0,h.expectInt32)(t.intValue)!==void 0?{intValue:(0,h.expectInt32)(t.intValue)}:(0,h.expectBoolean)(t.isNull)!==void 0?{isNull:(0,h.expectBoolean)(t.isNull)}:(0,h.limitedParseFloat32)(t.realValue)!==void 0?{realValue:(0,h.limitedParseFloat32)(t.realValue)}:(0,h.expectString)(t.stringValue)!==void 0?{stringValue:(0,h.expectString)(t.stringValue)}:t.structValue!=null?{structValue:mQ(t.structValue,e)}:{$unknown:Object.entries(t)[0]},"de_Value"),le=w(t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),"deserializeMetadata"),rP=class extends h.Command.classBuilder().ep(eo).m(function(e,r,n,i){return[(0,to.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kn.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("RdsDataService","BatchExecuteStatement",{}).n("RDSDataClient","BatchExecuteStatementCommand").f(void 0,void 0).ser(xK).de(AK).build(){};w(rP,"BatchExecuteStatementCommand");var nP=rP,iP=class extends h.Command.classBuilder().ep(eo).m(function(e,r,n,i){return[(0,to.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kn.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("RdsDataService","BeginTransaction",{}).n("RDSDataClient","BeginTransactionCommand").f(void 0,void 0).ser(bK).de(PK).build(){};w(iP,"BeginTransactionCommand");var oP=iP,sP=class extends h.Command.classBuilder().ep(eo).m(function(e,r,n,i){return[(0,to.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kn.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("RdsDataService","CommitTransaction",{}).n("RDSDataClient","CommitTransactionCommand").f(void 0,void 0).ser(CK).de(IK).build(){};w(sP,"CommitTransactionCommand");var aP=sP,cP=class extends h.Command.classBuilder().ep(eo).m(function(e,r,n,i){return[(0,to.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kn.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("RdsDataService","ExecuteSql",{}).n("RDSDataClient","ExecuteSqlCommand").f(void 0,void 0).ser(OK).de(kK).build(){};w(cP,"ExecuteSqlCommand");var dP=cP,lP=class extends h.Command.classBuilder().ep(eo).m(function(e,r,n,i){return[(0,to.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kn.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("RdsDataService","ExecuteStatement",{}).n("RDSDataClient","ExecuteStatementCommand").f(void 0,void 0).ser(RK).de(DK).build(){};w(lP,"ExecuteStatementCommand");var uP=lP,pP=class extends h.Command.classBuilder().ep(eo).m(function(e,r,n,i){return[(0,to.getSerdePlugin)(n,this.serialize,this.deserialize),(0,kn.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("RdsDataService","RollbackTransaction",{}).n("RDSDataClient","RollbackTransactionCommand").f(void 0,void 0).ser(TK).de(qK).build(){};w(pP,"RollbackTransactionCommand");var fP=pP,yQ={BatchExecuteStatementCommand:nP,BeginTransactionCommand:oP,CommitTransactionCommand:aP,ExecuteSqlCommand:dP,ExecuteStatementCommand:uP,RollbackTransactionCommand:fP},mP=class extends eA{};w(mP,"RDSData");var hP=mP;(0,h.createAggregatedClient)(yQ,hP)});import vQ from"path";function Tr(t){return typeof t>"u"||t===void 0}function ye(t){return typeof t=="string"}function Im(t){return typeof t=="number"}function Ts(t){return typeof t=="boolean"}function As(t){return t===null}function km(t){return t instanceof Date}function Dm(t){return typeof t=="bigint"}function ee(t){return typeof t=="function"}function qe(t){return typeof t=="object"&&t!==null}function qm(t){return t[t.length-1]}function c(t){return Object.freeze(t)}function Pt(t){return Array.isArray(t)}function Ar(t){return t}var K=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}});var q=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}});var It=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:q.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});var Ps=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:q.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});var Fm=["preserve rows","delete rows","drop"],Ye=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}});var He=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:q.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:q.create(t),identifier:q.create(e)})}});var qn=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:He.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});var no=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:q.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});var io=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}});var ze=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}});var ot=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:He.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:He.createWithSchema(t,e)})}});function te(t){return qe(t)&&ee(t.toOperationNode)}function Mm(t){return qe(t)&&"expressionType"in t&&te(t)}function Lm(t){return qe(t)&&"expression"in t&&ye(t.alias)&&te(t)}var kt=c({is(t){return t.kind==="SelectModifierNode"},create(t){return c({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}});var Xt=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}});var Zt=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}});var Fn=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?Xt.create(t.on,r):Zt.create(t.on,r)})}});var Fe=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Fn.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Fn.cloneWithOperation(t.on,"And",e):Fn.create(e)})},cloneWithOrOn(t,e){return c({...t,on:t.on?Fn.cloneWithOperation(t.on,"Or",e):Fn.create(e)})}});var oo=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}});var me=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return me.create([t],[])},createWithChild(t){return me.create(["",""],[t])},createWithChildren(t){return me.create(new Array(t.length+1).fill(""),t)}});var Wm=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->"],bP=["+","-","*","/","%","^","&","|","#","<<",">>"],Um=[...Wm,...bP,"&&","||"],CP=["exists","not exists"],OP=["not","-",...CP],jm=[...Um,...OP],Mn=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function sl(t){return ye(t)&&Um.includes(t)}function al(t){return ye(t)&&Wm.includes(t)}var Pr=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});var W=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:q.create(t)})}});var Ln=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}});var sn=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:t,column:e})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:Ln.create()})}});var $m=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}});function Vm(t){return t==="asc"||t==="desc"}function Ir(t,e){return $m.create(RP(t),TP(e))}function RP(t){return Xe(t)}function TP(t){if(t)return t==="asc"||t==="desc"?me.createWithSql(t):t.toOperationNode()}function cl(t){return ye(t)?er(t):t.toOperationNode()}function tr(t){return Pt(t)?t.map(e=>Xe(e)):[Xe(t)]}function Xe(t){return an(t)?kr(t):cl(t)}function er(t){let e=".";if(t.includes(e)){let r=t.split(e).map(ul);if(r.length===3)return AP(r);if(r.length===2)return PP(r);throw new Error(`invalid column reference ${t}`)}else return W.create(t)}function Bm(t){let e=" as ";if(t.includes(e)){let[r,n]=t.split(e).map(ul);return ze.create(er(r),q.create(n))}else return er(t)}function dl(t){return W.create(t)}function ll(t){let e=" ";if(t.includes(e)){let[r,n]=t.split(e).map(ul);if(!Vm(n))throw new Error(`invalid order direction "${n}" next to "${r}"`);return Ir(r,n)}else return dl(t)}function AP(t){let[e,r,n]=t;return sn.create(ot.createWithSchema(e,r),W.create(n))}function PP(t){let[e,r]=t;return sn.create(ot.create(e),W.create(r))}function ul(t){return t.trim()}var Is=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}});var Wn=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}});var Ee=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function ks(t){return Pt(t)?IP(t):Ze(t)}function Ze(t){return an(t)?kr(t):Ee.create(t)}function IP(t){return t.some(an)?Wn.create(t.map(e=>Ze(e))):Is.create(t)}var rr=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([t])})},cloneWithItem(t,e){return c({...t,items:c([...t.items,e])})}});var pl=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});var so=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItem(t,e){return c({...t,orderBy:t.orderBy?rr.cloneWithItem(t.orderBy,e):rr.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?pl.cloneWithItems(t.partitionBy,e):pl.create(e)})}});var cn=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}});var fl=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});var ao=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?Xt.create(t.having,r):Zt.create(t.having,r)})}});var I=c({is(t){return t.kind==="SelectQueryNode"},create(t,e){return c({kind:"SelectQueryNode",from:cn.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithOrderByItem(t,e){return c({...t,orderBy:t.orderBy?rr.cloneWithItem(t.orderBy,e):rr.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?fl.cloneWithItems(t.groupBy,e):fl.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithHaving(t,e){return c({...t,having:t.having?ao.cloneWithOperation(t.having,"And",e):ao.create(e)})},cloneWithOrHaving(t,e){return c({...t,having:t.having?ao.cloneWithOperation(t.having,"Or",e):ao.create(e)})},cloneWithSetOperation(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,e]):c([e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})}});var Ds=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function ae(t){return qs("exists",t)}function re(t){return qs("not exists",t)}function qs(t,e){return Ds.create(Mn.create(t),Xe(e))}function T(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var co=class t{#e;constructor(e){this.#e=c(e)}on(...e){return new t({...this.#e,joinNode:Fe.cloneWithOn(this.#e.joinNode,ml(e))})}orOn(...e){return new t({...this.#e,joinNode:Fe.cloneWithOrOn(this.#e.joinNode,ml(e))})}onRef(e,r,n){return new t({...this.#e,joinNode:Fe.cloneWithOn(this.#e.joinNode,Q(e,r,n))})}orOnRef(e,r,n){return new t({...this.#e,joinNode:Fe.cloneWithOrOn(this.#e.joinNode,Q(e,r,n))})}onExists(e){return new t({...this.#e,joinNode:Fe.cloneWithOn(this.#e.joinNode,ae(e))})}onNotExists(e){return new t({...this.#e,joinNode:Fe.cloneWithOn(this.#e.joinNode,re(e))})}orOnExists(e){return new t({...this.#e,joinNode:Fe.cloneWithOrOn(this.#e.joinNode,ae(e))})}orOnNotExists(e){return new t({...this.#e,joinNode:Fe.cloneWithOrOn(this.#e.joinNode,re(e))})}onTrue(){return new t({...this.#e,joinNode:Fe.cloneWithOn(this.#e.joinNode,me.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}};T(co,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");var Hm=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function zm(t){return tr(t).map(Hm.create)}var lo=class t{#e;constructor(e){this.#e=c(e)}orderBy(e,r){return new t({overNode:so.cloneWithOrderByItem(this.#e.overNode,Ir(e,r))})}partitionBy(e){return new t({overNode:so.cloneWithPartitionByItems(this.#e.overNode,zm(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}};T(lo,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");var Un=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:Ln.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:sn.createSelectAll(t)})}});var Fs=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return cl(this.#e)}};function Gm(t){return qe(t)&&te(t)&&ye(t.dynamicReference)}function nr(t){return ee(t)?nr(t(We())):Pt(t)?t.map(e=>Km(e)):[Km(t)]}function Km(t){return ye(t)?Un.create(Bm(t)):Gm(t)?Un.create(t.toOperationNode()):Un.create(Ms(t))}function Dt(t){return t?Array.isArray(t)?t.map(Qm):[Qm(t)]:[Un.createSelectAll()]}function Qm(t){if(ye(t))return Un.createSelectAllFromTable(ce(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}var Jm=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}});var Ym=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function Xm(t){let e=ee(t)?t(We()):t,r=Pt(e)?e:c([e]);return kP(r)}function kP(t){let e=DP(t);return[c([...e.keys()].map(W.create)),Jm.create(t.map(r=>qP(r,e)))]}function DP(t){let e=new Map;for(let r of t){let n=Object.keys(r);for(let i of n)!e.has(i)&&r[i]!==void 0&&e.set(i,e.size)}return e}function qP(t,e){let r=Object.keys(t),n=Array.from({length:e.size}),i=!1;for(let s of r){let a=e.get(s);if(Tr(a))continue;let d=t[s];(Tr(d)||an(d))&&(i=!0),n[a]=d}if(r.length<e.size||i){let s=Ym.create();return Wn.create(n.map(a=>Tr(a)?s:Ze(a)))}return Is.create(n)}var Ge=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},cloneWith(t,e){return c({...t,...e})}});var dn=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return c({...t,from:t.from?cn.cloneWithFroms(t.from,e):cn.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})}});var hl=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}});var Dr=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:cn.create(t),...e&&{with:e}})},cloneWithOrderByItem(t,e){return c({...t,orderBy:t.orderBy?rr.cloneWithItem(t.orderBy,e):rr.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?hl.cloneWithTables(t.using,e):hl.create(e)})}});var ve=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?Xt.create(t.where,r):Zt.create(t.where,r)})}});var gl=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}});var Zm=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}});var R=c({is(t){return I.is(t)||Ge.is(t)||dn.is(t)||Dr.is(t)},cloneWithWhere(t,e){return c({...t,where:t.where?ve.cloneWithOperation(t.where,"And",e):ve.create(e)})},cloneWithOrWhere(t,e){return c({...t,where:t.where?ve.cloneWithOperation(t.where,"Or",e):ve.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?gl.cloneWithSelections(t.returning,e):gl.create(e)})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:Zm.create(e,r?.toOperationNode())})}});var eh=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function jn(t){let e=ee(t)?t(We()):t;return Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>eh.create(W.create(r),Ze(n)))}var th=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});var uo=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get insertId(){return this.#e}get numInsertedOrUpdatedRows(){return this.#t}};for(let t of["insertId","numInsertedOrUpdatedRows"])Object.defineProperty(uo.prototype,t,{enumerable:!0});var qt=class extends Error{node;constructor(e){super("no result"),this.node=e}};function qr(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}var H=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?ve.cloneWithOperation(t.indexWhere,"And",e):ve.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?ve.cloneWithOperation(t.indexWhere,"Or",e):ve.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?ve.cloneWithOperation(t.updateWhere,"And",e):ve.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?ve.cloneWithOperation(t.updateWhere,"Or",e):ve.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var po=class t{#e;constructor(e){this.#e=c(e)}column(e){let r=W.create(e);return new t({...this.#e,onConflictNode:H.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,r]):c([r])})})}columns(e){let r=e.map(W.create);return new t({...this.#e,onConflictNode:H.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,...r]):c(r)})})}constraint(e){return new t({...this.#e,onConflictNode:H.cloneWith(this.#e.onConflictNode,{constraint:q.create(e)})})}expression(e){return new t({...this.#e,onConflictNode:H.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new t({...this.#e,onConflictNode:H.cloneWithIndexWhere(this.#e.onConflictNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,onConflictNode:H.cloneWithIndexWhere(this.#e.onConflictNode,Q(e,r,n))})}orWhere(...e){return new t({...this.#e,onConflictNode:H.cloneWithIndexOrWhere(this.#e.onConflictNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,onConflictNode:H.cloneWithIndexOrWhere(this.#e.onConflictNode,Q(e,r,n))})}whereExists(e){return new t({...this.#e,onConflictNode:H.cloneWithIndexWhere(this.#e.onConflictNode,ae(e))})}whereNotExists(e){return new t({...this.#e,onConflictNode:H.cloneWithIndexWhere(this.#e.onConflictNode,re(e))})}orWhereExists(e){return new t({...this.#e,onConflictNode:H.cloneWithIndexOrWhere(this.#e.onConflictNode,ae(e))})}orWhereNotExists(e){return new t({...this.#e,onConflictNode:H.cloneWithIndexOrWhere(this.#e.onConflictNode,re(e))})}clearWhere(){return new t({...this.#e,onConflictNode:H.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Ls({...this.#e,onConflictNode:H.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Ws({...this.#e,onConflictNode:H.cloneWith(this.#e.onConflictNode,{updates:jn(e)})})}$call(e){return e(this)}};T(po,"don't await OnConflictBuilder instances.");var Ls=class{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.onConflictNode}};T(Ls,"don't await OnConflictDoNothingBuilder instances.");var Ws=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,onConflictNode:H.cloneWithUpdateWhere(this.#e.onConflictNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,onConflictNode:H.cloneWithUpdateWhere(this.#e.onConflictNode,Q(e,r,n))})}orWhere(...e){return new t({...this.#e,onConflictNode:H.cloneWithUpdateOrWhere(this.#e.onConflictNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,onConflictNode:H.cloneWithUpdateOrWhere(this.#e.onConflictNode,Q(e,r,n))})}whereExists(e){return new t({...this.#e,onConflictNode:H.cloneWithUpdateWhere(this.#e.onConflictNode,ae(e))})}whereNotExists(e){return new t({...this.#e,onConflictNode:H.cloneWithUpdateWhere(this.#e.onConflictNode,re(e))})}orWhereExists(e){return new t({...this.#e,onConflictNode:H.cloneWithUpdateOrWhere(this.#e.onConflictNode,ae(e))})}orWhereNotExists(e){return new t({...this.#e,onConflictNode:H.cloneWithUpdateOrWhere(this.#e.onConflictNode,re(e))})}clearWhere(){return new t({...this.#e,onConflictNode:H.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}};T(Ws,"don't await OnConflictUpdateBuilder instances.");var $n=class t{#e;constructor(e){this.#e=c(e)}values(e){let[r,n]=Xm(e);return new t({...this.#e,queryNode:Ge.cloneWith(this.#e.queryNode,{columns:r,values:n})})}columns(e){return new t({...this.#e,queryNode:Ge.cloneWith(this.#e.queryNode,{columns:c(e.map(W.create))})})}expression(e){return new t({...this.#e,queryNode:Ge.cloneWith(this.#e.queryNode,{values:kr(e)})})}ignore(){return new t({...this.#e,queryNode:Ge.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new t({...this.#e,queryNode:Ge.cloneWith(this.#e.queryNode,{onConflict:e(new po({onConflictNode:H.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new t({...this.#e,queryNode:Ge.cloneWith(this.#e.queryNode,{onDuplicateKey:th.create(jn(e))})})}returning(e){return new t({...this.#e,queryNode:R.cloneWithReturning(this.#e.queryNode,nr(e))})}returningAll(){return new t({...this.#e,queryNode:R.cloneWithReturning(this.#e.queryNode,Dt())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,n=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new uo(n.insertId,n.numAffectedRows??n.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=qt){let r=await this.executeTakeFirst();if(r===void 0)throw qr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:R.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};T($n,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var fo=class{#e;constructor(e){this.#e=e}get numDeletedRows(){return this.#e}};Object.defineProperty(fo.prototype,"numDeletedRows",{enumerable:!0});var Us=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:Ee.create(t)})}});var mo=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,Q(e,r,n))})}orWhere(...e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,Q(e,r,n))})}whereExists(e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,ae(e))})}whereNotExists(e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,re(e))})}orWhereExists(e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,ae(e))})}orWhereNotExists(e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,re(e))})}clearWhere(){return new t({...this.#e,queryNode:R.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new t({...this.#e,queryNode:Dr.cloneWithUsing(this.#e.queryNode,wt(e))})}innerJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("FullJoin",e))})}returning(e){return new t({...this.#e,queryNode:R.cloneWithReturning(this.#e.queryNode,nr(e))})}returningAll(e){return new t({...this.#e,queryNode:R.cloneWithReturning(this.#e.queryNode,Dt(e))})}orderBy(e,r){return new t({...this.#e,queryNode:Dr.cloneWithOrderByItem(this.#e.queryNode,Ir(e,r))})}limit(e){return new t({...this.#e,queryNode:Dr.cloneWithLimit(this.#e.queryNode,Us.create(e))})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,n=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new fo(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=qt){let r=await this.executeTakeFirst();if(r===void 0)throw qr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:R.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};T(mo,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var ho=class{#e;constructor(e){this.#e=e}get numUpdatedRows(){return this.#e}};Object.defineProperty(ho.prototype,"numUpdatedRows",{enumerable:!0});var go=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,Q(e,r,n))})}orWhere(...e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,Q(e,r,n))})}whereExists(e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,ae(e))})}whereNotExists(e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,re(e))})}orWhereExists(e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,ae(e))})}orWhereNotExists(e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,re(e))})}clearWhere(){return new t({...this.#e,queryNode:R.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new t({...this.#e,queryNode:dn.cloneWithFromItems(this.#e.queryNode,wt(e))})}innerJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("FullJoin",e))})}set(e){return new t({...this.#e,queryNode:dn.cloneWithUpdates(this.#e.queryNode,jn(e))})}returning(e){return new t({...this.#e,queryNode:R.cloneWithReturning(this.#e.queryNode,nr(e))})}returningAll(){return new t({...this.#e,queryNode:R.cloneWithReturning(this.#e.queryNode,Dt())})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=e.query,n=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&r.returning?n.rows:[new ho(n.numAffectedRows??n.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=qt){let r=await this.executeTakeFirst();if(r===void 0)throw qr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:R.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};T(go,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var rh=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})}});var yl=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:ot.create(t),columns:e?c(e.map(W.create)):void 0})}});function vl(t,e){let r=e(nh());return rh.create(FP(t),r.toOperationNode())}function FP(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],n=e[1].split(",").map(i=>i.trim());return yl.create(r,n)}else return yl.create(t)}var yo=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}});var ih=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function oh(t){let e="";for(let r=0;r<t;++r)e+=MP();return e}function MP(){return ih[~~(Math.random()*ih.length)]}function U(){return new _l}var _l=class{#e;get queryId(){return this.#e===void 0&&(this.#e=oh(8)),this.#e}};var Vn=class{nodeStack=[];#e=c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",table:this.transformNode(e.table),column:this.transformNode(e.column)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};var LP=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0}),js=class extends Vn{#e;#t=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#r(e))return super.transformNodeImpl(e);let r=this.#n(e);for(let i of r)this.#t.add(i);let n=super.transformNodeImpl(e);for(let i of r)this.#t.delete(i);return n}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:q.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:ot.createWithSchema(this.#e,r.table.table.identifier.name)}}#r(e){return e.kind in LP}#n(e){let r=new Set;if("name"in e&&e.name&&He.is(e.name)&&this.#o(e.name,r),"from"in e&&e.from)for(let n of e.from.froms)this.#i(n,r);if("into"in e&&e.into&&this.#i(e.into,r),"table"in e&&e.table&&this.#i(e.table,r),"joins"in e&&e.joins)for(let n of e.joins)this.#i(n.table,r);return"with"in e&&e.with&&this.#s(e.with,r),r}#i(e,r){let n=ot.is(e)?e:ze.is(e)&&ot.is(e.node)?e.node:null;n&&this.#o(n.table,r)}#o(e,r){this.#t.has(e.identifier.name)||r.add(e.identifier.name)}#s(e,r){for(let n of e.expressions)r.delete(n.name.table.table.identifier.name)}};var et=class{#e;constructor(e){this.#e=new js(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};var Bn=class t{#e;constructor(e){this.#e=c(e)}selectFrom(e){return new ir({queryId:U(),executor:this.#e.executor,queryNode:I.create(wt(e),this.#e.withNode)})}insertInto(e){return new $n({queryId:U(),executor:this.#e.executor,queryNode:Ge.create(ce(e),this.#e.withNode)})}replaceInto(e){return new $n({queryId:U(),executor:this.#e.executor,queryNode:Ge.create(ce(e),this.#e.withNode,!0)})}deleteFrom(e){return new mo({queryId:U(),executor:this.#e.executor,queryNode:Dr.create(wt(e),this.#e.withNode)})}updateTable(e){return new go({queryId:U(),executor:this.#e.executor,queryNode:dn.create(Fr(e),this.#e.withNode)})}with(e,r){let n=vl(e,r);return new t({...this.#e,withNode:this.#e.withNode?yo.cloneWithExpression(this.#e.withNode,n):yo.create(n)})}withRecursive(e,r){let n=vl(e,r);return new t({...this.#e,withNode:this.#e.withNode?yo.cloneWithExpression(this.#e.withNode,n):yo.create(n,{recursive:!0})})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new et(e))})}};var vo=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};var sh=new Set;function ah(t){sh.has(t)||(sh.add(t),console.log(t))}var WP=c([]),Hn=class{#e;constructor(e=WP){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let n of this.#e){let i=n.transformQuery({node:e,queryId:r});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async n=>{let i=await n.executeQuery(e),o=await this.#t(i,r);return UP(i,o),o})}async*stream(e,r,n){let i=new vo,o=new vo;this.provideConnection(async a=>(i.resolve(a),await o.promise)).catch(a=>i.reject(a));let s=await i.promise;try{for await(let a of s.streamQuery(e,r))yield await this.#t(a,n)}finally{o.resolve()}}async#t(e,r){for(let n of this.#e)e=await n.transformResult({result:e,queryId:r});return e}};function UP(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||ah("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}var El=class t extends Hn{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new t([...this.plugins,e])}withPlugins(e){return new t([...this.plugins,...e])}withPluginAtFront(e){return new t([e,...this.plugins])}withoutPlugins(){return new t([])}},ln=new El;function wl(){return new ir({queryId:U(),executor:ln,queryNode:I.create(wt([]))})}function nh(){return new Bn({executor:ln})}function $s(t,e){return new co({joinNode:Fe.create(t,Fr(e))})}function ch(){return new lo({overNode:so.create()})}var _o=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}});var Ue=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),_o.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});function Vs(t,e,r){if(!sl(e)&&!te(e))throw new Error(`invalid binary operator ${JSON.stringify(e)}`);return VP(e,r)?BP(t,e,r):oo.create(Xe(t),xl(e),ks(r))}function jP(t,e,r){if(!sl(e)&&!te(e))throw new Error(`invalid binary operator ${JSON.stringify(e)}`);return oo.create(Xe(t),xl(e),Xe(r))}function $P(t,e,r){if(!al(e)&&!te(e))throw new Error(`invalid comparison operator ${JSON.stringify(e)}`);return Vs(t,e,r)}function Q(t,e,r){if(!al(e)&&!te(e))throw new Error(`invalid comparison operator ${JSON.stringify(e)}`);return jP(t,e,r)}function _e(t){return Bs("where",t)}function Sl(t){return Bs("having",t)}function ml(t){return Bs("on",t)}function Nl(t){return Bs("when",t)}function Bs(t,e){if(e.length===3)return $P(e[0],e[1],e[2]);if(e.length===1)return HP(t,e[0]);throw dh(t,e)}function VP(t,e){return(t==="is"||t==="is not")&&(As(e)||Ts(e))}function BP(t,e,r){return oo.create(Xe(t),xl(e),Ee.createImmediate(r))}function xl(t){if(ye(t)&&jm.includes(t))return Mn.create(t);if(te(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function HP(t,e){if(ee(e)){if(t==="when")throw new Error("when method doesn't accept a callback as an argument");return zP[t](e)}else if(te(e)){let r=e.toOperationNode();if(me.is(r)||oo.is(r)||Ds.is(r)||Pr.is(r)||Ue.is(r))return r}else if(t==="when")return Ee.create(e);throw dh(t,e)}function dh(t,e){return new Error(`invalid arguments passed to a '${t}' method: ${JSON.stringify(e)}`)}var zP=c({where(t){let e=wl(),r=We(),i=t(Object.assign(e,r)).toOperationNode();if(I.is(i)){if(!i.where)throw new Error("no `where` methods called inside a group callback");return Pr.create(i.where.where)}else return i},having(t){let e=wl(),r=We(),i=t(Object.assign(e,r)).toOperationNode();if(I.is(i)){if(!i.having)throw new Error("no `having` methods called inside a group callback");return Pr.create(i.having.having)}else return i},on(t){let e=$s("InnerJoin","table"),r=We(),i=t(Object.assign(e,r)).toOperationNode();if(Fe.is(i)){if(!i.on)throw new Error("no `on` methods called inside a group callback");return Pr.create(i.on.on)}else return i}});function Re(t,e){if(e.length===3)return KP(t,e[0],e[1],e[2]);if(e.length===2)return GP(t,e[0],e[1]);throw new Error("not implemented")}function GP(t,e,r){return r($s(t,e)).toOperationNode()}function KP(t,e,r,n){return Fe.createWithOn(t,Fr(e),Q(r,"=",n))}var lh=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:Ee.create(t)})}});var uh=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function ph(t){return t=ee(t)?t(We()):t,tr(t).map(uh.create)}var Hs=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function un(t,e,r){return Hs.create(t,e.toOperationNode(),r)}var ir=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}where(...e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,_e(e))})}whereRef(e,r,n){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,Q(e,r,n))})}orWhere(...e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,_e(e))})}orWhereRef(e,r,n){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,Q(e,r,n))})}whereExists(e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,ae(e))})}whereNotExists(e){return new t({...this.#e,queryNode:R.cloneWithWhere(this.#e.queryNode,re(e))})}orWhereExists(e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,ae(e))})}orWhereNotExists(e){return new t({...this.#e,queryNode:R.cloneWithOrWhere(this.#e.queryNode,re(e))})}having(...e){return new t({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,Sl(e))})}havingRef(e,r,n){return new t({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,Q(e,r,n))})}orHaving(...e){return new t({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,Sl(e))})}orHavingRef(e,r,n){return new t({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,Q(e,r,n))})}havingExists(e){return new t({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,ae(e))})}havingNotExist(e){return new t({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,re(e))})}havingNotExists(e){return new t({...this.#e,queryNode:I.cloneWithHaving(this.#e.queryNode,re(e))})}orHavingExists(e){return new t({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,ae(e))})}orHavingNotExists(e){return new t({...this.#e,queryNode:I.cloneWithOrHaving(this.#e.queryNode,re(e))})}select(e){return new t({...this.#e,queryNode:I.cloneWithSelections(this.#e.queryNode,nr(e))})}distinctOn(e){return new t({...this.#e,queryNode:I.cloneWithDistinctOn(this.#e.queryNode,tr(e))})}modifyFront(e){return new t({...this.#e,queryNode:I.cloneWithFrontModifier(this.#e.queryNode,kt.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.createWithExpression(e.toOperationNode()))})}distinct(){return new t({...this.#e,queryNode:I.cloneWithFrontModifier(this.#e.queryNode,kt.create("Distinct"))})}forUpdate(){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.create("ForUpdate"))})}forShare(){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.create("ForShare"))})}forKeyShare(){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.create("ForKeyShare"))})}forNoKeyUpdate(){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.create("ForNoKeyUpdate"))})}skipLocked(){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.create("SkipLocked"))})}noWait(){return new t({...this.#e,queryNode:I.cloneWithEndModifier(this.#e.queryNode,kt.create("NoWait"))})}selectAll(e){return new t({...this.#e,queryNode:I.cloneWithSelections(this.#e.queryNode,Dt(e))})}innerJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("FullJoin",e))})}innerJoinLateral(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("LateralInnerJoin",e))})}leftJoinLateral(...e){return new t({...this.#e,queryNode:R.cloneWithJoin(this.#e.queryNode,Re("LateralLeftJoin",e))})}orderBy(e,r){return new t({...this.#e,queryNode:I.cloneWithOrderByItem(this.#e.queryNode,Ir(e,r))})}groupBy(e){return new t({...this.#e,queryNode:I.cloneWithGroupByItems(this.#e.queryNode,ph(e))})}limit(e){return new t({...this.#e,queryNode:I.cloneWithLimit(this.#e.queryNode,Us.create(e))})}offset(e){return new t({...this.#e,queryNode:I.cloneWithOffset(this.#e.queryNode,lh.create(e))})}union(e){return new t({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,un("union",e,!1))})}unionAll(e){return new t({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,un("union",e,!0))})}intersect(e){return new t({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,un("intersect",e,!1))})}intersectAll(e){return new t({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,un("intersect",e,!0))})}except(e){return new t({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,un("except",e,!1))})}exceptAll(e){return new t({...this.#e,queryNode:I.cloneWithSetOperation(this.#e.queryNode,un("except",e,!0))})}as(e){return new bl(this,e)}clearSelect(){return new t({...this.#e,queryNode:I.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new t({...this.#e,queryNode:R.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:I.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new t({...this.#e,queryNode:I.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:I.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}call(e){return this.$call(e)}$if(e,r){return e?r(this):new t({...this.#e})}if(e,r){return this.$if(e,r)}$castTo(){return new t(this.#e)}castTo(){return this.$castTo()}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=qt){let r=await this.executeTakeFirst();if(r===void 0)throw qr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),n=this.#e.executor.stream(r,e,this.#e.queryId);for await(let i of n)yield*i.rows}async explain(e,r){return await new t({...this.#e,queryNode:R.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};T(ir,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");var bl=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ze.create(this.#e.toOperationNode(),q.create(this.#t))}};var ue=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Cl(this,e)}$castTo(){return new t(this.#e)}toOperationNode(){return this.#e}},Cl=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ze.create(this.#e.toOperationNode(),te(this.#t)?this.#t.toOperationNode():q.create(this.#t))}};var Ke=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithFilter(t,e){return c({...t,filter:t.filter?ve.cloneWithOperation(t.filter,"And",e):ve.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?ve.cloneWithOperation(t.filter,"Or",e):ve.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}});var fh=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});var zn=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}as(e){return new Ol(this,e)}distinct(){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithFilter(this.#e.aggregateFunctionNode,_e(e))})}filterWhereExists(e){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithFilter(this.#e.aggregateFunctionNode,ae(e))})}filterWhereNotExists(e){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithFilter(this.#e.aggregateFunctionNode,re(e))})}filterWhereRef(e,r,n){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithFilter(this.#e.aggregateFunctionNode,Q(e,r,n))})}orFilterWhere(...e){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithOrFilter(this.#e.aggregateFunctionNode,_e(e))})}orFilterWhereExists(e){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithOrFilter(this.#e.aggregateFunctionNode,ae(e))})}orFilterWhereNotExists(e){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithOrFilter(this.#e.aggregateFunctionNode,re(e))})}orFilterWhereRef(e,r,n){return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithOrFilter(this.#e.aggregateFunctionNode,Q(e,r,n))})}over(e){let r=ch();return new t({...this.#e,aggregateFunctionNode:Ke.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.aggregateFunctionNode}};T(zn,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var Ol=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ze.create(this.#e.toOperationNode(),q.create(this.#t))}};function zs(){let t=(r,n)=>new ue(fh.create(r,tr(n))),e=(r,n)=>new zn({aggregateFunctionNode:Ke.create(r,n?tr(n):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(r,...n){return t("coalesce",[r,...n])},count(r){return e("count",[r])},countAll(r){return new zn({aggregateFunctionNode:Ke.create("count",Dt(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])}})}var Gn=class{#e;constructor(e){this.#e=c(e)}when(...e){return new Gs({...this.#e,node:Ue.cloneWithWhen(this.#e.node,_o.create(Nl(e)))})}},Gs=class{#e;constructor(e){this.#e=c(e)}then(e){return new Rl({...this.#e,node:Ue.cloneWithThen(this.#e.node,Ze(e))})}},Rl=class{#e;constructor(e){this.#e=c(e)}when(...e){return new Gs({...this.#e,node:Ue.cloneWithWhen(this.#e.node,_o.create(Nl(e)))})}else(e){return new Tl({...this.#e,node:Ue.cloneWith(this.#e.node,{else:Ze(e)})})}end(){return new ue(Ue.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new ue(Ue.cloneWith(this.#e.node,{isStatement:!0}))}},Tl=class{#e;constructor(e){this.#e=c(e)}end(){return new ue(Ue.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new ue(Ue.cloneWith(this.#e.node,{isStatement:!0}))}};function mh(t=ln){function e(r,n){return new ue(qs(r,n))}return{get fn(){return zs()},selectFrom(r){return new ir({queryId:U(),executor:t,queryNode:I.create(wt(r))})},case(r){return new Gn({node:Ue.create(Tr(r)?void 0:Xe(r))})},ref(r){return new ue(er(r))},val(r){return new ue(ks(r))},cmpr(r,n,i){return new ue(Vs(r,n,i))},bxp(r,n,i){return new ue(Vs(r,n,i))},unary:e,not(r){return e("not",r)},exists(r){return e("exists",r)},neg(r){return e("-",r)},and(r){if(r.length===0)return new ue(Ee.createImmediate(!0));if(r.length===1)return new ue(r[0].toOperationNode());let n=Xt.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Xt.create(n,r[i].toOperationNode());return new ue(Pr.create(n))},or(r){if(r.length===0)return new ue(Ee.createImmediate(!1));if(r.length===1)return new ue(r[0].toOperationNode());let n=Zt.create(r[0].toOperationNode(),r[1].toOperationNode());for(let i=2;i<r.length;++i)n=Zt.create(n,r[i].toOperationNode());return new ue(Pr.create(n))},withSchema(r){return mh(t.withPluginAtFront(new et(r)))}}}function We(t){return mh()}function kr(t){if(te(t))return t.toOperationNode();if(ee(t))return t(We()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Ms(t){if(te(t))return t.toOperationNode();if(ee(t))return t(We()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function an(t){return Mm(t)||Lm(t)||ee(t)}function wt(t){return Pt(t)?t.map(e=>Fr(e)):[Fr(t)]}function Fr(t){return ye(t)?QP(t):Ms(t)}function QP(t){let e=" as ";if(t.includes(e)){let[r,n]=t.split(e).map(hh);return ze.create(ce(r),q.create(n))}else return ce(t)}function ce(t){let e=".";if(t.includes(e)){let[r,n]=t.split(e).map(hh);return ot.createWithSchema(r,n)}else return ot.create(t)}function hh(t){return t.trim()}var Al=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}});var or=c({is(t){return t.kind==="AlterColumnNode"},create(t){return c({kind:"AlterColumnNode",column:W.create(t)})},cloneWith(t,e){return c({...t,...e})}});var J=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:W.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}});var Pl=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:W.create(t)})}});var Il=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:W.create(t),renameTo:W.create(e)})}});var Kn=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?q.create(e):void 0})}});var gh=["no action","restrict","cascade","set null","set default"],Qn=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});function Ks(t){return te(t)?t.toOperationNode():Ee.createImmediate(t)}var Eo=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}});var yh=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});function Jn(t){if(gh.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Ft=class t{#e;constructor(e){this.#e=e}autoIncrement(){return new t(J.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new t(J.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=er(e);if(!sn.is(r)||Ln.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new t(J.cloneWith(this.#e,{references:Qn.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new t(J.cloneWith(this.#e,{references:Qn.cloneWithOnDelete(this.#e.references,Jn(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new t(J.cloneWith(this.#e,{references:Qn.cloneWithOnUpdate(this.#e.references,Jn(e))}))}unique(){return new t(J.cloneWith(this.#e,{unique:!0}))}notNull(){return new t(J.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new t(J.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new t(J.cloneWith(this.#e,{defaultTo:yh.create(Ks(e))}))}check(e){return new t(J.cloneWith(this.#e,{check:Kn.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new t(J.cloneWith(this.#e,{generated:Eo.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new t(J.cloneWith(this.#e,{generated:Eo.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new t(J.cloneWith(this.#e,{generated:Eo.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new t(J.cloneWith(this.#e,{generated:Eo.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new t(J.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new t(J.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}};T(Ft,"don't await ColumnDefinitionBuilder instances directly.");var kl=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}});var vh=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function sr(t){return te(t)?t.toOperationNode():vh.create(t)}var pn=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,n){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Qn.create(e,r),name:n?q.create(n):void 0})},cloneWith(t,e){return c({...t,...e})}});var fn=class t{#e;constructor(e){this.#e=e}onDelete(e){return new t(pn.cloneWith(this.#e,{onDelete:Jn(e)}))}onUpdate(e){return new t(pn.cloneWith(this.#e,{onUpdate:Jn(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}};T(fn,"don't await ForeignKeyConstraintBuilder instances directly.");var wo=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}});var Qs=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return c({kind:"UniqueConstraintNode",columns:c(t.map(W.create)),name:e?q.create(e):void 0})}});var Yn=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:q.create(t)})},cloneWith(t,e){return c({...t,...e})}});var hn=class{alterColumnNode;constructor(e){this.alterColumnNode=e}setDataType(e){return new mn(or.cloneWith(this.alterColumnNode,{dataType:sr(e)}))}setDefault(e){return new mn(or.cloneWith(this.alterColumnNode,{setDefault:Ks(e)}))}dropDefault(){return new mn(or.cloneWith(this.alterColumnNode,{dropDefault:!0}))}setNotNull(){return new mn(or.cloneWith(this.alterColumnNode,{setNotNull:!0}))}dropNotNull(){return new mn(or.cloneWith(this.alterColumnNode,{dropNotNull:!0}))}$call(e){return e(this)}},mn=class extends hn{toOperationNode(){return this.alterColumnNode}};var Mr=class{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Mr,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");var So=class t{#e;constructor(e){this.#e=c(e)}onDelete(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(K.cloneWithTableProps(this.#e.node,{addConstraint:wo.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(So,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");var No=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:K.cloneWithTableProps(this.#e.node,{dropConstraint:Yn.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new t({...this.#e,node:K.cloneWithTableProps(this.#e.node,{dropConstraint:Yn.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new t({...this.#e,node:K.cloneWithTableProps(this.#e.node,{dropConstraint:Yn.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(No,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");var xo=class{#e;constructor(e){this.#e=c(e)}renameTo(e){return new Mr({...this.#e,node:K.cloneWithTableProps(this.#e.node,{renameTo:ce(e)})})}setSchema(e){return new Mr({...this.#e,node:K.cloneWithTableProps(this.#e.node,{setSchema:q.create(e)})})}alterColumn(e,r){let n=r(new hn(or.create(e)));return new Lr({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(e){return new Lr({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,Pl.create(e))})}renameColumn(e,r){return new Lr({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,Il.create(e,r))})}addColumn(e,r,n=Ar){let i=n(new Ft(J.create(e,sr(r))));return new Lr({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,Al.create(i.toOperationNode()))})}modifyColumn(e,r,n=Ar){let i=n(new Ft(J.create(e,sr(r))));return new Lr({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,kl.create(i.toOperationNode()))})}addUniqueConstraint(e,r){return new Mr({...this.#e,node:K.cloneWithTableProps(this.#e.node,{addConstraint:wo.create(Qs.create(r,e))})})}addCheckConstraint(e,r){return new Mr({...this.#e,node:K.cloneWithTableProps(this.#e.node,{addConstraint:wo.create(Kn.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,n,i){return new So({...this.#e,constraintBuilder:new fn(pn.create(r.map(W.create),ce(n),i.map(W.create),e))})}dropConstraint(e){return new No({...this.#e,node:K.cloneWithTableProps(this.#e.node,{dropConstraint:Yn.create(e)})})}$call(e){return e(this)}call(e){return this.$call(e)}},Lr=class t{#e;constructor(e){this.#e=c(e)}alterColumn(e,r){let n=r(new hn(or.create(e)));return new t({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,n.toOperationNode())})}dropColumn(e){return new t({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,Pl.create(e))})}renameColumn(e,r){return new t({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,Il.create(e,r))})}addColumn(e,r,n=Ar){let i=n(new Ft(J.create(e,sr(r))));return new t({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,Al.create(i.toOperationNode()))})}modifyColumn(e,r,n=Ar){let i=n(new Ft(J.create(e,sr(r))));return new t({...this.#e,node:K.cloneWithColumnAlteration(this.#e.node,kl.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(xo,"don't await AlterTableBuilder instances");T(hn,"don't await AlterColumnBuilder instances");T(Lr,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");var Xn=class extends Vn{transformValue(e){return{...super.transformValue(e),immediate:!0}}};var bo=class t{#e;constructor(e){this.#e=c(e)}ifNotExists(){return new t({...this.#e,node:It.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new t({...this.#e,node:It.cloneWith(this.#e.node,{unique:!0})})}on(e){return new t({...this.#e,node:It.cloneWith(this.#e.node,{table:ce(e)})})}column(e){return new t({...this.#e,node:It.cloneWithColumns(this.#e.node,[ll(e)])})}columns(e){return new t({...this.#e,node:It.cloneWithColumns(this.#e.node,e.map(ll))})}expression(e){return new t({...this.#e,node:It.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new t({...this.#e,node:It.cloneWith(this.#e.node,{using:me.createWithSql(e)})})}where(...e){let r=new Xn;return new t({...this.#e,node:R.cloneWithWhere(this.#e.node,r.transformNode(_e(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(bo,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");var Co=class t{#e;constructor(e){this.#e=c(e)}ifNotExists(){return new t({...this.#e,node:Ps.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Co,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");var _h=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(W.create)),name:e?q.create(e):void 0})}});function Eh(t){if(Fm.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Oo=class t{#e;constructor(e){this.#e=c(e)}temporary(){return new t({...this.#e,node:Ye.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new t({...this.#e,node:Ye.cloneWith(this.#e.node,{onCommit:Eh(e)})})}ifNotExists(){return new t({...this.#e,node:Ye.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,n=Ar){let i=n(new Ft(J.create(e,sr(r))));return new t({...this.#e,node:Ye.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new t({...this.#e,node:Ye.cloneWithConstraint(this.#e.node,_h.create(r,e))})}addUniqueConstraint(e,r){return new t({...this.#e,node:Ye.cloneWithConstraint(this.#e.node,Qs.create(r,e))})}addCheckConstraint(e,r){return new t({...this.#e,node:Ye.cloneWithConstraint(this.#e.node,Kn.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,n,i,o=Ar){let s=o(new fn(pn.create(r.map(W.create),ce(n),i.map(W.create),e)));return new t({...this.#e,node:Ye.cloneWithConstraint(this.#e.node,s.toOperationNode())})}modifyFront(e){return new t({...this.#e,node:Ye.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new t({...this.#e,node:Ye.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}call(e){return this.$call(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Oo,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");var Ro=class t{#e;constructor(e){this.#e=c(e)}on(e){return new t({...this.#e,node:qn.cloneWith(this.#e.node,{table:ce(e)})})}ifExists(){return new t({...this.#e,node:qn.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:qn.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Ro,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");var To=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:no.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:no.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(To,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");var Ao=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:io.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:io.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Ao,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");var St=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:He.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Js=class{#e=new Xn;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};var Po=class t{#e;constructor(e){this.#e=c(e)}temporary(){return new t({...this.#e,node:St.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new t({...this.#e,node:St.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new t({...this.#e,node:St.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new t({...this.#e,node:St.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new t({...this.#e,node:St.cloneWith(this.#e.node,{columns:e.map(dl)})})}as(e){let r=e.withPlugin(new Js).toOperationNode();return new t({...this.#e,node:St.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Po,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");var Zn=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:He.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Io=class t{#e;constructor(e){this.#e=c(e)}materialized(){return new t({...this.#e,node:Zn.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new t({...this.#e,node:Zn.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Zn.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Io,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");var Ys=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Wn.create(e.map(r=>Ee.createImmediate(r)))})}});var ko=class t{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new t({...this.#e,node:Ys.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(ko,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");var Xs=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var Do=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:Xs.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};T(Do,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Dl(t){let e=".";if(t.includes(e)){let r=t.split(e).map(JP);if(r.length===2)return He.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return He.create(t)}function JP(t){return t.trim()}var Zs=class t{#e;constructor(e){this.#e=e}createTable(e){return new Oo({queryId:U(),executor:this.#e,node:Ye.create(ce(e))})}dropTable(e){return new Ao({queryId:U(),executor:this.#e,node:io.create(ce(e))})}createIndex(e){return new bo({queryId:U(),executor:this.#e,node:It.create(e)})}dropIndex(e){return new Ro({queryId:U(),executor:this.#e,node:qn.create(e)})}createSchema(e){return new Co({queryId:U(),executor:this.#e,node:Ps.create(e)})}dropSchema(e){return new To({queryId:U(),executor:this.#e,node:no.create(e)})}alterTable(e){return new xo({queryId:U(),executor:this.#e,node:K.create(ce(e))})}createView(e){return new Po({queryId:U(),executor:this.#e,node:St.create(e)})}dropView(e){return new Io({queryId:U(),executor:this.#e,node:Zn.create(e)})}createType(e){return new ko({queryId:U(),executor:this.#e,node:Ys.create(Dl(e))})}dropType(e){return new Do({queryId:U(),executor:this.#e,node:Xs.create(Dl(e))})}withPlugin(e){return new t(this.#e.withPlugin(e))}withoutPlugins(){return new t(this.#e.withoutPlugins())}withSchema(e){return new t(this.#e.withPluginAtFront(new et(e)))}};var ea=class{ref(e){return new Fs(e)}};var ta=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};var ra=class t extends Hn{#e;#t;#r;constructor(e,r,n,i=[]){super(i),this.#e=e,this.#t=r,this.#r=n}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new t(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new t(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new t(this.#e,this.#t,this.#r,[])}};function ql(){return typeof performance<"u"&&ee(performance.now)?performance.now():Date.now()}var na=class{#e;#t;#r;#n;#i=new WeakSet;constructor(e,r){this.#e=e,this.#t=r}async init(){this.#r||(this.#r=this.#e.init().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){await this.init();let e=await this.#e.acquireConnection();return this.#i.has(e)||(this.#o()&&this.#s(e),this.#i.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n)}#o(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#s(e){let r=e.executeQuery;e.executeQuery=async n=>{let i=ql();try{return await r.call(e,n)}catch(o){throw await this.#d(o,n,i),o}finally{await this.#l(n,i)}}}async#d(e,r,n){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#c(n)}))}async#l(e,r){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(r)}))}#c(e){return ql()-e}};var qo=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;let r=this.#r(e);return this.#t=r.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),r}async#r(e){return await e(this.#e)}};var wh=["read uncommitted","read committed","repeatable read","serializable"];var Yne=c(["query","error"]),ia=class{#e;#t;constructor(e){ee(e)?(this.#t=e,this.#e=c({query:!0,error:!0})):(this.#t=YP,this.#e=c({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}};function YP(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function Sh(t){return qe(t)&&ee(t.compile)}var ei=class t extends Bn{#e;constructor(e){let r,n;if(XP(e))r={executor:e.executor},n={...e};else{let i=e.dialect,o=i.createDriver(),s=i.createQueryCompiler(),a=i.createAdapter(),d=new ia(e.log??[]),l=new na(o,d),u=new ta(l),p=new ra(s,a,u,e.plugins??[]);r={executor:p},n={config:e,executor:p,dialect:i,driver:l}}super(r),this.#e=c(n)}get schema(){return new Zs(this.#e.executor)}get dynamic(){return new ea}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new Gn({node:Ue.create(Tr(e)?void 0:kr(e))})}get fn(){return zs()}transaction(){return new sa({...this.#e})}connection(){return new oa({...this.#e})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new et(e))})}withTables(){return new t({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r=U()){let n=Sh(e)?e.compile():e;return this.getExecutor().executeQuery(n,r)}},Fl=class t extends ei{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new et(e))})}withTables(){return new t({...this.#e})}};function XP(t){return qe(t)&&qe(t.config)&&qe(t.driver)&&qe(t.executor)&&qe(t.dialect)}var oa=class{#e;constructor(e){this.#e=c(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let n=this.#e.executor.withConnectionProvider(new qo(r)),i=new ei({...this.#e,executor:n});return await e(i)})}};T(oa,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var sa=class t{#e;constructor(e){this.#e=c(e)}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...n}=this.#e,i={isolationLevel:r};return ZP(i),this.#e.executor.provideConnection(async o=>{let s=this.#e.executor.withConnectionProvider(new qo(o)),a=new Fl({...n,executor:s});try{await this.#e.driver.beginTransaction(o,i);let d=await e(a);return await this.#e.driver.commitTransaction(o),d}catch(d){throw await this.#e.driver.rollbackTransaction(o),d}})}};T(sa,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function ZP(t){if(t.isolationLevel&&!wh.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}var st=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}as(e){return new Ml(this,e)}$castTo(){return new t({...this.#e})}castTo(){return this.$castTo()}withPlugin(e){return new t({...this.#e,plugins:this.#e.plugins!==void 0?c([...this.#e.plugins,e]):c([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#n(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#n(r),this.#e.queryId)}#t(e){let r=e!==void 0?e.getExecutor():ln;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#n(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};T(st,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var Ml=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return ze.create(this.#e.toOperationNode(),te(this.#t)?this.#t.toOperationNode():q.create(this.#t))}};var je=Object.assign((t,...e)=>new st({queryId:U(),rawNode:me.create(t,e?.map(Ze)??[])}),{ref(t){return new st({queryId:U(),rawNode:me.createWithChild(er(t))})},val(t){return new st({queryId:U(),rawNode:me.createWithChild(Ze(t))})},value(t){return this.val(t)},table(t){return new st({queryId:U(),rawNode:me.createWithChild(ce(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",new st({queryId:U(),rawNode:me.create(e,t.map(q.create))})},lit(t){return new st({queryId:U(),rawNode:me.createWithChild(Ee.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return new st({queryId:U(),rawNode:me.createWithSql(t)})},join(t,e=je`, `){let r=new Array(2*t.length-1),n=e.toOperationNode();for(let i=0;i<t.length;++i)r[2*i]=Ze(t[i]),i!==t.length-1&&(r[2*i+1]=n);return new st({queryId:U(),rawNode:me.createWithChildren(r)})}});var aa=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};var ti=class extends aa{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),c({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!Ge.is(this.parentNode)&&!St.is(this.parentNode)&&!Hs.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select "),e.distinctOn&&(this.compileDistinctOn(e.distinctOn),this.append(" ")),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.selections&&(this.compileList(e.selections),this.append(" ")),this.visitNode(e.from),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let n=e.length-1;for(let i=0;i<=n;i++)this.visitNode(e[i]),i<n&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(R.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(R.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){this.visitNode(e.table),this.append("."),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!ye(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let n=0;n<r.length;++n)this.appendValue(r[n]),n!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(tI[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:n}=e;for(let i=0;i<r.length;++i)this.append(r[i]),n.length>i&&this.visitNode(n[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(R.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(eI[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return Mn.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),n=this.getRightIdentifierWrapper(),i="";for(let o of e)i+=o,o===r?i+=r:o===n&&(i+=n);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(ye(e))this.append(`'${e}'`);else if(Im(e)||Ts(e))this.append(e.toString());else if(As(e))this.append("null");else if(km(e))this.appendImmediateValue(e.toISOString());else if(Dm(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}},eI=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),tI=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});var ri=class{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}};var ca=class{transformQuery(e){return e.node}async transformResult(e){return e.result}};var Mo="kysely_migration",ni="kysely_migration_lock",Ll="migration_lock",Wl=c({__noMigrations__:!0}),da=class{#e;constructor(e){this.#e=c(e)}async getMigrations(){let e=await this.#a(this.#n)?await this.#e.db.withPlugin(this.#o).selectFrom(this.#n).select(["name","timestamp"]).execute():[];return(await this.#f()).map(({name:n,...i})=>{let o=e.find(s=>s.name===n);return{name:n,migration:i,executedAt:o?new Date(o.timestamp):void 0}})}async migrateToLatest(){return this.#t(({migrations:e})=>e.length-1)}async migrateTo(e){return this.#t(({migrations:r})=>{if(e===Wl)return-1;let n=r.findIndex(i=>i.name===e);if(n===-1)throw new Error(`migration "${e}" doesn't exist`);return n})}async migrateUp(){return this.#t(({currentIndex:e,migrations:r})=>Math.min(e+1,r.length-1))}async migrateDown(){return this.#t(({currentIndex:e})=>Math.max(e-1,-1))}async#t(e){try{return await this.#s(),await this.#h(e)}catch(r){return r instanceof Fo?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#n(){return this.#e.migrationTableName??Mo}get#i(){return this.#e.migrationLockTableName??ni}get#o(){return this.#r?new et(this.#r):new ca}async#s(){await this.#d(),await this.#l(),await this.#c(),await this.#m()}async#d(){if(this.#r&&!await this.#u())try{await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute()}catch(e){if(!await this.#u())throw e}}async#l(){if(!await this.#a(this.#n))try{this.#r&&await this.#e.db.schema.createSchema(this.#r).ifNotExists().execute(),await this.#e.db.schema.withPlugin(this.#o).createTable(this.#n).ifNotExists().addColumn("name","varchar(255)",e=>e.notNull().primaryKey()).addColumn("timestamp","varchar(255)",e=>e.notNull()).execute()}catch(e){if(!await this.#a(this.#n))throw e}}async#c(){if(!await this.#a(this.#i))try{await this.#e.db.schema.withPlugin(this.#o).createTable(this.#i).ifNotExists().addColumn("id","varchar(255)",e=>e.notNull().primaryKey()).addColumn("is_locked","integer",e=>e.notNull().defaultTo(0)).execute()}catch(e){if(!await this.#a(this.#i))throw e}}async#m(){if(!await this.#p())try{await this.#e.db.withPlugin(this.#o).insertInto(this.#i).values({id:Ll,is_locked:0}).execute()}catch(e){if(!await this.#p())throw e}}async#u(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#a(e){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(i=>i.name===e&&(!r||i.schema===r))}async#p(){return!!await this.#e.db.withPlugin(this.#o).selectFrom(this.#i).where("id","=",Ll).select("id").executeTakeFirst()}async#h(e){let r=this.#e.db.getExecutor().adapter,n=c({lockTable:this.#e.migrationLockTableName??ni,lockRowId:Ll,lockTableSchema:this.#e.migrationTableSchema}),i=async o=>{try{await r.acquireMigrationLock(o,n);let s=await this.#g(o);if(s.migrations.length===0)return{results:[]};let a=e(s);return a===void 0?{results:[]}:a<s.currentIndex?await this.#_(o,s,a):a>s.currentIndex?await this.#E(o,s,a):{results:[]}}finally{await r.releaseMigrationLock(o,n)}};return r.supportsTransactionalDdl?this.#e.db.transaction().execute(i):this.#e.db.connection().execute(i)}async#g(e){let r=await this.#f(),n=await this.#y(e);return this.#v(r,n),c({migrations:r,currentIndex:r.findIndex(i=>i.name===qm(n))})}async#f(){let e=await this.#e.provider.getMigrations();return Object.keys(e).sort().map(r=>({...e[r],name:r}))}async#y(e){return(await e.withPlugin(this.#o).selectFrom(this.#n).select("name").orderBy("name").execute()).map(n=>n.name)}#v(e,r){for(let n of r)if(!e.some(i=>i.name===n))throw new Error(`corrupted migrations: previously executed migration ${n} is missing`);for(let n=0;n<r.length;++n)if(e[n].name!==r[n])throw new Error(`corrupted migrations: expected previously executed migration ${r[n]} to be at index ${n} but ${e[n].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#_(e,r,n){let i=[];for(let o=r.currentIndex;o>n;--o)i.push({migrationName:r.migrations[o].name,direction:"Down",status:"NotExecuted"});for(let o=0;o<i.length;++o){let s=r.migrations.find(a=>a.name===i[o].migrationName);try{s.down&&(await s.down(e),await e.withPlugin(this.#o).deleteFrom(this.#n).where("name","=",s.name).execute(),i[o]={migrationName:s.name,direction:"Down",status:"Success"})}catch(a){throw i[o]={migrationName:s.name,direction:"Down",status:"Error"},new Fo({error:a,results:i})}}return{results:i}}async#E(e,r,n){let i=[];for(let o=r.currentIndex+1;o<=n;++o)i.push({migrationName:r.migrations[o].name,direction:"Up",status:"NotExecuted"});for(let o=0;o<i.length;++o){let s=r.migrations.find(a=>a.name===i[o].migrationName);try{await s.up(e),await e.withPlugin(this.#o).insertInto(this.#n).values({name:s.name,timestamp:new Date().toISOString()}).execute(),i[o]={migrationName:s.name,direction:"Up",status:"Success"}}catch(a){throw i[o]={migrationName:s.name,direction:"Up",status:"Error"},new Fo({error:a,results:i})}}return{results:i}}},Fo=class extends Error{#e;constructor(e){super(),this.#e=e}get resultSet(){return this.#e}};var rI=/"/g,la=class extends ti{sanitizeIdentifier(e){return e.replace(rI,'""')}};var nI=BigInt("3853314791062309107"),ua=class extends ri{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e){await je`select pg_advisory_xact_lock(${je.lit(nI)})`.execute(e)}async releaseMigrationLock(){}};var iI=/`/g,pa=class extends ti{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(iI,"``")}};var fa=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",i=>i.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA"]).where("columns.TABLE_SCHEMA","=",je`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",Mo).where("columns.TABLE_NAME","!=",ni));let n=await r.execute();return this.#t(n)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,n)=>{let i=r.find(o=>o.name===n.TABLE_NAME);return i||(i=c({name:n.TABLE_NAME,isView:n.TABLE_TYPE==="VIEW",schema:n.TABLE_SCHEMA,columns:[]}),r.push(i)),i.columns.push(c({name:n.COLUMN_NAME,dataType:n.DATA_TYPE,isNullable:n.IS_NULLABLE==="YES",isAutoIncrementing:n.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:n.COLUMN_DEFAULT!==null})),r},[])}};var Nh="ea586330-2c93-47c8-908d-981d9d270f9d",oI=60*60,ma=class extends ri{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e){await je`select get_lock(${je.lit(Nh)}, ${je.lit(oI)})`.execute(e)}async releaseMigrationLock(e){await je`select release_lock(${je.lit(Nh)})`.execute(e)}};var ha=class{#e;constructor(e){this.#e=e}async init(){}async acquireConnection(){return new Ul(this.#e)}async beginTransaction(e){await e.beginTransaction()}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async releaseConnection(e){}async destroy(){}},Ul=class{#e;#t;constructor(e){this.#e=e}async beginTransaction(){let e=await this.#e.client.beginTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,database:this.#e.database});this.#t=e.transactionId}async commitTransaction(){if(!this.#t)throw new Error("Cannot commit a transaction before creating it");await this.#e.client.commitTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async rollbackTransaction(){if(!this.#t)throw new Error("Cannot rollback a transaction before creating it");await this.#e.client.rollbackTransaction({secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,transactionId:this.#t})}async executeQuery(e){let r=await this.#e.client.executeStatement({transactionId:this.#t,secretArn:this.#e.secretArn,resourceArn:this.#e.resourceArn,sql:e.sql,parameters:e.parameters,database:this.#e.database,includeResultMetadata:!0});if(!r.columnMetadata){let o=BigInt(r.numberOfRecordsUpdated||0);return{numAffectedRows:o,numUpdatedOrDeletedRows:o,insertId:r.generatedFields&&r.generatedFields.length>0?BigInt(r.generatedFields[0].longValue):void 0,rows:[]}}return{rows:r.records?.filter(o=>o.length!==0).map(o=>Object.fromEntries(o.map((s,a)=>[r.columnMetadata[a].label||r.columnMetadata[a].name,s.isNull?null:s.stringValue??s.doubleValue??s.longValue??s.booleanValue??this.#r(s.arrayValue)??s.blobValue??null])))||[]}}async*streamQuery(e,r){throw new Error("Data API does not support streaming")}#r(e){if(e)return e.stringValues??e.doubleValues??e.longValues??e.booleanValues??e.arrayValues?.map(this.#r)}};var ga=class extends la{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...xh(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}},ya=class extends pa{appendValue(e){let r=this.numParameters;this.append(this.getCurrentParameterPlaceholder()),this.addParameter({name:r.toString(),...xh(e)})}getCurrentParameterPlaceholder(){return":"+this.numParameters}};function xh(t){switch(typeof t){case"bigint":return{value:{doubleValue:Number(t)}};case"boolean":return{value:{booleanValue:t}};case"number":return Number.isInteger(t)?{value:{longValue:t}}:{value:{doubleValue:t}};case"object":if(t==null)return{value:{isNull:!0}};if(Buffer.isBuffer(t))return{value:{blobValue:t}};if(t instanceof Date)return{typeHint:"TIMESTAMP",value:{stringValue:bh(t.toISOString())}};if(t?.value&&cI(t.value))return t.typeHint&&t.value.stringValue&&typeof t.value.stringValue=="string"&&(t.value.stringValue=sI(t.typeHint,t.value.stringValue)),t;break;case"string":return{value:{stringValue:t}}}throw new $l("Could not serialize value")}function sI(t,e){switch(t){case"DATE":return jl(e).slice(0,10);case"TIME":return e.match(/^\d{4}-\d{2}-\d{2}/)?jl(e).slice(11,23):aI(e);case"TIMESTAMP":return bh(jl(e))}return e}function aI(t){let e=(t||"00:00:00").split(":");for(;e.length<3;)e.push("00");return e.join(":").slice(0,12)}function bh(t){return t.replace("T"," ").slice(0,23)}function jl(t){return new Date(Date.parse(t)).toISOString()}function cI(t){for(let e of lI)if(t[e])return!0;if(t.arrayValue){for(let e of dI)if(t.arrayValue?.[e])return!0}return!1}var $l=class t extends Error{constructor(e){super(e),this.name=t.name}},dI=["booleanValues","doubleValues","longValues","stringValues"],lI=["blobValue","booleanValue","doubleValue","isNull","longValue","stringValue"];var va=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",this.#e.selectFrom("pg_class").select(je`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",je`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(i=>i.where("c.relkind","=","r").orWhere("c.relkind","=","v")).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",Mo).where("c.relname","!=",ni));let n=await r.execute();return this.#t(n)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,n)=>{let i=r.find(o=>o.name===n.table&&o.schema===n.schema);return i||(i=Object.freeze({name:n.table,isView:n.table_type==="v",schema:n.schema,columns:[]}),r.push(i)),i.columns.push(Object.freeze({name:n.column,dataType:n.type,dataTypeSchema:n.type_schema,isNullable:!n.not_null,isAutoIncrementing:!!n.auto_incrementing,hasDefaultValue:n.has_default})),r},[])}};var _a=class{#e;constructor(e){this.#e=e}createAdapter(){if(this.#e.mode==="postgres")return new ua;if(this.#e.mode==="mysql")return new ma;throw new Error("Unknown mode "+this.#e.mode)}createDriver(){return new ha(this.#e.driver)}createQueryCompiler(){if(this.#e.mode==="postgres")return new ga;if(this.#e.mode==="mysql")return new ya;throw new Error("Unknown mode "+this.#e.mode)}createIntrospector(e){if(this.#e.mode==="postgres")return new va(e);if(this.#e.mode==="mysql")return new fa(e);throw new Error("Unknown mode "+this.#e.mode)}};var vP=se(yP(),1);import _Q from"url";async function xue(t){console.log("initializing db");let e=new ei({dialect:new _a({mode:process.env.RDS_ENGINE_MODE,driver:{client:new vP.RDSData({}),database:t?.database||process.env.RDS_DATABASE,secretArn:process.env.RDS_SECRET,resourceArn:process.env.RDS_ARN}})});console.log("creating migrator");let r=new da({db:e,provider:new Am(vQ.resolve(process.env.RDS_MIGRATIONS_PATH))});if(console.log("processing event",t),!t.type||t.type==="latest"){console.log("migrating to latest");let n=await r.migrateToLatest(),i=n.error||n.results?.find(o=>o.status==="Error");if(i)throw i;return n}if(t.type==="to"){if(console.log("migrating to",t.data.name),!t.data.name)return await r.migrateTo(Wl);let n=await r.migrateTo(t.data.name),i=n.error||n.results?.find(o=>o.status==="Error");if(i)throw i;return n}if(t.type==="list")return console.log("listing migrations"),await r.getMigrations()}var Am=class{#e;constructor(e){this.#e=e}async getMigrations(){let e=await import("fs/promises"),r=await import("path"),n={},i=await e.readdir(this.#e);for(let o of i)if(o.endsWith(".js")||o.endsWith(".cjs")||o.endsWith(".mjs")){let[s]=r.basename(o).split("."),a=r.join(this.#e,o);if(process.env.LAMBDA_TASK_ROOT){let l=await import(a);n[s]=l;continue}let d=a.replace(/(mjs|cjs|js)$/g,`${Date.now()}.$1`);try{await e.copyFile(a,d);let l=await import(_Q.pathToFileURL(d).href);n[s]=l}catch(l){console.error(l)}await e.rm(d)}return n}};export{xue as handler};
